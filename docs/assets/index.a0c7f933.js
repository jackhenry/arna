var mn=Object.defineProperty;var vn=(i,t,e)=>t in i?mn(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var V=(i,t,e)=>(vn(i,typeof t!="symbol"?t+"":t,e),e);import{C as Fe,S as W,i as j,s as H,e as x,t as P,a as b,b as D,c as g,l as an,d as Ee,n as B,f as k,g as Q,h as Z,j as bn,k as T,m as yn,o as z,p as se,w as Oe,q as M,r as L,u as _,v as $,x as A,y as R,z as Re,A as _n,B as Ce,D as rn,E as F,K as N,F as $n,G as at,H as rt,I as it,J as ot,L as Je,M as Cn,N as wn,O as Ye,P as En,Q as Xe,R as xn,T as le,U as Sn,V as Mn}from"./vendor.e13bc48d.js";const Ln=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const r of a)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function e(a){const r={};return a.integrity&&(r.integrity=a.integrity),a.referrerpolicy&&(r.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?r.credentials="include":a.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(a){if(a.ep)return;a.ep=!0;const r=e(a);fetch(a.href,r)}};Ln();const An=/[a-zA-Z0-9#]\w*/;function Dn(){return{startState:()=>({inAttributes:!1,inString:!1}),token:(i,t)=>{if(i.match(/GRAPH/i,!0))return"def";if(i.match(/{/)||i.match(/}/))return"bracket";if(!t.inAttributes&&i.match(An,!0))return"variable";if(t.inAttributes){if(i.match(/,/))return null;if(i.match(/".*?"/))return"property";if(i.match(/[0-9]/))return"def";if(i.match(/=/,!0))return"atom";if(i.match(/BUNDLE/i)||i.match(/COLOR/i)||i.match(/LABEL/i)||i.match(/LINE-WIDTH/i))return"keyword"}return i.match(/\[/)?(t.inAttributes=!0,null):i.match(/\]/)?(t.inAttributes=!1,null):(i.next(),null)}}}function on(){"arna"in Fe.modes||Fe.defineMode("arna",Dn)}function kn(i){let t,e,n,a,r;return{c(){t=x("button"),e=P(i[0]),b(t,"class",n=`rounded px-2 py-1 mx-1 text-override-fg text-sm font-semibold ${i[2].class}`)},m(s,l){D(s,t,l),g(t,e),a||(r=an(t,"click",function(){bn(i[1])&&i[1].apply(this,arguments)}),a=!0)},p(s,[l]){i=s,l&1&&Ee(e,i[0]),l&4&&n!==(n=`rounded px-2 py-1 mx-1 text-override-fg text-sm font-semibold ${i[2].class}`)&&b(t,"class",n)},i:B,o:B,d(s){s&&k(t),a=!1,r()}}}function Pn(i,t,e){let{label:n}=t,{onClick:a}=t;return i.$$set=r=>{e(2,t=Q(Q({},t),Z(r))),"label"in r&&e(0,n=r.label),"onClick"in r&&e(1,a=r.onClick)},t=Z(t),[n,a,t]}class et extends W{constructor(t){super();j(this,t,Pn,kn,H,{label:0,onClick:1})}}function Tn(i){let t,e,n,a,r,s=i[2]?"\u25BC":"\u25BA",l,u,o,c;return{c(){t=x("div"),e=x("span"),n=P(i[0]),a=T(),r=x("span"),l=P(s),b(e,"class","underline hover:text-override-fg focus:text-override-neutral-200"),b(r,"class","text-override-yellow"),b(t,"class",u=`${i[3].class}`)},m(f,h){D(f,t,h),g(t,e),g(e,n),g(t,a),g(t,r),g(r,l),o||(c=an(t,"click",i[4]),o=!0)},p(f,[h]){h&1&&Ee(n,f[0]),h&4&&s!==(s=f[2]?"\u25BC":"\u25BA")&&Ee(l,s),h&8&&u!==(u=`${f[3].class}`)&&b(t,"class",u)},i:B,o:B,d(f){f&&k(t),o=!1,c()}}}function In(i,t,e){let n,a=B,r=()=>(a(),a=yn(l,o=>e(2,n=o)),l);i.$$.on_destroy.push(()=>a());let{text:s}=t,{show:l}=t;r();const u=()=>{z(l,n=!n,n)};return i.$$set=o=>{e(3,t=Q(Q({},t),Z(o))),"text"in o&&e(0,s=o.text),"show"in o&&r(e(1,l=o.show))},t=Z(t),[s,l,n,t,u]}class Yt extends W{constructor(t){super();j(this,t,In,Tn,H,{text:0,show:1})}}const Xt={purple:"#A21CAF",green:"#22C55E",blue:"#00AFCA",yellow:"#FEC604",red:"#BE123C",fg:"#F7F7F7",bg:"#121212",neutral:{50:"#F7F7F7",100:"#E1E1E1",200:"#CFCFCF",300:"#B1B1B1",400:"#9E9E9E",500:"#7E7E7E",600:"#626262",700:"#515151",800:"#3B3B3B",900:"#222222"}},On={extend:{animation:{"spin-slow":"spin 4s linear infinite"},gridTemplateColumns:{custom:"repeat(auto-fit, minmax(80px, 1fr))"},colors:{override:Xt,cm:Xt}},fontFamily:{sans:["Inter","sans-serif"],mono:"'Source Code Pro', monospace",serif:"'Roboto Slab', serif"}},ae={content:["./index.html","./src/**/*.{svelte,ts}"],theme:On,plugins:[]};class sn{static randomRGBA(t){const e=t||.2,n=[se(ae.theme.extend.colors.override.blue).alpha(e).hex("rgba"),se(ae.theme.extend.colors.override.yellow).alpha(e).hex("rgba"),se(ae.theme.extend.colors.override.red).alpha(e).hex("rgba"),se(ae.theme.extend.colors.override.purple).alpha(e).hex("rgba")],a=Math.floor(Math.random()*n.length);return n[a]}static generate(t){let e="";const n=new Set,a=new Set;return[...Array(t)].forEach(()=>{let r=!1;for(;!r;){const s=Math.floor(Math.random()*(t-2)),l=Math.floor(Math.random()*(t-1)),u=`N${s}--N${l}`;s!==l&&!a.has(u)&&(n.add(s),n.add(l),a.add(u),e+=`${u}  [line-width=3,color="${this.randomRGBA()}"]
`,r=!0)}}),n.forEach((r,s)=>{const l=`label="Node with identifier: N${s}"`,u=`color="${this.randomRGBA(.6)}"`;e=`N${s} [${u},${l}]
${e}`}),e=`graph RandomGraph [bundle] {
${e}`,e+="}",{edgeCount:t,nodeCount:n.size,code:e}}}const Rn=50,ln=sn.generate(Rn);function ne(i,t){const{subscribe:e,update:n}=Oe(t>i.length?0:t);return{subscribe:e,choices:i,set:a=>n(r=>a>i.length?r:a)}}const ye=Oe(ln.code),Wt=Oe(ln),un=Oe(!1),cn=Oe(!0),xe=ne([10,20,30,50,75,100,200],3),Se=ne([300,500,700,900,1100,1500],3),we=ne([2,4,6,8,10,12,16,20,30],4),Me=ne(we.choices,3),Le=ne([.001,.005,.01,.05,.1,.2],3),Ae=ne([.1,.2,.4,.6,.8,.99],0),De=ne([.01,.1,.2,.4,.6,.8,.99],1),ke=ne([.1,.2,.3,.5,.8,.99],0),Pe=ne([2,3,4,5,6],0),Te=ne([40,50,70,90,110,130],3),Ie=ne([.3,.4,.667,.7,.8],3);function Nn(i){let t,e,n,a,r,s,l,u,o,c,f,h,d,p,m,y;return s=new et({props:{onClick:i[1],label:"Random",type:"primary",class:"bg-override-blue hover:bg-override-blue/75 text-override-bg"}}),u=new et({props:{onClick:i[2],label:"Refresh",class:"bg-override-yellow hover:bg-override-yellow/75 text-override-bg"}}),c=new et({props:{onClick:i[3],label:"Submit",class:"bg-override-green hover:bg-override-green/75 text-override-bg"}}),d=new Yt({props:{show:un,text:"syntax help"}}),m=new Yt({props:{show:cn,text:"adjust parameters",class:"ml-2"}}),{c(){t=x("div"),e=x("textarea"),n=T(),a=x("div"),r=x("div"),M(s.$$.fragment),l=T(),M(u.$$.fragment),o=T(),M(c.$$.fragment),f=T(),h=x("div"),M(d.$$.fragment),p=T(),M(m.$$.fragment),b(e,"id","editor"),b(r,"class","flex"),b(h,"class","flex flex-grow mt-2 cursor-pointer text-override-blue text-xs font-semibold"),b(a,"class","flex flex-col items-center pt-2 pb-2"),b(t,"class","w-full h-22")},m(v,S){D(v,t,S),g(t,e),i[4](e),g(t,n),g(t,a),g(a,r),L(s,r,null),g(r,l),L(u,r,null),g(r,o),L(c,r,null),g(a,f),g(a,h),L(d,h,null),g(h,p),L(m,h,null),y=!0},p:B,i(v){y||(_(s.$$.fragment,v),_(u.$$.fragment,v),_(c.$$.fragment,v),_(d.$$.fragment,v),_(m.$$.fragment,v),y=!0)},o(v){$(s.$$.fragment,v),$(u.$$.fragment,v),$(c.$$.fragment,v),$(d.$$.fragment,v),$(m.$$.fragment,v),y=!1},d(v){v&&k(t),i[4](null),A(s),A(u),A(c),A(d),A(m)}}}function Gn(i,t,e){let n,a,r;R(i,ye,h=>e(6,n=h)),R(i,Wt,h=>e(7,a=h)),R(i,xe,h=>e(8,r=h));let s,l;const u=()=>{const h=xe.choices[r],d=sn.generate(h);z(ye,n=d.code,n),z(Wt,a=d,a)},o=()=>{const h=n;z(ye,n=void 0,n),z(ye,n=h,n)},c=()=>{z(ye,n=l.getValue(),n)};Re(()=>{on(),l=Fe.fromTextArea(s,{theme:"midnight",mode:"arna",value:n,lineNumbers:!0,tabSize:2});try{const h=document.getElementsByClassName("CodeMirror").item(0);h.classList.add("!font-mono"),h.classList.add("!text-sm"),h.classList.add("!font-semibold")}catch{console.warn("Failed to changed editor font. Unable to retrieve CodeMirror editor element.")}}),_n(()=>{l.getValue()!==n&&l.setValue(n)});function f(h){Ce[h?"unshift":"push"](()=>{s=h,e(0,s)})}return[s,u,o,c,f]}class Bn extends W{constructor(t){super();j(this,t,Gn,Nn,H,{})}}var oe={},st={};(function(i){i.__esModule=!0,i.ArnaLexer=i.languageTokens=void 0;var t=rn,e=t.createToken,n=t.Lexer,a=e({name:"WhiteSpace",pattern:/\s+/,group:t.Lexer.SKIPPED}),r=e({name:"Identifier",pattern:/[a-zA-Z0-9#]\w*/}),s=e({name:"Graph",pattern:/GRAPH/i,longer_alt:r}),l=e({name:"Bundle",pattern:/BUNDLE/i,longer_alt:r}),u=e({name:"Color",pattern:/COLOR/i,longer_alt:r}),o=e({name:"Label",pattern:/LABEL/i,longer_alt:r}),c=e({name:"LineWidth",pattern:/LINE-WIDTH/i,longer_alt:r}),f=e({name:"FontSize",pattern:/FONT-SIZE/i,longer_alt:r}),h=e({name:"Font",pattern:/PLONT/i,longer_alt:r}),d=e({name:"EdgeUndirected",pattern:/--/}),p=e({name:"EdgeDirected",pattern:/->/}),m=e({name:"OpenBracket",pattern:/\[/}),y=e({name:"CloseBracket",pattern:/\]/}),v=e({name:"Equal",pattern:/=/}),S=e({name:"Comma",pattern:/,/}),C=e({name:"DoubleQuotedString",pattern:/".*?"/}),G=e({name:"OpenCurlyBrace",pattern:/{/}),Y=e({name:"CloseCurlyBrace",pattern:/}/}),U=e({name:"Variable",pattern:/[a-zA-Z]+/}),ie=e({name:"SingleLineComment",pattern:/\/\/.+/,group:"comments"});i.languageTokens={WhiteSpace:a,Color:u,Label:o,LineWidth:c,FontSize:f,Font:h,Bundle:l,Graph:s,Identifier:r,EdgeUndirected:d,EdgeDirected:p,Equal:v,Comma:S,DoubleQuotedString:C,OpenBracket:m,CloseBracket:y,OpenCurlyBrace:G,CloseCurlyBrace:Y,SingleLineComment:ie,Variable:U};var K=new n(Object.values(i.languageTokens));i.ArnaLexer={languageTokens:i.languageTokens,tokenize:function(E){var J=K.tokenize(E);return J.errors.length>0&&console.error("Lexing errors detected."),J}}})(st);var _e={},Un=F&&F.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(n[r]=a[r])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();_e.__esModule=!0;_e.ArnaParser=_e.ArnaCstParser=void 0;var Vn=rn,O=st,fn=function(i){Un(t,i);function t(){var e=i.call(this,O.languageTokens)||this;return e.bundleKeyValue=e.RULE("bundleKeyValue",function(){e.CONSUME(O.languageTokens.Bundle)}),e.colorKeyValue=e.RULE("colorKeyValue",function(){e.CONSUME(O.languageTokens.Color),e.CONSUME(O.languageTokens.Equal),e.OR([{ALT:function(){return e.CONSUME(O.languageTokens.DoubleQuotedString)}},{ALT:function(){return e.CONSUME(O.languageTokens.Identifier)}}])}),e.labelKeyValue=e.RULE("labelKeyValue",function(){e.CONSUME(O.languageTokens.Label),e.CONSUME(O.languageTokens.Equal),e.CONSUME(O.languageTokens.DoubleQuotedString)}),e.lineWidthKeyValue=e.RULE("lineWidthKeyValue",function(){e.CONSUME(O.languageTokens.LineWidth),e.CONSUME(O.languageTokens.Equal),e.CONSUME(O.languageTokens.Identifier)}),e.fontKeyValue=e.RULE("fontKeyValue",function(){e.CONSUME(O.languageTokens.Font),e.CONSUME(O.languageTokens.Equal),e.CONSUME(O.languageTokens.DoubleQuotedString)}),e.fontSizeKeyValue=e.RULE("fontSizeKeyValue",function(){e.CONSUME(O.languageTokens.FontSize),e.CONSUME(O.languageTokens.Equal),e.CONSUME(O.languageTokens.DoubleQuotedString)}),e.keyValuePair=e.RULE("keyValuePair",function(){e.OR([{ALT:function(){return e.SUBRULE(e.bundleKeyValue)}},{ALT:function(){return e.SUBRULE(e.colorKeyValue)}},{ALT:function(){return e.SUBRULE(e.labelKeyValue)}},{ALT:function(){return e.SUBRULE(e.lineWidthKeyValue)}},{ALT:function(){return e.SUBRULE(e.fontKeyValue)}},{ALT:function(){return e.SUBRULE(e.fontSizeKeyValue)}}])}),e.attribute=e.RULE("attribute",function(){e.CONSUME(O.languageTokens.OpenBracket),e.OPTION(function(){e.MANY_SEP({SEP:O.languageTokens.Comma,DEF:function(){e.SUBRULE(e.keyValuePair)}})}),e.CONSUME(O.languageTokens.CloseBracket)}),e.nodeDeclaration=e.RULE("nodeDeclaration",function(){e.CONSUME(O.languageTokens.Identifier),e.OPTION2(function(){e.SUBRULE(e.attribute)})}),e.edgeDeclaration=e.RULE("edgeDeclaration",function(){e.CONSUME(O.languageTokens.Identifier),e.OR([{ALT:function(){return e.CONSUME(O.languageTokens.EdgeUndirected)}},{ALT:function(){return e.CONSUME2(O.languageTokens.EdgeDirected)}}]),e.CONSUME2(O.languageTokens.Identifier),e.OPTION2(function(){e.SUBRULE(e.attribute)})}),e.document=e.RULE("document",function(){e.CONSUME(O.languageTokens.Graph),e.CONSUME(O.languageTokens.Identifier),e.OPTION1(function(){e.SUBRULE(e.attribute)}),e.CONSUME(O.languageTokens.OpenCurlyBrace),e.OPTION2(function(){e.MANY(function(){e.OR([{ALT:function(){return e.SUBRULE(e.edgeDeclaration)}},{ALT:function(){return e.SUBRULE(e.nodeDeclaration)}}])})}),e.CONSUME(O.languageTokens.CloseCurlyBrace)}),e.performSelfAnalysis(),e}return t}(Vn.CstParser);_e.ArnaCstParser=fn;_e.ArnaParser=new fn;var re={},dn={},hn={},lt={};(function(i){i.__esModule=!0;var t=function(){function e(){}return e.vectorDotProduct=function(n,a){return n.x*a.x+n.y+a.y},e.edgeToVector=function(n,a){return{x:a.x-n.x,y:a.y-n.y}},e.edgeLength=function(n,a,r){return Math.abs(n.x-a.x)<r&&Math.abs(n.y-a.y)<r?r:Math.sqrt(Math.pow(n.x-a.x,2)+Math.pow(n.y-a.y,2))},e.edgeMidpoint=function(n,a){return{x:(n.x+a.x)/2,y:(n.y+a.y)/2}},e.euclideanDistance=function(n,a){return Math.sqrt(Math.pow(n.x-a.x,2)+Math.pow(n.y-a.y,2))},e.dividedEdgeLength=function(n){return n.reduce(function(a,r,s){return s===0?0:a+e.euclideanDistance(n[s],n[s-1])},0)},e.projectPointOnLine=function(n,a,r){var s=Math.sqrt(Math.pow(r.x-a.x,2)+Math.pow(r.y-a.y,2)),l=((a.y-n.y)*(a.y-r.y)-(a.x-n.x)*(r.x-a.x))/Math.pow(s,2);return{x:a.x+l*(r.x-a.x),y:a.y+l*(r.y-a.y)}},e}();i.default=t})(lt);var pn={};(function(i){i.__esModule=!0;var t=lt,e=function(){function n(){}return n.applySpringForce=function(a,r,s){var l=a[r-1],u=a[r+1],o=a[r];return{x:s*(l.x-o.x+u.x-o.x),y:s*(l.y-o.y+u.y-o.y)}},n.applyElectrostaticForce=function(a,r,s,l,u){return r[s].reduce(function(o,c){var f={x:a[c][l].x-a[s][l].x,y:a[c][l].y-a[s][l].y};if(Math.abs(f.x)>u||Math.abs(f.y)>u){var h=a[c][l],d=a[s][l],p=1/t.default.edgeLength(h,d,-1/0);return{x:o.x+f.x*p,y:o.y+f.y*p}}return{x:o.x,y:o.y}},{x:0,y:0})},n.applyForcesOnEdgeSubdivisionPoints=function(a,r,s,l,u,o,c,f){for(var h=a[u],d=f.bundlingStiffness/(t.default.edgeLength(r[h.tail],r[h.head],f.error)*(o+1)),p=[{x:0,y:0}],m=1;m<o+1;m++){var y={x:0,y:0},v=n.applySpringForce(s[u],m,d),S=n.applyElectrostaticForce(s,l,u,m,c);y.x=c*(v.x+S.x),y.y=c*(v.y+S.y),p.push(y)}return p.push({x:0,y:0}),p},n}();i.default=e})(pn);(function(i){var t=F&&F.__assign||function(){return t=Object.assign||function(l){for(var u,o=1,c=arguments.length;o<c;o++){u=arguments[o];for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(l[f]=u[f])}return l},t.apply(this,arguments)},e=F&&F.__spreadArray||function(l,u,o){if(o||arguments.length===2)for(var c=0,f=u.length,h;c<f;c++)(h||!(c in u))&&(h||(h=Array.prototype.slice.call(u,0,c)),h[c]=u[c]);return l.concat(h||Array.prototype.slice.call(u))};i.__esModule=!0;var n=lt,a=pn,r={bundlingStiffness:.1,initialStepSize:.1,initialSubdivision:1,subdivisionRate:2,cycleCount:6,initialIterationCount:90,iterationDecreaseRate:2/3,compatabilityThreshold:.6,error:1e-6},s=function(){function l(u,o,c){this.edgeSubdivisionPoints=[],this.edgeCompatabilityList=[],this.nodeData=u,this.edgeData=o,this.parameters=r,c!==void 0&&(this.parameters=t(t({},r),c)),this.filterInvalidEdges()}return l.prototype.initEdgeSubdivisionPoints=function(){var u=this;this.edgeData.forEach(function(o,c){u.parameters.initialSubdivision===1?u.edgeSubdivisionPoints[c]=[]:(u.edgeSubdivisionPoints[c]=[],u.edgeSubdivisionPoints[c].push(u.nodeData[o.tail]),u.edgeSubdivisionPoints[c].push(u.nodeData[o.head]))})},l.prototype.initEdgeCompatabilityList=function(){var u=this;this.edgeData.forEach(function(o,c){u.edgeCompatabilityList[c]=[]})},l.prototype.filterInvalidEdges=function(){var u=this;return this.edgeData.filter(function(o){return u.nodeData[o.tail].x!==u.nodeData[o.head].x||u.nodeData[o.tail].y!==u.nodeData[o.head].y})},l.prototype.updateEdgeSubdivisions=function(u){var o=this;this.edgeData.forEach(function(c,f){if(u===1)o.edgeSubdivisionPoints[f].push(o.nodeData[c.tail]),o.edgeSubdivisionPoints[f].push(n.default.edgeMidpoint(o.nodeData[c.tail],o.nodeData[c.head])),o.edgeSubdivisionPoints[f].push(o.nodeData[c.head]);else{for(var h=n.default.dividedEdgeLength(o.edgeSubdivisionPoints[f]),d=h/(u+1),p=[o.nodeData[c.tail]],m=d,y=o.edgeSubdivisionPoints[f],v=1;v<y.length;v++){for(var S=y[v],C=n.default.euclideanDistance(S,o.edgeSubdivisionPoints[f][v-1]);C>m;){var G=m/C,Y=o.edgeSubdivisionPoints[f][v-1],U={x:Y.x+G*(S.x-Y.x),y:Y.y+G*(S.y-Y.y)};p.push(U),C-=m,m=d}m-=C}p.push(o.nodeData[o.edgeData[f].head]),o.edgeSubdivisionPoints[f]=p}})},l.prototype.angleCompatibility=function(u,o){var c=this.nodeData[u.tail],f=this.nodeData[u.head],h=this.nodeData[o.tail],d=this.nodeData[o.head],p=this.parameters.error,m=n.default.edgeLength(c,f,p)*n.default.edgeLength(h,d,p),y=n.default.vectorDotProduct(n.default.edgeToVector(c,f),n.default.edgeToVector(h,d));return Math.abs(y/m)},l.prototype.scaleCompatability=function(u,o){var c=this.nodeData[u.tail],f=this.nodeData[u.head],h=this.nodeData[o.tail],d=this.nodeData[o.head],p=this.parameters.error,m=n.default.edgeLength(c,f,p),y=n.default.edgeLength(h,d,p),v=(m+y)/2;return 2/(v/Math.min(m,y)+Math.max(m,y)/v)},l.prototype.positionCompatibility=function(u,o){var c=this.nodeData[u.tail],f=this.nodeData[u.head],h=this.nodeData[o.tail],d=this.nodeData[o.head],p=this.parameters.error,m=n.default.edgeLength(c,f,p),y=n.default.edgeLength(h,d,p),v=(m+y)/2,S=n.default.edgeMidpoint(c,f),C=n.default.edgeMidpoint(h,d),G=n.default.euclideanDistance(S,C);return v/(v+G)},l.prototype.edgeVisibility=function(u,o){var c=this.nodeData[u.tail],f=this.nodeData[u.head],h=this.nodeData[o.tail],d=this.nodeData[o.head],p=n.default.projectPointOnLine(h,c,f),m=n.default.projectPointOnLine(d,c,f),y=n.default.edgeMidpoint(p,m),v=n.default.edgeMidpoint(c,f),S=n.default.euclideanDistance(v,y),C=n.default.euclideanDistance(p,m);return Math.max(0,1-2*S/C)},l.prototype.visibilityCompatibility=function(u,o){return Math.min(this.edgeVisibility(u,o),this.edgeVisibility(o,u))},l.prototype.compatibilityScore=function(u,o){return this.angleCompatibility(u,o)*this.scaleCompatability(u,o)*this.positionCompatibility(u,o)*this.visibilityCompatibility(u,o)},l.prototype.isCompatible=function(u,o){return this.compatibilityScore(u,o)>=this.parameters.compatabilityThreshold},l.prototype.updateCompatibilityList=function(){for(var u=0;u<this.edgeData.length-1;u++)for(var o=u+1;o<this.edgeData.length;o++)this.isCompatible(this.edgeData[u],this.edgeData[o])&&(this.edgeCompatabilityList[u].push(o),this.edgeCompatabilityList[o].push(u))},l.prototype.bundle=function(){var u=this,o=this.parameters.initialStepSize,c=this.parameters.initialIterationCount,f=this.parameters.initialSubdivision;return this.initEdgeSubdivisionPoints(),this.initEdgeCompatabilityList(),this.updateEdgeSubdivisions(f),this.updateCompatibilityList(),e([],Array(this.parameters.cycleCount),!0).forEach(function(){e([],Array(Math.round(c)),!0).forEach(function(){var h=u.edgeData.map(function(d,p){return a.default.applyForcesOnEdgeSubdivisionPoints(u.edgeData,u.nodeData,u.edgeSubdivisionPoints,u.edgeCompatabilityList,p,f,o,u.parameters)});u.edgeData.forEach(function(d,p){e([],Array(f+1),!0).forEach(function(m,y){var v=h[p][y].x,S=h[p][y].y;u.edgeSubdivisionPoints[p][y].x+=v,u.edgeSubdivisionPoints[p][y].y+=S})})}),o/=2,f*=u.parameters.subdivisionRate,c*=u.parameters.iterationDecreaseRate,u.updateEdgeSubdivisions(f)}),this.edgeSubdivisionPoints},l}();i.default=s})(hn);(function(i){i.__esModule=!0;var t=hn;i.default=t.default})(dn);var $e={},We=F&&F.__assign||function(){return We=Object.assign||function(i){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(i[a]=t[a])}return i},We.apply(this,arguments)};$e.__esModule=!0;$e.ConcreteSyntaxTree=$e.Graph=void 0;var zn=500,Fn=6,Yn=2,Xn=.01,Wn=.5,jt={bundle:!1,maxTicks:zn,maxRepulsiveDistance:Fn,optimalDistance:Yn,c:Xn,maxVertexDisplacement:Wn},jn=function(){function i(t,e,n){this.nodes=t,this.edges=e,this.parameters=jt,n!==void 0&&(this.parameters=i.buildParameters(n))}return i.buildParameters=function(t){return We(We({},jt),t)},i}();$e.Graph=jn;var Hn=function(){function i(t){this.rootNode=t}return i}();$e.ConcreteSyntaxTree=Hn;var Kn=F&&F.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(n[r]=a[r])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();re.__esModule=!0;re.ArnaGraph=re.ArnaEdge=re.ArnaNode=void 0;var qn=dn,Qn=$e,Zn=function(){function i(t,e,n,a){this.identifier=t,this.positionX=i.getRandomFloatBounded(-1*e,n),this.positionY=i.getRandomFloatBounded(-1*e,n),this.forceX=0,this.forceY=0,this.options=a}return i.getRandomFloatBounded=function(t,e){return Math.random()*(t-e)+e},i}();re.ArnaNode=Zn;var Jn=function(){function i(t,e,n){this.tail=t,this.head=e,this.attraction=1,this.options=n}return i}();re.ArnaEdge=Jn;var ea=function(i){Kn(t,i);function t(e,n,a){var r=i.call(this,e,n,a)||this;return r.xLayoutMin=1/0,r.xLayoutMax=-1/0,r.yLayoutMin=1/0,r.yLayoutMax=-1/0,r}return t.prototype.setEdgeSubdivisions=function(e){this.edgeSubdivisions=e},t.prototype.calculateRepulsion=function(){var e=this,n=[];this.nodes.forEach(function(a){n.forEach(function(r){if(!(!a||!r)){var s=r.positionX-a.positionX,l=r.positionY-a.positionY,u=Math.pow(s,2)+Math.pow(l,2);u<.01&&(s=.1*Math.random()+.1,l=.1*Math.random()+.1,u=Math.pow(s,2)+Math.pow(l,2));var o=Math.sqrt(u);if(o<e.parameters.maxRepulsiveDistance){var c=Math.pow(e.parameters.optimalDistance,2)/o;r.forceX+=c*s/o,r.forceY+=c*l/o,a.forceX-=c*s/o,a.forceY-=c*l/o}}}),n.push(a)})},t.prototype.calculateAttraction=function(){var e=this;this.edges.forEach(function(n){var a=n.tail,r=n.head,s=r.positionX-a.positionX,l=r.positionY-a.positionY,u=Math.pow(s,2)+Math.pow(l,2);u<.01&&(s=.1*Math.random()+.1,l=.1*Math.random()+.1,u=Math.pow(s,2)+Math.pow(l,2));var o=Math.sqrt(u);o>e.parameters.maxRepulsiveDistance&&(o=e.parameters.maxRepulsiveDistance,u=Math.pow(o,2));var c=(u-Math.pow(e.parameters.optimalDistance,2))/e.parameters.optimalDistance;n.attraction||(n.attraction=1),c*=Math.log(n.attraction)*.5+1,r.forceX-=c*s/o,r.forceY-=c*l/o,a.forceX+=c*s/o,a.forceY+=c*l/o})},t.prototype.bundleEdges=function(e){var n={};this.nodes.forEach(function(l){n[l.identifier]={x:l.positionX,y:l.positionY}});var a=this.edges.map(function(l){return{tail:l.tail.identifier,head:l.head.identifier}}),r=new qn.default(n,a,e),s=r.bundle();this.setEdgeSubdivisions(s)},t.prototype.nodeMappings=function(){var e=this,n={};return this.edges.forEach(function(a,r){var s=a.tail,l=a.head,u=e.edgeSubdivisions&&e.parameters.bundle?e.edgeSubdivisions[r]:[];u.length<0&&u.push({x:s.positionX,y:s.positionY},{x:l.positionX,y:l.positionY});var o={tail:a.tail,head:a.head,edge:u,edgeOptions:a.options};s.identifier in n?n[s.identifier].push(o):n[s.identifier]=[o],l.identifier in n?n[l.identifier].push({tail:a.head,head:a.tail,edge:u,edgeOptions:a.options}):n[l.identifier]=[{tail:a.head,head:a.tail,edge:u,edgeOptions:a.options}]}),n},t.prototype.commitChanges=function(){var e=this,n=this.parameters.c,a=this.parameters.maxVertexDisplacement;this.nodes.forEach(function(r){var s=n*r.forceX,l=n*r.forceY;s>a&&(s=a),s<-1*a&&(s=-1*a),l>a&&(l=a),l<-1*a&&(l=-1*a),r.positionX+=s,r.positionY+=l,e.xLayoutMin=r.positionX<e.xLayoutMin?r.positionX:e.xLayoutMin,e.xLayoutMax=r.positionX>e.xLayoutMax?r.positionX:e.xLayoutMax,e.yLayoutMin=r.positionY<e.yLayoutMin?r.positionY:e.yLayoutMin,e.yLayoutMax=r.positionY>e.yLayoutMax?r.positionY:e.yLayoutMax,r.forceX=0,r.forceY=0})},t.prototype.tick=function(){this.calculateRepulsion(),this.calculateAttraction(),this.commitChanges()},t.prototype.computeLayout=function(){for(var e=0;e<this.parameters.maxTicks;e++)this.tick()},t}(Qn.Graph);re.ArnaGraph=ea;var je={},ta=F&&F.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(n[r]=a[r])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();je.__esModule=!0;je.ArnaAstVisitor=void 0;var na=_e,aa=na.ArnaParser.getBaseCstVisitorConstructor(),ra=function(i){ta(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.bundleKeyValue=function(e,n){return{bundle:!0}},t.prototype.colorKeyValue=function(e,n){if(e.DoubleQuotedString!==void 0)return{color:e.DoubleQuotedString[0].image.slice(1,-1)};if(e.Identifier!==void 0)return{color:e.Identifier[0].image}},t.prototype.labelKeyValue=function(e,n){return{label:e.DoubleQuotedString[0].image.slice(1,-1)}},t.prototype.lineWidthKeyValue=function(e,n){return{lineWidth:e.Identifier[0].image}},t.prototype.fontKeyValue=function(e,n){return{font:e.DoubleQuotedString[0].image.slice(1,-1)}},t.prototype.fontSizeKeyValue=function(e,n){return{fontSize:e.DoubleQuotedString[0].image.slice(1,-1)}},t.prototype.keyValuePair=function(e,n){var a=this;return{type:"KEY_VALUE_PAIR",children:Object.values(e).map(function(r){return a.visit(r)})}},t.prototype.attribute=function(e,n){var a=this,r=e!=null&&e.keyValuePair?e.keyValuePair.map(function(l){return a.visit(l)}):[],s=r.map(function(l){return l.children[0]}).reduce(function(l,u){return Object.assign(l,u)},{});return{type:"ATTRIBUTES",keyValuePairs:s}},t.prototype.nodeDeclaration=function(e,n){var a=e!=null&&e.attribute?this.visit(e.attribute[0]):void 0;return{type:"NODE_DECLARATION",identifier:e.Identifier[0].image,attributes:a}},t.prototype.edgeDeclaration=function(e,n){var a=e!=null&&e.attribute?this.visit(e.attribute[0]):void 0;return{type:"EDGE_DECLARATION",directed:!!(e!=null&&e.EdgeDirected),tail:e.Identifier[0].image,head:e.Identifier[1].image,attributes:a}},t.prototype.document=function(e,n){var a=this,r=e!=null&&e.nodeDeclaration?e.nodeDeclaration.map(function(o){return a.visit(o)}):[],s=e!=null&&e.edgeDeclaration?e.edgeDeclaration.map(function(o){return a.visit(o)}):[],l=e!=null&&e.attribute?this.visit(e.attribute):!1,u=l!=null&&l.keyValuePairs?{keyValuePairs:l.keyValuePairs}:{keyValuePairs:{}};return{type:"DOCUMENT",graphType:e.Graph[0].image,graphName:e.Identifier[0].image,graphAttributes:u,nodeDeclarations:r,edgeDeclarations:s}},t}(aa);je.ArnaAstVisitor=new ra;var He={};He.__esModule=!0;He.GraphSemanticAnalyzer=void 0;var tt=re,ia=$e,oa=function(){function i(t){this.graphParameters=ia.Graph.buildParameters(t)}return i.prototype.buildNode=function(t){var e,n=((e=t.attributes)===null||e===void 0?void 0:e.keyValuePairs)||{};return new tt.ArnaNode(t.identifier,this.graphParameters.maxRepulsiveDistance,this.graphParameters.maxVertexDisplacement,n)},i.prototype.buildEdge=function(t,e,n){var a,r=((a=n.attributes)===null||a===void 0?void 0:a.keyValuePairs)||{};return new tt.ArnaEdge(t,e,r)},i.prototype.buildGraph=function(t,e){var n=this,a=new Map;t.forEach(function(o){var c;if(!a.has(o.identifier)){var f=n.buildNode(o);f.options.label=((c=o.attributes)===null||c===void 0?void 0:c.keyValuePairs.label)||void 0,a.set(o.identifier,f)}});var r=Array.from(a.values()),s=new Set,l=e.filter(function(o){var c="".concat(o.tail,"--").concat(o.head);return c in s?!1:(s.add(c),!0)}),u=l.map(function(o){var c=a.get(o.tail),f=a.get(o.head);if(c===void 0)throw new Error("Invalid edge declaration. No node with identifier ".concat(o.tail," found."));if(f===void 0)throw new Error("Invalid edge declaration. No node with identifier ".concat(o.head," found."));return n.buildEdge(c,f,o)});return new tt.ArnaGraph(r,u,this.graphParameters)},i.prototype.analyze=function(t){var e;this.graphParameters.bundle=((e=t.graphAttributes.keyValuePairs)===null||e===void 0?void 0:e.bundle)||!1;var n=this.buildGraph(t.nodeDeclarations,t.edgeDeclarations);return n.computeLayout(),n},i}();He.GraphSemanticAnalyzer=oa;(function(i){var t=F&&F.__createBinding||(Object.create?function(l,u,o,c){c===void 0&&(c=o);var f=Object.getOwnPropertyDescriptor(u,o);(!f||("get"in f?!u.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return u[o]}}),Object.defineProperty(l,c,f)}:function(l,u,o,c){c===void 0&&(c=o),l[c]=u[o]});i.__esModule=!0,i.ArnaAstSemanticAnalyzer=i.ArnaAstVisitor=i.ArnaGraph=i.ArnaParser=i.ArnaLexer=void 0;var e=st;t(i,e,"ArnaLexer");var n=_e;t(i,n,"ArnaParser");var a=re;t(i,a,"ArnaGraph");var r=je;t(i,r,"ArnaAstVisitor");var s=He;t(i,s,"GraphSemanticAnalyzer","ArnaAstSemanticAnalyzer")})(oe);var gn={},Ke={},Ne={};Ne.__esModule=!0;Ne.ArnaPreRenderer=void 0;var sa=function(){function i(t,e,n){this.RADIUS=12,this.graph=t,this.width=e,this.height=n,this.xScale=(this.width-2*this.RADIUS)/(this.graph.xLayoutMax-this.graph.xLayoutMin),this.yScale=(this.height-2*this.RADIUS)/(this.graph.yLayoutMax-this.graph.yLayoutMin)}return i.prototype.translate=function(t,e){return{x:Math.round((t-this.graph.xLayoutMin)*this.xScale+this.RADIUS),y:Math.round((e-this.graph.yLayoutMin)*this.yScale+this.RADIUS)}},i.prototype.centerGraph=function(){var t=1/0,e=-1/0,n=1/0,a=-1/0,r=Math.round(this.width/2)-Math.round((this.graph.xLayoutMin+this.graph.xLayoutMax)/2),s=Math.round(this.height/2)-Math.round((this.graph.yLayoutMin+this.graph.yLayoutMax)/2);this.graph.nodes.forEach(function(l){l.positionX+=r,l.positionY+=s,t=l.positionX<t?l.positionX:t,e=l.positionX>e?l.positionX:e,n=l.positionY<n?l.positionY:n,a=l.positionY>a?l.positionY:a}),this.graph.xLayoutMin=t,this.graph.xLayoutMax=e,this.graph.yLayoutMin=n,this.graph.yLayoutMax=a},i.prototype.translateNodePositions=function(){var t=this,e=1/0,n=-1/0,a=1/0,r=-1/0;this.graph.nodes.forEach(function(s){var l=t.translate(s.positionX,s.positionY);s.positionX=l.x,s.positionY=l.y,e=s.positionX<e?s.positionX:e,n=s.positionX>n?s.positionX:n,a=s.positionY<a?s.positionY:a,r=s.positionY>r?s.positionY:r}),this.graph.xLayoutMin=e,this.graph.xLayoutMax=n,this.graph.yLayoutMin=a,this.graph.yLayoutMax=r},i.prototype.runCalculations=function(t){return this.translateNodePositions(),this.centerGraph(),this.graph.parameters.bundle&&this.graph.bundleEdges(t||{}),{radius:this.RADIUS}},i}();Ne.ArnaPreRenderer=sa;Ke.__esModule=!0;Ke.ArnaRenderer=void 0;var la=Ne,ua=function(){function i(t){this.canvas=t}return i.prototype.prerender=function(t){var e=new la.ArnaPreRenderer(t,this.canvas.getCanvasWidth(),this.canvas.getCanvasHeight());return e.runCalculations()},i.prototype.drawBundledEdges=function(t){var e=this,n=t.edgeSubdivisions||[];n.forEach(function(a,r){var s=t.edges[r].options;e.canvas.drawLineGroup(a,s)})},i.prototype.drawNodes=function(t,e){var n=this;t.nodes.forEach(function(a){n.canvas.drawCircle(a.positionX,a.positionY,e.radius,a.options)})},i.prototype.draw=function(t){var e=this,n,a=this.prerender(t),r=new Set,s=new Set,l=t.parameters.bundle&&t.edgeSubdivisions?t.edgeSubdivisions:[];l.forEach(function(u,o){var c=u.map(function(f){return{x:Math.round(f.x),y:Math.round(f.y)}});e.canvas.drawLineGroup(c,t.edges[o].options)}),t.parameters.bundle&&(this.drawBundledEdges(t),this.drawNodes(t,a)),t.parameters.bundle||t.edges.forEach(function(u){var o=u.tail,c=u.head;r.has(o.identifier)||(e.canvas.drawCircle(o.positionX,o.positionY,a.radius,o.options),r.add(o.identifier)),r.has(c.identifier)||(e.canvas.drawCircle(c.positionX,c.positionY,a.radius,c.options),r.add(c.identifier));var f="".concat(o.identifier,"-").concat(c.identifier);if(!t.parameters.bundle&&!s.has(f)){var h=Ht(c.positionX,c.positionY,o.positionX,o.positionY,a.radius),d=Ht(o.positionX,o.positionY,c.positionX,c.positionY,a.radius);e.canvas.drawLine(d.x,d.y,h.x,h.y,u.options),s.add(f)}}),!((n=this.canvas)===null||n===void 0)&&n.finalize&&this.canvas.finalize()},i}();Ke.ArnaRenderer=ua;function Ht(i,t,e,n,a){var r=a/Math.sqrt(Math.pow(e-i,2)+Math.pow(n-t,2)),s=i+r*(e-i),l=t+r*(n-t);return{x:Math.round(s),y:Math.round(l)}}(function(i){var t=F&&F.__createBinding||(Object.create?function(a,r,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(r,s);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[s]}}),Object.defineProperty(a,l,u)}:function(a,r,s,l){l===void 0&&(l=s),a[l]=r[s]});i.__esModule=!0,i.ArnaPreRenderer=i.ArnaRenderer=void 0;var e=Ke;t(i,e,"ArnaRenderer");var n=Ne;t(i,n,"ArnaPreRenderer")})(gn);class ca{constructor(t,e,n,a){V(this,"graph");V(this,"stage");V(this,"mainLayer");V(this,"staticGroup");V(this,"infoGroup");V(this,"infoText");V(this,"infoToggle");V(this,"labels");V(this,"transformer");V(this,"stageConfig");V(this,"bgColor");V(this,"prerenderer");V(this,"bundlerParameters");V(this,"graphLayoutParameters");V(this,"renderParameters");V(this,"nodeMappings");this.graph=t,this.stageConfig=e,this.stage=new N.Stage(this.stageConfig),this.mainLayer=new N.Layer,this.staticGroup=new N.Group,this.transformer=new N.Transformer,this.labels=new Map,this.bgColor=ae.theme.extend.colors.override.bg,this.graphLayoutParameters=a,this.bundlerParameters=n,this.prerenderer=new gn.ArnaPreRenderer(this.graph,this.getCanvasWidth(),this.getCanvasHeight()),this.renderParameters=this.prerenderer.runCalculations(this.bundlerParameters),this.nodeMappings=this.graph.nodeMappings(),this.infoToggle=new N.Group,this.infoGroup=new N.Group,this.infoText=new N.Text,this.initInfoText()}getCanvasWidth(){return this.stage.width()}getCanvasHeight(){return this.stage.width()}initInfoText(){const t=this.graph.edges.length;let n=[`Node Count: ${this.graph.nodes.length}`,`Edge Count: ${t}`,`Layout Iterations: ${this.graphLayoutParameters.maxTicks}`,`Force Coefficient (C): ${this.graphLayoutParameters.c}`,`Max Repulsive Force Distance: ${this.graphLayoutParameters.maxRepulsiveDistance}`,`Optimal Node Distance: ${this.graphLayoutParameters.optimalDistance}`];this.graphLayoutParameters.bundle&&(n=n.concat(n,[`Compatability Threshold: ${this.bundlerParameters.compatabilityThreshold}`,`Initial Step Size: ${this.bundlerParameters.initialStepSize}`,`Bundling Stiffness: ${this.bundlerParameters.bundlingStiffness}`,`Initial Subdivision Rate: ${this.bundlerParameters.subdivisionRate}`,`Initial Bundling Iterations: ${this.bundlerParameters.initialIterationCount}`,`Bundling Iteration Depreciation: ${this.bundlerParameters.iterationDecreaseRate}`]));const a=this.stageConfig.container.offsetWidth,r=n.map(u=>new N.Text({text:u,fontSize:12,fontFamily:ae.theme.fontFamily.mono,fill:ae.theme.extend.colors.override.fg}));let s=-1/0;r.forEach(u=>{const o=u.textWidth;s=o>s?o:s}),r.forEach((u,o)=>{u.x(a-s),u.y(20*(2+o))});const l=new N.Text({x:a-s,y:20,text:"Click to show parameters \u2BC8",fontSize:12,fontFamily:ae.theme.fontFamily.mono,fill:ae.theme.extend.colors.override.blue});l.on("click",()=>{this.infoGroup.visible(!this.infoGroup.visible());const u=this.infoGroup.visible()?"Click to hide parameters \u2BC6":"Click to show parameters \u2BC8";l.text(u)}),this.infoToggle.add(l),this.infoGroup.add(...r),this.infoGroup.visible(!1),this.infoGroup.listening(!1)}circle(t,e,n,a){const r=new N.Group,s=new N.Circle({x:t,y:e,radius:n,fill:a==null?void 0:a.color,hitStrokeWidth:n+10}),l=new N.Circle({x:t,y:e,radius:n,fill:this.bgColor,hitStrokeWidth:n+10});return r.add(l),r.add(s),r}lineGroup(t,e){const n=new N.Group;for(let a=0;a<t.length-1;a++){const r=t[a],s=t[a+1];let l=2;try{l=e!=null&&e.lineWidth?+e.lineWidth:2}catch{}const u=new N.Line({points:[r.x,r.y,s.x,s.y],stroke:(e==null?void 0:e.color)||"#eeeeee",strokeWidth:l});n.add(u)}return n}positionLabel(t,e,n,a){const r=n.height(),s=n.width(),l=t,u=e;a.width(s+20),a.height(r+10),a.x(l),a.y(u),n.x(l+10),n.y(u+5)}label(t,e,n){const{radius:a}=this.renderParameters,r=n-a-20,s=new N.Text({y:n-a-20,text:t,fontSize:12,fontStyle:"bold",fontFamily:"Inter, sans-serif",fill:"#eeeeee",align:"center"}),{textWidth:l}=s;let u=e-l/2;u+l>this.getCanvasWidth()&&(u-=u+l+12-this.getCanvasWidth()),u<0&&(u=0);let o=r;r<0&&(o=n+a+20),s.x(u),s.y(o);const c=new N.Rect({x:u-10,y:o-5,stroke:se(this.bgColor).darken(.2).hex(),strokeWidth:2,fill:this.bgColor,width:l+20,height:s.height()+10}),f=new N.Group;return f.add(c),f.add(s),f}registerHighlightEvent(t,e,n){const a=this.labels.get(t),r=e.children[1];e.addEventListener("mouseenter touchstart",()=>{const s=this.staticGroup.getRelativePointerPosition(),l=a.children[0],u=a.children[1];this.positionLabel(s.x,s.y,u,l),a.visible(!0),r.setAttr("previousFill",r.fill()),r.fill(se(r.fill()).alpha(1).hex("rgba")),n.forEach(o=>{o.children.forEach(c=>{if(c instanceof N.Line){const f=c.stroke();c.setAttr("previousStroke",f),c.stroke(se(f).alpha(1).hex("rgba"))}if(c instanceof N.Circle){const f=c.fill();c.setAttr("previousFill",f),c.fill(se(f).alpha(1).hex("rgba"))}})})}),e.addEventListener("mouseleave touchend",()=>{a.visible(!1),r.fill(r.getAttr("previousFill")),n.forEach(s=>{s.children.forEach(l=>{if(l instanceof N.Line){const u=l.getAttr("previousStroke");l.stroke(u)}if(l instanceof N.Circle){const u=l.getAttr("previousFill");l.fill(u)}})})})}registerScalingHandler(){const t=()=>{const n=this.stageConfig.container.offsetWidth,a=n/this.getCanvasWidth();if(n<this.getCanvasWidth()){this.staticGroup.width(this.getCanvasWidth()*a),this.staticGroup.height(this.getCanvasHeight()*a),this.staticGroup.scale({x:a,y:a});let r=24;n<600&&(r=40),n<400&&(r=52),[...Array.from(this.labels.values())].forEach(s=>{s.children[1].fontSize(r)}),this.stage.height(this.getCanvasHeight()*a),this.stage.width(this.getCanvasWidth()*a)}};new ResizeObserver(t).observe(this.stageConfig.container)}draw(){const t=new Map,e=new Map;Object.keys(this.nodeMappings).forEach(n=>{var o;const a=this.nodeMappings[n],{tail:r}=a[0];let s;e.has(r.identifier)?s=e.get(r.identifier):(s=this.circle(r.positionX,r.positionY,this.renderParameters.radius,r.options),e.set(r.identifier,s));const l=this.label(((o=r.options)==null?void 0:o.label)||"",r.positionX,r.positionY);l.visible(!1),l.listening(!1),this.labels.set(r.identifier,l);let u=[];a.forEach(c=>{const{head:f}=c,h=`${r.identifier}--${f.identifier}`,d=`${f.identifier}--${r.identifier}`;let p;t.has(h)?p=t.get(h):t.has(d)?p=t.get(d):(p=this.lineGroup(c.edge,c.edgeOptions),t.set(h,p),t.set(d,p));let m;e.has(f.identifier)?m=e.get(f.identifier):(m=this.circle(f.positionX,f.positionY,this.renderParameters.radius,f.options),e.set(f.identifier,m)),u=[m,...u],u=[...u,p]}),this.registerHighlightEvent(r.identifier,s,u)}),this.staticGroup.add(...Array.from(t.values())),this.staticGroup.add(...Array.from(e.values())),this.staticGroup.add(...Array.from(this.labels.values())),this.mainLayer.add(this.transformer),this.transformer.add(this.staticGroup),this.mainLayer.add(this.staticGroup),this.stage.add(this.mainLayer),this.registerScalingHandler()}}function fa(i){let t;return{c(){t=x("div"),b(t,"class","w-full mx-auto my-8 flex items-center space-x-4")},m(e,n){D(e,t,n),i[1](t)},p:B,i:B,o:B,d(e){e&&k(t),i[1](null)}}}function da(i,t,e){let n,a,r,s,l,u,o,c,f,h,d;R(i,Le,C=>e(4,n=C)),R(i,Me,C=>e(5,a=C)),R(i,we,C=>e(6,r=C)),R(i,Se,C=>e(7,s=C)),R(i,ye,C=>e(8,l=C)),R(i,Ie,C=>e(9,u=C)),R(i,Te,C=>e(10,o=C)),R(i,Pe,C=>e(11,c=C)),R(i,ke,C=>e(12,f=C)),R(i,Ae,C=>e(13,h=C)),R(i,De,C=>e(14,d=C));let p,m;const y=()=>{const C=De.choices[d],G=Ae.choices[h],Y=ke.choices[f],U=Pe.choices[c],ie=Te.choices[o],K=Ie.choices[u];return{compatabilityThreshold:C,initialStepSize:G,bundlingStiffness:Y,subdivisionRate:U,initialIterationCount:ie,iterationDecreaseRate:K}},v=()=>{if(!l)return;const C=oe.ArnaLexer.tokenize(l);oe.ArnaParser.input=C.tokens;const G=oe.ArnaParser.document();oe.ArnaParser.errors.length>0&&(console.error("Encountered errors during parsing"),oe.ArnaParser.errors.forEach(Ue=>{console.error(Ue)}));const Y=oe.ArnaAstVisitor.visit(G),U={maxTicks:Se.choices[s],maxRepulsiveDistance:we.choices[r],optimalDistance:Me.choices[a],c:Le.choices[n],bundle:Y.graphAttributes.keyValuePairs.bundle},K=new oe.ArnaAstSemanticAnalyzer(U).analyze(Y),Ge={container:p,height:1400,width:1400},Be=y();new ca(K,Ge,Be,U).draw()};Re(()=>{m=ye.subscribe(()=>{v()})}),$n(()=>m());function S(C){Ce[C?"unshift":"push"](()=>{p=C,e(0,p)})}return[p,S]}class ha extends W{constructor(t){super();j(this,t,da,fa,H,{})}}function pa(i){let t,e;const n=i[1].default,a=at(n,i,i[0],null);return{c(){t=x("span"),a&&a.c(),b(t,"class","bg-gray-200 text-black px-1 pb-1 mx-1 font-thin font-mono")},m(r,s){D(r,t,s),a&&a.m(t,null),e=!0},p(r,[s]){a&&a.p&&(!e||s&1)&&rt(a,n,r,r[0],e?ot(n,r[0],s,null):it(r[0]),null)},i(r){e||(_(a,r),e=!0)},o(r){$(a,r),e=!1},d(r){r&&k(t),a&&a.d(r)}}}function ga(i,t,e){let{$$slots:n={},$$scope:a}=t;return i.$$set=r=>{"$$scope"in r&&e(0,a=r.$$scope)},[a,n]}class X extends W{constructor(t){super();j(this,t,ga,pa,H,{})}}function ma(i){let t;return{c(){t=P("graph")},m(e,n){D(e,t,n)},d(e){e&&k(t)}}}function va(i){let t;return{c(){t=P("[bundle]")},m(e,n){D(e,t,n)},d(e){e&&k(t)}}}function ba(i){let t;return{c(){t=P("N0")},m(e,n){D(e,t,n)},d(e){e&&k(t)}}}function ya(i){let t;return{c(){t=P("color")},m(e,n){D(e,t,n)},d(e){e&&k(t)}}}function _a(i){let t;return{c(){t=P("label")},m(e,n){D(e,t,n)},d(e){e&&k(t)}}}function $a(i){let t;return{c(){t=P("N0--N5")},m(e,n){D(e,t,n)},d(e){e&&k(t)}}}function Ca(i){let t;return{c(){t=P("N0")},m(e,n){D(e,t,n)},d(e){e&&k(t)}}}function wa(i){let t;return{c(){t=P("N5")},m(e,n){D(e,t,n)},d(e){e&&k(t)}}}function Ea(i){let t;return{c(){t=P("N0")},m(e,n){D(e,t,n)},d(e){e&&k(t)}}}function xa(i){let t;return{c(){t=P("N5")},m(e,n){D(e,t,n)},d(e){e&&k(t)}}}function Sa(i){let t;return{c(){t=P("line-width")},m(e,n){D(e,t,n)},d(e){e&&k(t)}}}function Ma(i){let t;return{c(){t=P("color")},m(e,n){D(e,t,n)},d(e){e&&k(t)}}}function La(i){let t;return{c(){t=P("line-width")},m(e,n){D(e,t,n)},d(e){e&&k(t)}}}function Aa(i){let t;return{c(){t=P("color")},m(e,n){D(e,t,n)},d(e){e&&k(t)}}}function Da(i){let t;return{c(){t=P("}")},m(e,n){D(e,t,n)},d(e){e&&k(t)}}}function ka(i){let t,e,n,a,r,s,l,u,o,c,f,h,d,p,m,y,v,S,C,G,Y,U,ie,K,E,J,Ge,Be,qe,Ue,Qe,ut,q,ct,ue,ft,ce,dt,fe,ht,de,pt,he,gt,mt,vt,bt,ee,yt,pe,_t,ge,$t,me,Ct,ve,wt,Et,xt,St,Ve,Mt,be,ze,Ze,Lt;return s=new X({props:{$$slots:{default:[ma]},$$scope:{ctx:i}}}),u=new X({props:{$$slots:{default:[va]},$$scope:{ctx:i}}}),v=new X({props:{$$slots:{default:[ba]},$$scope:{ctx:i}}}),K=new X({props:{$$slots:{default:[ya]},$$scope:{ctx:i}}}),J=new X({props:{$$slots:{default:[_a]},$$scope:{ctx:i}}}),ue=new X({props:{$$slots:{default:[$a]},$$scope:{ctx:i}}}),ce=new X({props:{$$slots:{default:[Ca]},$$scope:{ctx:i}}}),fe=new X({props:{$$slots:{default:[wa]},$$scope:{ctx:i}}}),de=new X({props:{$$slots:{default:[Ea]},$$scope:{ctx:i}}}),he=new X({props:{$$slots:{default:[xa]},$$scope:{ctx:i}}}),pe=new X({props:{$$slots:{default:[Sa]},$$scope:{ctx:i}}}),ge=new X({props:{$$slots:{default:[Ma]},$$scope:{ctx:i}}}),me=new X({props:{$$slots:{default:[La]},$$scope:{ctx:i}}}),ve=new X({props:{$$slots:{default:[Aa]},$$scope:{ctx:i}}}),be=new X({props:{$$slots:{default:[Da]},$$scope:{ctx:i}}}),{c(){t=x("div"),e=x("textarea"),n=T(),a=x("span"),r=P("To begin defining a graph, use the "),M(s.$$.fragment),l=P(` keyword followed by the name
    of the graph. Following the name of the graph, you may choose to include the
    `),M(u.$$.fragment),o=P(" attribute. Including this will enable edge bundling."),c=T(),f=x("br"),h=T(),d=x("textarea"),p=T(),m=x("span"),y=P(`After defining the graph name, node and edge declarations are required. In
    this example, `),M(v.$$.fragment),S=P(` is the node identifier. Within the square brackets, attributes
    of the node can be defined.`),C=T(),G=x("br"),Y=T(),U=x("span"),ie=P("The "),M(K.$$.fragment),E=P(` attribute specifies the color of the graph vertex when drawn.
    You may use RGB, RGBA, Hex, or other color formats supported by CSS3. The `),M(J.$$.fragment),Ge=P(` attribute defines a string that will be displayed when the vertex is hovered
    over.`),Be=T(),qe=x("br"),Ue=T(),Qe=x("textarea"),ut=T(),q=x("span"),ct=P(`Edge declarations define an edge between two defined nodes. The nodes must
    be defined somewhere in the program or a compiler error will be thrown. In
    this example, `),M(ue.$$.fragment),ft=P(` defines an edge between the nodes with the identifiers
    `),M(ce.$$.fragment),dt=P(" and "),M(fe.$$.fragment),ht=P(". Even though this is an undirected edge, "),M(de.$$.fragment),pt=P(` is
    treated as the tail of the edge. While `),M(he.$$.fragment),gt=P(" is treated as the head."),mt=T(),vt=x("br"),bt=T(),ee=x("span"),yt=P("The current supported attributes for edge declarations include "),M(pe.$$.fragment),_t=P(" and "),M(ge.$$.fragment),$t=P(". "),M(me.$$.fragment),Ct=P(` defines the width of the rendered edge
    on the canvas. The `),M(ve.$$.fragment),wt=P(` attribute defines the color of the rendered edge
    on the canvas. The same color formats accepted for node declarations are supported
    for edge declarations.`),Et=T(),xt=x("br"),St=T(),Ve=x("span"),Mt=P("Finally, don't forget to end the graph declaration with a "),M(be.$$.fragment),b(a,"class","mt-2"),b(m,"class","mt-2"),b(q,"class","mt-2"),b(t,"class","rounded flex flex-col w-full p-4 bg-override-neutral-800/30 outline outline-1 outline-override-neutral-50/50")},m(w,I){D(w,t,I),g(t,e),g(t,n),g(t,a),g(a,r),L(s,a,null),g(a,l),L(u,a,null),g(a,o),g(t,c),g(t,f),g(t,h),g(t,d),g(t,p),g(t,m),g(m,y),L(v,m,null),g(m,S),g(t,C),g(t,G),g(t,Y),g(t,U),g(U,ie),L(K,U,null),g(U,E),L(J,U,null),g(U,Ge),g(t,Be),g(t,qe),g(t,Ue),g(t,Qe),g(t,ut),g(t,q),g(q,ct),L(ue,q,null),g(q,ft),L(ce,q,null),g(q,dt),L(fe,q,null),g(q,ht),L(de,q,null),g(q,pt),L(he,q,null),g(q,gt),g(t,mt),g(t,vt),g(t,bt),g(t,ee),g(ee,yt),L(pe,ee,null),g(ee,_t),L(ge,ee,null),g(ee,$t),L(me,ee,null),g(ee,Ct),L(ve,ee,null),g(ee,wt),g(t,Et),g(t,xt),g(t,St),g(t,Ve),g(Ve,Mt),L(be,Ve,null),i[2](t),ze=!0,Ze||(Lt=[Je(i[1].call(null,e,"graph Name [bundle] {")),Je(i[1].call(null,d,'N0 [color="rgba(164,6,6,0.6)",label="A message to show."]')),Je(i[1].call(null,Qe,'N0--N5  [line-width=3,color="rgba(164,6,6,0.2)"]'))],Ze=!0)},p(w,[I]){const At={};I&16&&(At.$$scope={dirty:I,ctx:w}),s.$set(At);const Dt={};I&16&&(Dt.$$scope={dirty:I,ctx:w}),u.$set(Dt);const kt={};I&16&&(kt.$$scope={dirty:I,ctx:w}),v.$set(kt);const Pt={};I&16&&(Pt.$$scope={dirty:I,ctx:w}),K.$set(Pt);const Tt={};I&16&&(Tt.$$scope={dirty:I,ctx:w}),J.$set(Tt);const It={};I&16&&(It.$$scope={dirty:I,ctx:w}),ue.$set(It);const Ot={};I&16&&(Ot.$$scope={dirty:I,ctx:w}),ce.$set(Ot);const Rt={};I&16&&(Rt.$$scope={dirty:I,ctx:w}),fe.$set(Rt);const Nt={};I&16&&(Nt.$$scope={dirty:I,ctx:w}),de.$set(Nt);const Gt={};I&16&&(Gt.$$scope={dirty:I,ctx:w}),he.$set(Gt);const Bt={};I&16&&(Bt.$$scope={dirty:I,ctx:w}),pe.$set(Bt);const Ut={};I&16&&(Ut.$$scope={dirty:I,ctx:w}),ge.$set(Ut);const Vt={};I&16&&(Vt.$$scope={dirty:I,ctx:w}),me.$set(Vt);const zt={};I&16&&(zt.$$scope={dirty:I,ctx:w}),ve.$set(zt);const Ft={};I&16&&(Ft.$$scope={dirty:I,ctx:w}),be.$set(Ft)},i(w){ze||(_(s.$$.fragment,w),_(u.$$.fragment,w),_(v.$$.fragment,w),_(K.$$.fragment,w),_(J.$$.fragment,w),_(ue.$$.fragment,w),_(ce.$$.fragment,w),_(fe.$$.fragment,w),_(de.$$.fragment,w),_(he.$$.fragment,w),_(pe.$$.fragment,w),_(ge.$$.fragment,w),_(me.$$.fragment,w),_(ve.$$.fragment,w),_(be.$$.fragment,w),ze=!0)},o(w){$(s.$$.fragment,w),$(u.$$.fragment,w),$(v.$$.fragment,w),$(K.$$.fragment,w),$(J.$$.fragment,w),$(ue.$$.fragment,w),$(ce.$$.fragment,w),$(fe.$$.fragment,w),$(de.$$.fragment,w),$(he.$$.fragment,w),$(pe.$$.fragment,w),$(ge.$$.fragment,w),$(me.$$.fragment,w),$(ve.$$.fragment,w),$(be.$$.fragment,w),ze=!1},d(w){w&&k(t),A(s),A(u),A(v),A(K),A(J),A(ue),A(ce),A(fe),A(de),A(he),A(pe),A(ge),A(me),A(ve),A(be),i[2](null),Ze=!1,Cn(Lt)}}}function Pa(i,t,e){let n;const a=()=>{const l=n.getElementsByClassName("CodeMirror");[...Array(l.length)].forEach((u,o)=>{console.log(o);const c=l.item(o);c.classList.add("!font-mono"),c.classList.add("!h-auto")})},r=(l,u)=>{try{Fe.fromTextArea(l,{readOnly:!0,mode:"arna",theme:"midnight",cursorHeight:0}).setValue(u)}catch{console.error("Expected node to be of type HTMLTextAreaElement")}};Re(()=>{on(),a()});function s(l){Ce[l?"unshift":"push"](()=>{n=l,e(0,n)})}return[n,r,s]}class Ta extends W{constructor(t){super();j(this,t,Pa,ka,H,{})}}function Ia(i){let t,e,n,a;return{c(){t=x("div"),e=x("div"),n=x("span"),a=P(i[0]),b(n,"class","text-lg font-center font-mono font-semibold"),b(e,"class","min-w-full cursor-pointer rounded shadow-[0_0_2pt_1px] shadow-override-bg/30 px-2 bg-override-neutral-500/50"),b(t,"class","flex items-center min-w-full text-center")},m(r,s){D(r,t,s),g(t,e),g(e,n),g(n,a),i[4](e)},p(r,[s]){s&1&&Ee(a,r[0])},i:B,o:B,d(r){r&&k(t),i[4](null)}}}function Oa(i,t,e){let{label:n}=t,{onSelect:a}=t,{isChecked:r=!1}=t,s;const l=["!bg-override-yellow","text-override-neutral-900"],u=()=>{l.forEach(f=>{s.classList.add(f)})},o=()=>{l.forEach(f=>{s.classList.remove(f)})};Re(()=>{r&&u(),s.addEventListener("click",()=>{a(),u()})});function c(f){Ce[f?"unshift":"push"](()=>{s=f,e(1,s)})}return i.$$set=f=>{"label"in f&&e(0,n=f.label),"onSelect"in f&&e(2,a=f.onSelect),"isChecked"in f&&e(3,r=f.isChecked)},i.$$.update=()=>{i.$$.dirty&10&&(r||s&&o())},[n,s,a,r,c]}class Ra extends W{constructor(t){super();j(this,t,Oa,Ia,H,{label:0,onSelect:2,isChecked:3})}}function Kt(i,t,e){const n=i.slice();return n[7]=t[e],n[9]=e,n}function qt(i,t){let e,n,a;return n=new Ra({props:{label:t[7]+"",onSelect:t[3](t[9]),isChecked:t[2]===t[9]}}),{key:i,first:null,c(){e=wn(),M(n.$$.fragment),this.first=e},m(r,s){D(r,e,s),L(n,r,s),a=!0},p(r,s){t=r;const l={};s&2&&(l.label=t[7]+""),s&2&&(l.onSelect=t[3](t[9])),s&6&&(l.isChecked=t[2]===t[9]),n.$set(l)},i(r){a||(_(n.$$.fragment,r),a=!0)},o(r){$(n.$$.fragment,r),a=!1},d(r){r&&k(e),A(n,r)}}}function Na(i){let t,e,n,a,r,s=[],l=new Map,u,o,c=i[1];const f=h=>h[9];for(let h=0;h<c.length;h+=1){let d=Kt(i,c,h),p=f(d);l.set(p,s[h]=qt(p,d))}return{c(){t=x("div"),e=x("span"),n=P(i[0]),a=T(),r=x("div");for(let h=0;h<s.length;h+=1)s[h].c();b(e,"class","mb-4 text-center italic text-override-yellow"),b(r,"class","grid grid-cols-custom gap-y-6 gap-x-4 px-1 justify-items-center"),b(t,"class",u=`flex flex-col ${i[4].class}`)},m(h,d){D(h,t,d),g(t,e),g(e,n),g(t,a),g(t,r);for(let p=0;p<s.length;p+=1)s[p].m(r,null);o=!0},p(h,[d]){(!o||d&1)&&Ee(n,h[0]),d&14&&(c=h[1],Ye(),s=En(s,d,f,1,h,c,l,r,xn,qt,null,Kt),Xe()),(!o||d&16&&u!==(u=`flex flex-col ${h[4].class}`))&&b(t,"class",u)},i(h){if(!o){for(let d=0;d<c.length;d+=1)_(s[d]);o=!0}},o(h){for(let d=0;d<s.length;d+=1)$(s[d]);o=!1},d(h){h&&k(t);for(let d=0;d<s.length;d+=1)s[d].d()}}}function Ga(i,t,e){let{label:n}=t,{values:a}=t,{onIndexChange:r}=t,{defaultIndex:s}=t,l=s;function u(o){return()=>{e(2,l=o),r(o)}}return i.$$set=o=>{e(4,t=Q(Q({},t),Z(o))),"label"in o&&e(0,n=o.label),"values"in o&&e(1,a=o.values),"onIndexChange"in o&&e(5,r=o.onIndexChange),"defaultIndex"in o&&e(6,s=o.defaultIndex)},t=Z(t),[n,a,l,u,t,r,s]}class te extends W{constructor(t){super();j(this,t,Ga,Na,H,{label:0,values:1,onIndexChange:5,defaultIndex:6})}}function Ba(i){let t,e,n,a;return{c(){t=le("svg"),e=le("path"),n=le("path"),b(e,"d","M0 0h24v24H0z"),b(e,"fill","none"),b(n,"d","M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"),b(t,"xmlns","http://www.w3.org/2000/svg"),b(t,"height","24px"),b(t,"viewBox","0 0 24 24"),b(t,"width","24px"),b(t,"class",a=i[1].class)},m(r,s){D(r,t,s),g(t,e),g(t,n),i[2](t)},p(r,[s]){s&2&&a!==(a=r[1].class)&&b(t,"class",a)},i:B,o:B,d(r){r&&k(t),i[2](null)}}}function Ua(i,t,e){let{svgElement:n=null}=t;function a(r){Ce[r?"unshift":"push"](()=>{n=r,e(0,n)})}return i.$$set=r=>{e(1,t=Q(Q({},t),Z(r))),"svgElement"in r&&e(0,n=r.svgElement)},t=Z(t),[n,t,a]}class Va extends W{constructor(t){super();j(this,t,Ua,Ba,H,{svgElement:0})}}const za=i=>({}),Qt=i=>({}),Fa=i=>({}),Zt=i=>({});function Jt(i){let t,e,n;const a=i[4].content,r=at(a,i,i[3],Qt);return{c(){t=x("div"),e=x("div"),r&&r.c(),b(e,"class","py-4"),b(t,"class","bg-override-neutral-900/75")},m(s,l){D(s,t,l),g(t,e),r&&r.m(e,null),n=!0},p(s,l){r&&r.p&&(!n||l&8)&&rt(r,a,s,s[3],n?ot(a,s[3],l,za):it(s[3]),Qt)},i(s){n||(_(r,s),n=!0)},o(s){$(r,s),n=!1},d(s){s&&k(t),r&&r.d(s)}}}function Ya(i){let t,e,n,a,r,s,l,u,o;const c=i[4].label,f=at(c,i,i[3],Zt);function h(m){i[5](m)}let d={class:"fill-override-neutral-50 justify-self-end transition"};i[2]!==void 0&&(d.svgElement=i[2]),r=new Va({props:d}),Ce.push(()=>Sn(r,"svgElement",h));let p=i[0]&&Jt(i);return{c(){t=x("div"),e=x("div"),n=x("div"),f&&f.c(),a=T(),M(r.$$.fragment),u=T(),p&&p.c(),b(n,"class","flex justify-between px-2"),b(e,"class",l=`py-3 cursor-pointer ${i[0]?en:""}`),b(t,"class",`${Xa}`)},m(m,y){D(m,t,y),g(t,e),g(e,n),f&&f.m(n,null),g(n,a),L(r,n,null),i[6](e),g(t,u),p&&p.m(t,null),o=!0},p(m,[y]){f&&f.p&&(!o||y&8)&&rt(f,c,m,m[3],o?ot(c,m[3],y,Fa):it(m[3]),Zt);const v={};!s&&y&4&&(s=!0,v.svgElement=m[2],Mn(()=>s=!1)),r.$set(v),(!o||y&1&&l!==(l=`py-3 cursor-pointer ${m[0]?en:""}`))&&b(e,"class",l),m[0]?p?(p.p(m,y),y&1&&_(p,1)):(p=Jt(m),p.c(),_(p,1),p.m(t,null)):p&&(Ye(),$(p,1,1,()=>{p=null}),Xe())},i(m){o||(_(f,m),_(r.$$.fragment,m),_(p),o=!0)},o(m){$(f,m),$(r.$$.fragment,m),$(p),o=!1},d(m){m&&k(t),f&&f.d(m),A(r),i[6](null),p&&p.d()}}}const en="border-b-[1px] border-override-blue",Xa="border-b-[1px] last:border-b-0 border-override-neutral-50/25";function Wa(i,t,e){let{$$slots:n={},$$scope:a}=t,r=!1,s,l;const u=()=>{e(0,r=!r),r?l.classList.add("-rotate-90"):l.classList.remove("-rotate-90")};Re(()=>{s.addEventListener("click",()=>{u()}),s.addEventListener("mouseover",()=>{l.classList.add("!fill-override-blue"),s.classList.add("!text-override-blue")}),s.addEventListener("mouseleave",()=>{l.classList.remove("!fill-override-blue"),s.classList.remove("!text-override-blue")})});function o(f){l=f,e(2,l)}function c(f){Ce[f?"unshift":"push"](()=>{s=f,e(1,s)})}return i.$$set=f=>{"$$scope"in f&&e(3,a=f.$$scope)},[r,s,l,a,n,o,c]}class nt extends W{constructor(t){super();j(this,t,Wa,Ya,H,{})}}function ja(i){let t;return{c(){t=x("span"),t.textContent="Graph Layout Algorithm",b(t,"slot","label")},m(e,n){D(e,t,n)},d(e){e&&k(t)}}}function Ha(i){let t,e,n,a,r,s,l,u;return t=new te({props:{label:"Iterations",values:Se.choices,defaultIndex:i[0],onIndexChange:i[11],class:"mb-4"}}),n=new te({props:{label:"Force Coefficient",values:Le.choices,defaultIndex:i[1],onIndexChange:i[12],class:"mb-4"}}),r=new te({props:{label:"Max Repulsive Force Distance",values:we.choices,defaultIndex:i[2],onIndexChange:i[13],class:"mb-4"}}),l=new te({props:{label:"Optimal Node Distance",values:Me.choices,defaultIndex:i[3],onIndexChange:i[14]}}),{c(){M(t.$$.fragment),e=T(),M(n.$$.fragment),a=T(),M(r.$$.fragment),s=T(),M(l.$$.fragment)},m(o,c){L(t,o,c),D(o,e,c),L(n,o,c),D(o,a,c),L(r,o,c),D(o,s,c),L(l,o,c),u=!0},p(o,c){const f={};c&1&&(f.defaultIndex=o[0]),c&1&&(f.onIndexChange=o[11]),t.$set(f);const h={};c&2&&(h.defaultIndex=o[1]),c&2&&(h.onIndexChange=o[12]),n.$set(h);const d={};c&4&&(d.defaultIndex=o[2]),c&4&&(d.onIndexChange=o[13]),r.$set(d);const p={};c&8&&(p.defaultIndex=o[3]),c&8&&(p.onIndexChange=o[14]),l.$set(p)},i(o){u||(_(t.$$.fragment,o),_(n.$$.fragment,o),_(r.$$.fragment,o),_(l.$$.fragment,o),u=!0)},o(o){$(t.$$.fragment,o),$(n.$$.fragment,o),$(r.$$.fragment,o),$(l.$$.fragment,o),u=!1},d(o){A(t,o),o&&k(e),A(n,o),o&&k(a),A(r,o),o&&k(s),A(l,o)}}}function Ka(i){let t;return{c(){t=x("span"),t.textContent="Edge Bundling",b(t,"slot","label")},m(e,n){D(e,t,n)},d(e){e&&k(t)}}}function qa(i){let t,e,n,a,r,s,l,u,o,c,f,h;return t=new te({props:{label:"Compatability Threshold",values:De.choices,defaultIndex:i[4],onIndexChange:i[15],class:"mb-4"}}),n=new te({props:{label:"Initial Step Size",values:Ae.choices,defaultIndex:i[5],onIndexChange:i[16],class:"mb-4"}}),r=new te({props:{label:"Bundling Stiffness Coefficient",values:ke.choices,defaultIndex:i[6],onIndexChange:i[17],class:"mb-4"}}),l=new te({props:{label:"Initial Subdivision Rate",values:Pe.choices,defaultIndex:i[7],onIndexChange:i[18],class:"mb-4"}}),o=new te({props:{label:"Initial Bundling Iterations",values:Te.choices,defaultIndex:i[8],onIndexChange:i[19],class:"mb-4"}}),f=new te({props:{label:"Bundling Iteration Depreciation Rate",values:Ie.choices,defaultIndex:i[9],onIndexChange:i[20]}}),{c(){M(t.$$.fragment),e=T(),M(n.$$.fragment),a=T(),M(r.$$.fragment),s=T(),M(l.$$.fragment),u=T(),M(o.$$.fragment),c=T(),M(f.$$.fragment)},m(d,p){L(t,d,p),D(d,e,p),L(n,d,p),D(d,a,p),L(r,d,p),D(d,s,p),L(l,d,p),D(d,u,p),L(o,d,p),D(d,c,p),L(f,d,p),h=!0},p(d,p){const m={};p&16&&(m.defaultIndex=d[4]),p&16&&(m.onIndexChange=d[15]),t.$set(m);const y={};p&32&&(y.defaultIndex=d[5]),p&32&&(y.onIndexChange=d[16]),n.$set(y);const v={};p&64&&(v.defaultIndex=d[6]),p&64&&(v.onIndexChange=d[17]),r.$set(v);const S={};p&128&&(S.defaultIndex=d[7]),p&128&&(S.onIndexChange=d[18]),l.$set(S);const C={};p&256&&(C.defaultIndex=d[8]),p&256&&(C.onIndexChange=d[19]),o.$set(C);const G={};p&512&&(G.defaultIndex=d[9]),p&512&&(G.onIndexChange=d[20]),f.$set(G)},i(d){h||(_(t.$$.fragment,d),_(n.$$.fragment,d),_(r.$$.fragment,d),_(l.$$.fragment,d),_(o.$$.fragment,d),_(f.$$.fragment,d),h=!0)},o(d){$(t.$$.fragment,d),$(n.$$.fragment,d),$(r.$$.fragment,d),$(l.$$.fragment,d),$(o.$$.fragment,d),$(f.$$.fragment,d),h=!1},d(d){A(t,d),d&&k(e),A(n,d),d&&k(a),A(r,d),d&&k(s),A(l,d),d&&k(u),A(o,d),d&&k(c),A(f,d)}}}function Qa(i){let t;return{c(){t=x("span"),t.textContent="Randomization",b(t,"slot","label")},m(e,n){D(e,t,n)},d(e){e&&k(t)}}}function Za(i){let t,e;return t=new te({props:{label:"Edge Count (random graphs only)",values:xe.choices,defaultIndex:i[10],onIndexChange:i[21]}}),{c(){M(t.$$.fragment)},m(n,a){L(t,n,a),e=!0},p(n,a){const r={};a&1024&&(r.defaultIndex=n[10]),a&1024&&(r.onIndexChange=n[21]),t.$set(r)},i(n){e||(_(t.$$.fragment,n),e=!0)},o(n){$(t.$$.fragment,n),e=!1},d(n){A(t,n)}}}function Ja(i){let t,e,n,a,r,s,l;return e=new nt({props:{$$slots:{content:[Ha],label:[ja]},$$scope:{ctx:i}}}),a=new nt({props:{$$slots:{content:[qa],label:[Ka]},$$scope:{ctx:i}}}),s=new nt({props:{$$slots:{content:[Za],label:[Qa]},$$scope:{ctx:i}}}),{c(){t=x("div"),M(e.$$.fragment),n=T(),M(a.$$.fragment),r=T(),M(s.$$.fragment),b(t,"class","mb-4 rounded flex flex-col w-full text-neutral-200 font-mono bg-override-neutral-800/30 outline outline-1 outline-override-neutral-50/50")},m(u,o){D(u,t,o),L(e,t,null),g(t,n),L(a,t,null),g(t,r),L(s,t,null),l=!0},p(u,[o]){const c={};o&4194319&&(c.$$scope={dirty:o,ctx:u}),e.$set(c);const f={};o&4195312&&(f.$$scope={dirty:o,ctx:u}),a.$set(f);const h={};o&4195328&&(h.$$scope={dirty:o,ctx:u}),s.$set(h)},i(u){l||(_(e.$$.fragment,u),_(a.$$.fragment,u),_(s.$$.fragment,u),l=!0)},o(u){$(e.$$.fragment,u),$(a.$$.fragment,u),$(s.$$.fragment,u),l=!1},d(u){u&&k(t),A(e),A(a),A(s)}}}function er(i,t,e){let n,a,r,s,l,u,o,c,f,h,d;return R(i,Se,E=>e(0,n=E)),R(i,Le,E=>e(1,a=E)),R(i,we,E=>e(2,r=E)),R(i,Me,E=>e(3,s=E)),R(i,De,E=>e(4,l=E)),R(i,Ae,E=>e(5,u=E)),R(i,ke,E=>e(6,o=E)),R(i,Pe,E=>e(7,c=E)),R(i,Te,E=>e(8,f=E)),R(i,Ie,E=>e(9,h=E)),R(i,xe,E=>e(10,d=E)),[n,a,r,s,l,u,o,c,f,h,d,E=>{z(Se,n=E,n)},E=>{z(Le,a=E,a)},E=>{z(we,r=E,r)},E=>{z(Me,s=E,s)},E=>{z(De,l=E,l)},E=>{z(Ae,u=E,u)},E=>{z(ke,o=E,o)},E=>{z(Pe,c=E,c)},E=>{z(Te,f=E,f)},E=>{z(Ie,h=E,h)},E=>{z(xe,d=E,d)}]}class tr extends W{constructor(t){super();j(this,t,er,Ja,H,{})}}function nr(i){let t,e,n,a;return{c(){t=le("svg"),e=le("path"),n=le("path"),b(e,"d","M0 0h24v24H0z"),b(e,"fill","none"),b(n,"d","M6.76 4.84l-1.8-1.79-1.41 1.41 1.79 1.79 1.42-1.41zM4 10.5H1v2h3v-2zm9-9.95h-2V3.5h2V.55zm7.45 3.91l-1.41-1.41-1.79 1.79 1.41 1.41 1.79-1.79zm-3.21 13.7l1.79 1.8 1.41-1.41-1.8-1.79-1.4 1.4zM20 10.5v2h3v-2h-3zm-8-5c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6-2.69-6-6-6zm-1 16.95h2V19.5h-2v2.95zm-7.45-3.91l1.41 1.41 1.79-1.8-1.41-1.41-1.79 1.8z"),b(t,"class",a=i[0].class),b(t,"xmlns","http://www.w3.org/2000/svg"),b(t,"height","24px"),b(t,"viewBox","0 0 24 24"),b(t,"width","24px"),b(t,"fill","#000000")},m(r,s){D(r,t,s),g(t,e),g(t,n)},p(r,[s]){s&1&&a!==(a=r[0].class)&&b(t,"class",a)},i:B,o:B,d(r){r&&k(t)}}}function ar(i,t,e){return i.$$set=n=>{e(0,t=Q(Q({},t),Z(n)))},t=Z(t),[t]}class rr extends W{constructor(t){super();j(this,t,ar,nr,H,{})}}function ir(i){let t,e,n;return{c(){t=le("svg"),e=le("path"),b(e,"d","M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"),b(t,"xmlns","http://www.w3.org/2000/svg"),b(t,"width","24"),b(t,"height","24"),b(t,"viewBox","0 0 24 24"),b(t,"class",n=i[0].class)},m(a,r){D(a,t,r),g(t,e)},p(a,[r]){r&1&&n!==(n=a[0].class)&&b(t,"class",n)},i:B,o:B,d(a){a&&k(t)}}}function or(i,t,e){return i.$$set=n=>{e(0,t=Q(Q({},t),Z(n)))},t=Z(t),[t]}class sr extends W{constructor(t){super();j(this,t,or,ir,H,{})}}function lr(i){let t,e,n,a,r,s,l,u;return l=new sr({props:{class:"!fill-override-bg/80 hover:!fill-override-blue w-auto h-7"}}),{c(){t=x("div"),e=x("div"),n=x("div"),a=T(),r=x("div"),s=x("a"),M(l.$$.fragment),b(n,"class","flex-grow"),b(s,"href","https://github.com/jackhenry/arna"),b(r,"class",""),b(e,"class","w-full flex"),b(t,"class","overflow-hidden bg-override-yellow relative p-1")},m(o,c){D(o,t,c),g(t,e),g(e,n),g(e,a),g(e,r),g(r,s),L(l,s,null),u=!0},p:B,i(o){u||(_(l.$$.fragment,o),u=!0)},o(o){$(l.$$.fragment,o),u=!1},d(o){o&&k(t),A(l)}}}class ur extends W{constructor(t){super();j(this,t,null,lr,H,{})}}function tn(i){let t,e;return t=new tr({}),{c(){M(t.$$.fragment)},m(n,a){L(t,n,a),e=!0},i(n){e||(_(t.$$.fragment,n),e=!0)},o(n){$(t.$$.fragment,n),e=!1},d(n){A(t,n)}}}function nn(i){let t,e;return t=new Ta({}),{c(){M(t.$$.fragment)},m(n,a){L(t,n,a),e=!0},i(n){e||(_(t.$$.fragment,n),e=!0)},o(n){$(t.$$.fragment,n),e=!1},d(n){A(t,n)}}}function cr(i){let t,e,n,a,r,s,l,u,o,c,f,h,d,p,m;e=new ur({}),s=new rr({props:{class:"!fill-override-yellow mr-2 animate-spin-slow"}}),c=new Bn({});let y=i[0]&&tn(),v=i[1]&&nn();return p=new ha({}),{c(){t=x("main"),M(e.$$.fragment),n=T(),a=x("div"),r=x("div"),M(s.$$.fragment),l=T(),u=x("span"),u.innerHTML=`<span class="font-serif text-3xl text-override-blue font-semibold">\u0410\u0440\u043D\u0430</span> 
        <span class="text-3xl text-override-yellow font-semibold">Graph DSL</span>`,o=T(),M(c.$$.fragment),f=T(),y&&y.c(),h=T(),v&&v.c(),d=T(),M(p.$$.fragment),b(u,"class","font-sans"),b(r,"class","flex items-center mb-4"),b(a,"class","flex flex-col max-w-4xl items-center mx-auto pt-4 px-4")},m(S,C){D(S,t,C),L(e,t,null),g(t,n),g(t,a),g(a,r),L(s,r,null),g(r,l),g(r,u),g(a,o),L(c,a,null),g(a,f),y&&y.m(a,null),g(a,h),v&&v.m(a,null),g(a,d),L(p,a,null),m=!0},p(S,[C]){S[0]?y?C&1&&_(y,1):(y=tn(),y.c(),_(y,1),y.m(a,h)):y&&(Ye(),$(y,1,1,()=>{y=null}),Xe()),S[1]?v?C&2&&_(v,1):(v=nn(),v.c(),_(v,1),v.m(a,d)):v&&(Ye(),$(v,1,1,()=>{v=null}),Xe())},i(S){m||(_(e.$$.fragment,S),_(s.$$.fragment,S),_(c.$$.fragment,S),_(y),_(v),_(p.$$.fragment,S),m=!0)},o(S){$(e.$$.fragment,S),$(s.$$.fragment,S),$(c.$$.fragment,S),$(y),$(v),$(p.$$.fragment,S),m=!1},d(S){S&&k(t),A(e),A(s),A(c),y&&y.d(),v&&v.d(),A(p)}}}function fr(i,t,e){let n,a;return R(i,cn,r=>e(0,n=r)),R(i,un,r=>e(1,a=r)),[n,a]}class dr extends W{constructor(t){super();j(this,t,fr,cr,H,{})}}new dr({target:document.getElementById("root")});
