var Ec=Object.defineProperty;var Tc=(e,t,n)=>t in e?Ec(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ke=(e,t,n)=>(Tc(e,typeof t!="symbol"?t+"":t,n),n);import{C as Qr,c as k}from"./codemirror.20a0d7ae.js";import{c as an}from"./chroma-js.e89a2244.js";import{K as Je}from"./konva.8a4f0da8.js";const Ac=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerpolicy&&(i.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?i.credentials="include":a.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}};Ac();function Oe(){}function nt(e,t){for(const n in t)e[n]=t[n];return e}function iu(e){return e()}function Ro(){return Object.create(null)}function Ln(e){e.forEach(iu)}function Ri(e){return typeof e=="function"}function je(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function bc(e){return Object.keys(e).length===0}function ou(e,...t){if(e==null)return Oe;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function ye(e,t,n){e.$$.on_destroy.push(ou(t,n))}function Ii(e,t,n,r){if(e){const a=su(e,t,n,r);return e[0](a)}}function su(e,t,n,r){return e[1]&&r?nt(n.ctx.slice(),e[1](r(t))):n.ctx}function Si(e,t,n,r){if(e[2]&&r){const a=e[2](r(n));if(t.dirty===void 0)return a;if(typeof a=="object"){const i=[],o=Math.max(t.dirty.length,a.length);for(let u=0;u<o;u+=1)i[u]=t.dirty[u]|a[u];return i}return t.dirty|a}return t.dirty}function Ni(e,t,n,r,a,i){if(a){const o=su(t,n,r,i);e.p(o,a)}}function Pi(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let r=0;r<n;r++)t[r]=-1;return t}return-1}function ut(e){const t={};for(const n in e)n[0]!=="$"&&(t[n]=e[n]);return t}function Fe(e,t,n){return e.set(n),t}function Ja(e){return e&&Ri(e.destroy)?e.destroy:Oe}function D(e,t){e.appendChild(t)}function ae(e,t,n){e.insertBefore(t,n||null)}function te(e){e.parentNode.removeChild(e)}function Z(e){return document.createElement(e)}function Jt(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function ie(e){return document.createTextNode(e)}function se(){return ie(" ")}function Oc(){return ie("")}function uu(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function V(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Rc(e){return Array.from(e.childNodes)}function or(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}let sr;function tr(e){sr=e}function Ci(){if(!sr)throw new Error("Function called outside component initialization");return sr}function yr(e){Ci().$$.on_mount.push(e)}function Ic(e){Ci().$$.after_update.push(e)}function Sc(e){Ci().$$.on_destroy.push(e)}const Qn=[],Bt=[],Yr=[],fi=[],Nc=Promise.resolve();let di=!1;function Pc(){di||(di=!0,Nc.then(lu))}function hi(e){Yr.push(e)}function Cc(e){fi.push(e)}const Qa=new Set;let Wr=0;function lu(){const e=sr;do{for(;Wr<Qn.length;){const t=Qn[Wr];Wr++,tr(t),$c(t.$$)}for(tr(null),Qn.length=0,Wr=0;Bt.length;)Bt.pop()();for(let t=0;t<Yr.length;t+=1){const n=Yr[t];Qa.has(n)||(Qa.add(n),n())}Yr.length=0}while(Qn.length);for(;fi.length;)fi.pop()();di=!1,Qa.clear(),tr(e)}function $c(e){if(e.fragment!==null){e.update(),Ln(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(hi)}}const Xr=new Set;let on;function ea(){on={r:0,c:[],p:on}}function ta(){on.r||Ln(on.c),on=on.p}function Y(e,t){e&&e.i&&(Xr.delete(e),e.i(t))}function X(e,t,n,r){if(e&&e.o){if(Xr.has(e))return;Xr.add(e),on.c.push(()=>{Xr.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}}function Lc(e,t){X(e,1,1,()=>{t.delete(e.key)})}function kc(e,t,n,r,a,i,o,u,s,l,d,c){let p=e.length,v=i.length,_=p;const f={};for(;_--;)f[e[_].key]=_;const m=[],E=new Map,b=new Map;for(_=v;_--;){const y=c(a,i,_),g=n(y);let T=o.get(g);T?r&&T.p(y,t):(T=l(g,y),T.c()),E.set(g,m[_]=T),g in f&&b.set(g,Math.abs(_-f[g]))}const A=new Set,S=new Set;function $(y){Y(y,1),y.m(u,d),o.set(y.key,y),d=y.first,v--}for(;p&&v;){const y=m[v-1],g=e[p-1],T=y.key,h=g.key;y===g?(d=y.first,p--,v--):E.has(h)?!o.has(T)||A.has(T)?$(y):S.has(h)?p--:b.get(T)>b.get(h)?(S.add(T),$(y)):(A.add(h),p--):(s(g,o),p--)}for(;p--;){const y=e[p];E.has(y.key)||s(y,o)}for(;v;)$(m[v-1]);return m}function Mc(e,t,n){const r=e.$$.props[t];r!==void 0&&(e.$$.bound[r]=n,n(e.$$.ctx[r]))}function re(e){e&&e.c()}function Q(e,t,n,r){const{fragment:a,on_mount:i,on_destroy:o,after_update:u}=e.$$;a&&a.m(t,n),r||hi(()=>{const s=i.map(iu).filter(Ri);o?o.push(...s):Ln(s),e.$$.on_mount=[]}),u.forEach(hi)}function ee(e,t){const n=e.$$;n.fragment!==null&&(Ln(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function wc(e,t){e.$$.dirty[0]===-1&&(Qn.push(e),Pc(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Xe(e,t,n,r,a,i,o,u=[-1]){const s=sr;tr(e);const l=e.$$={fragment:null,ctx:null,props:i,update:Oe,not_equal:a,bound:Ro(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(s?s.$$.context:[])),callbacks:Ro(),dirty:u,skip_bound:!1,root:t.target||s.$$.root};o&&o(l.root);let d=!1;if(l.ctx=n?n(e,t.props||{},(c,p,...v)=>{const _=v.length?v[0]:p;return l.ctx&&a(l.ctx[c],l.ctx[c]=_)&&(!l.skip_bound&&l.bound[c]&&l.bound[c](_),d&&wc(e,c)),p}):[],l.update(),d=!0,Ln(l.before_update),l.fragment=r?r(l.ctx):!1,t.target){if(t.hydrate){const c=Rc(t.target);l.fragment&&l.fragment.l(c),c.forEach(te)}else l.fragment&&l.fragment.c();t.intro&&Y(e.$$.fragment),Q(e,t.target,t.anchor,t.customElement),lu()}tr(s)}class qe{$destroy(){ee(this,1),this.$destroy=Oe}$on(t,n){const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const a=r.indexOf(n);a!==-1&&r.splice(a,1)}}$set(t){this.$$set&&!bc(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const xc=/[a-zA-Z0-9#]\w*/;function Dc(){return{startState:()=>({inAttributes:!1,inString:!1}),token:(e,t)=>{if(e.match(/GRAPH/i,!0))return"def";if(e.match(/{/)||e.match(/}/))return"bracket";if(!t.inAttributes&&e.match(xc,!0))return"variable";if(t.inAttributes){if(e.match(/,/))return null;if(e.match(/".*?"/))return"property";if(e.match(/[0-9]/))return"def";if(e.match(/=/,!0))return"atom";if(e.match(/BUNDLE/i)||e.match(/COLOR/i)||e.match(/LABEL/i)||e.match(/LINE-WIDTH/i))return"keyword"}return e.match(/\[/)?(t.inAttributes=!0,null):e.match(/\]/)?(t.inAttributes=!1,null):(e.next(),null)}}}function cu(){"arna"in Qr.modes||Qr.defineMode("arna",Dc)}function Fc(e){let t,n,r,a,i;return{c(){t=Z("button"),n=ie(e[0]),V(t,"class",r=`rounded px-2 py-1 mx-1 text-override-fg text-sm font-semibold ${e[2].class}`)},m(o,u){ae(o,t,u),D(t,n),a||(i=uu(t,"click",function(){Ri(e[1])&&e[1].apply(this,arguments)}),a=!0)},p(o,[u]){e=o,u&1&&or(n,e[0]),u&4&&r!==(r=`rounded px-2 py-1 mx-1 text-override-fg text-sm font-semibold ${e[2].class}`)&&V(t,"class",r)},i:Oe,o:Oe,d(o){o&&te(t),a=!1,i()}}}function Uc(e,t,n){let{label:r}=t,{onClick:a}=t;return e.$$set=i=>{n(2,t=nt(nt({},t),ut(i))),"label"in i&&n(0,r=i.label),"onClick"in i&&n(1,a=i.onClick)},t=ut(t),[r,a,t]}class ei extends qe{constructor(t){super();Xe(this,t,Uc,Fc,je,{label:0,onClick:1})}}function Gc(e){let t,n,r,a,i,o=e[2]?"\u25BC":"\u25BA",u,s,l,d;return{c(){t=Z("div"),n=Z("span"),r=ie(e[0]),a=se(),i=Z("span"),u=ie(o),V(n,"class","underline hover:text-override-fg focus:text-override-neutral-200"),V(i,"class","text-override-yellow"),V(t,"class",s=`${e[3].class}`)},m(c,p){ae(c,t,p),D(t,n),D(n,r),D(t,a),D(t,i),D(i,u),l||(d=uu(t,"click",e[4]),l=!0)},p(c,[p]){p&1&&or(r,c[0]),p&4&&o!==(o=c[2]?"\u25BC":"\u25BA")&&or(u,o),p&8&&s!==(s=`${c[3].class}`)&&V(t,"class",s)},i:Oe,o:Oe,d(c){c&&te(t),l=!1,d()}}}function jc(e,t,n){let r,a=Oe,i=()=>(a(),a=ou(u,l=>n(2,r=l)),u);e.$$.on_destroy.push(()=>a());let{text:o}=t,{show:u}=t;i();const s=()=>{Fe(u,r=!r,r)};return e.$$set=l=>{n(3,t=nt(nt({},t),ut(l))),"text"in l&&n(0,o=l.text),"show"in l&&i(n(1,u=l.show))},t=ut(t),[o,u,r,t,s]}class Io extends qe{constructor(t){super();Xe(this,t,jc,Gc,je,{text:0,show:1})}}const Bc={purple:"#A21CAF",green:"#22C55E",blue:"#00AFCA",yellow:"#FEC604",red:"#BE123C",fg:"#F7F7F7",bg:"#121212",neutral:{50:"#F7F7F7",100:"#E1E1E1",200:"#CFCFCF",300:"#B1B1B1",400:"#9E9E9E",500:"#7E7E7E",600:"#626262",700:"#515151",800:"#3B3B3B",900:"#222222"}},Wc={extend:{animation:{"spin-slow":"spin 4s linear infinite"},gridTemplateColumns:{custom:"repeat(auto-fit, minmax(70px, 1fr))"},colors:{override:Bc}},fontFamily:{sans:["Inter","sans-serif"],mono:"'Source Code Pro', monospace",serif:"'Roboto Slab', serif"}},sn={content:["./index.html","./src/**/*.{svelte,ts}"],theme:Wc,plugins:[]};class fu{static randomRGBA(t){const n=t||.2,r=[an(sn.theme.extend.colors.override.blue).alpha(n).hex("rgba"),an(sn.theme.extend.colors.override.yellow).alpha(n).hex("rgba"),an(sn.theme.extend.colors.override.red).alpha(n).hex("rgba"),an(sn.theme.extend.colors.override.purple).alpha(n).hex("rgba")],a=Math.floor(Math.random()*r.length);return r[a]}static generate(t){let n="";const r=new Set,a=new Set;return[...Array(t)].forEach(()=>{let i=!1;for(;!i;){const o=Math.floor(Math.random()*(t-2)),u=Math.floor(Math.random()*(t-1)),s=`N${o}--N${u}`;o!==u&&!a.has(s)&&(r.add(o),r.add(u),a.add(s),n+=`${s}  [line-width=3,color="${this.randomRGBA()}"]
`,i=!0)}}),r.forEach((i,o)=>{const u=`label="Node with identifier: N${o}"`,s=`color="${this.randomRGBA(.6)}"`;n=`N${o} [${s},${u}]
${n}`}),n=`graph RandomGraph [bundle] {
${n}`,n+="}",{edgeCount:t,nodeCount:r.size,code:n}}}const En=[];function Er(e,t=Oe){let n;const r=new Set;function a(u){if(je(e,u)&&(e=u,n)){const s=!En.length;for(const l of r)l[1](),En.push(l,e);if(s){for(let l=0;l<En.length;l+=2)En[l][0](En[l+1]);En.length=0}}}function i(u){a(u(e))}function o(u,s=Oe){const l=[u,s];return r.add(l),r.size===1&&(n=t(a)||Oe),u(e),()=>{r.delete(l),r.size===0&&(n(),n=null)}}return{set:a,update:i,subscribe:o}}const Vc=50,du=fu.generate(Vc);function Et(e,t){const{subscribe:n,update:r}=Er(t>e.length?0:t);return{subscribe:n,choices:e,set:a=>r(i=>a>e.length?i:a)}}const rn=Er(du.code),So=Er(du),hu=Er(!1),pu=Er(!0),ur=Et([10,20,30,50,75,100,200],3),lr=Et([300,500,700,900,1100,1500],3),On=Et([2,4,6,8,10,12,16,20,30],4),cr=Et(On.choices,3),fr=Et([.001,.005,.01,.05,.1,.2],3),dr=Et([.1,.2,.4,.6,.8,.99],0),hr=Et([.01,.1,.2,.4,.6,.8,.99],1),pr=Et([.1,.2,.3,.5,.8,.99],0),vr=Et([2,3,4,5,6],0),_r=Et([40,50,70,90,110,130],3),gr=Et([.3,.4,.667,.7,.8],3);function Kc(e){let t,n,r,a,i,o,u,s,l,d,c,p,v,_,f,m;return o=new ei({props:{onClick:e[1],label:"Random",type:"primary",class:"bg-override-blue hover:bg-override-blue/75 text-override-bg"}}),s=new ei({props:{onClick:e[2],label:"Refresh",class:"bg-override-yellow hover:bg-override-yellow/75 text-override-bg"}}),d=new ei({props:{onClick:e[3],label:"Submit",class:"bg-override-green hover:bg-override-green/75 text-override-bg"}}),v=new Io({props:{show:hu,text:"syntax help"}}),f=new Io({props:{show:pu,text:"adjust parameters",class:"ml-2"}}),{c(){t=Z("div"),n=Z("textarea"),r=se(),a=Z("div"),i=Z("div"),re(o.$$.fragment),u=se(),re(s.$$.fragment),l=se(),re(d.$$.fragment),c=se(),p=Z("div"),re(v.$$.fragment),_=se(),re(f.$$.fragment),V(n,"id","editor"),V(i,"class","flex"),V(p,"class","flex flex-grow mt-2 cursor-pointer text-override-blue text-xs font-semibold"),V(a,"class","flex flex-col items-center pt-2"),V(t,"class","w-full h-22 mb-2")},m(E,b){ae(E,t,b),D(t,n),e[4](n),D(t,r),D(t,a),D(a,i),Q(o,i,null),D(i,u),Q(s,i,null),D(i,l),Q(d,i,null),D(a,c),D(a,p),Q(v,p,null),D(p,_),Q(f,p,null),m=!0},p:Oe,i(E){m||(Y(o.$$.fragment,E),Y(s.$$.fragment,E),Y(d.$$.fragment,E),Y(v.$$.fragment,E),Y(f.$$.fragment,E),m=!0)},o(E){X(o.$$.fragment,E),X(s.$$.fragment,E),X(d.$$.fragment,E),X(v.$$.fragment,E),X(f.$$.fragment,E),m=!1},d(E){E&&te(t),e[4](null),ee(o),ee(s),ee(d),ee(v),ee(f)}}}function zc(e,t,n){let r,a,i;ye(e,rn,p=>n(6,r=p)),ye(e,So,p=>n(7,a=p)),ye(e,ur,p=>n(8,i=p));let o,u;const s=()=>{const p=ur.choices[i],v=fu.generate(p);Fe(rn,r=v.code,r),Fe(So,a=v,a)},l=()=>{const p=r;Fe(rn,r=void 0,r),Fe(rn,r=p,r)},d=()=>{Fe(rn,r=u.getValue(),r)};yr(()=>{cu(),u=Qr.fromTextArea(o,{theme:"midnight",mode:"arna",value:r,lineNumbers:!0,tabSize:2});try{const p=document.getElementsByClassName("CodeMirror").item(0);p.classList.add("!font-mono"),p.classList.add("!text-sm"),p.classList.add("!font-semibold")}catch{console.warn("Failed to changed editor font. Unable to retrieve CodeMirror editor element.")}}),Ic(()=>{u.getValue()!==r&&u.setValue(r)});function c(p){Bt[p?"unshift":"push"](()=>{o=p,n(0,o)})}return[o,s,l,d,c]}class Hc extends qe{constructor(t){super();Xe(this,t,zc,Kc,je,{})}}var Zt={},$i={},Li={},Tr={};Object.defineProperty(Tr,"__esModule",{value:!0});Tr.VERSION=void 0;Tr.VERSION="10.1.2";var rt={},Yc=Object.prototype;function Xc(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||Yc;return e===n}var Ar=Xc;function qc(e,t){return function(n){return e(t(n))}}var vu=qc,Zc=vu,Jc=Zc(Object.keys,Object),Qc=Jc,ef=Ar,tf=Qc,nf=Object.prototype,rf=nf.hasOwnProperty;function af(e){if(!ef(e))return tf(e);var t=[];for(var n in Object(e))rf.call(e,n)&&n!="constructor"&&t.push(n);return t}var _u=af,of=typeof k=="object"&&k&&k.Object===Object&&k,gu=of,sf=gu,uf=typeof self=="object"&&self&&self.Object===Object&&self,lf=sf||uf||Function("return this")(),It=lf,cf=It,ff=cf.Symbol,kn=ff,No=kn,mu=Object.prototype,df=mu.hasOwnProperty,hf=mu.toString,Yn=No?No.toStringTag:void 0;function pf(e){var t=df.call(e,Yn),n=e[Yn];try{e[Yn]=void 0;var r=!0}catch{}var a=hf.call(e);return r&&(t?e[Yn]=n:delete e[Yn]),a}var vf=pf,_f=Object.prototype,gf=_f.toString;function mf(e){return gf.call(e)}var yf=mf,Po=kn,Ef=vf,Tf=yf,Af="[object Null]",bf="[object Undefined]",Co=Po?Po.toStringTag:void 0;function Of(e){return e==null?e===void 0?bf:Af:Co&&Co in Object(e)?Ef(e):Tf(e)}var dn=Of;function Rf(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var St=Rf,If=dn,Sf=St,Nf="[object AsyncFunction]",Pf="[object Function]",Cf="[object GeneratorFunction]",$f="[object Proxy]";function Lf(e){if(!Sf(e))return!1;var t=If(e);return t==Pf||t==Cf||t==Nf||t==$f}var br=Lf,kf=It,Mf=kf["__core-js_shared__"],wf=Mf,ti=wf,$o=function(){var e=/[^.]+$/.exec(ti&&ti.keys&&ti.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function xf(e){return!!$o&&$o in e}var Df=xf,Ff=Function.prototype,Uf=Ff.toString;function Gf(e){if(e!=null){try{return Uf.call(e)}catch{}try{return e+""}catch{}}return""}var yu=Gf,jf=br,Bf=Df,Wf=St,Vf=yu,Kf=/[\\^$.*+?()[\]{}|]/g,zf=/^\[object .+?Constructor\]$/,Hf=Function.prototype,Yf=Object.prototype,Xf=Hf.toString,qf=Yf.hasOwnProperty,Zf=RegExp("^"+Xf.call(qf).replace(Kf,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Jf(e){if(!Wf(e)||Bf(e))return!1;var t=jf(e)?Zf:zf;return t.test(Vf(e))}var Qf=Jf;function ed(e,t){return e==null?void 0:e[t]}var td=ed,nd=Qf,rd=td;function ad(e,t){var n=rd(e,t);return nd(n)?n:void 0}var hn=ad,id=hn,od=It,sd=id(od,"DataView"),ud=sd,ld=hn,cd=It,fd=ld(cd,"Map"),ki=fd,dd=hn,hd=It,pd=dd(hd,"Promise"),vd=pd,_d=hn,gd=It,md=_d(gd,"Set"),Eu=md,yd=hn,Ed=It,Td=yd(Ed,"WeakMap"),Ad=Td,pi=ud,vi=ki,_i=vd,gi=Eu,mi=Ad,Tu=dn,Mn=yu,Lo="[object Map]",bd="[object Object]",ko="[object Promise]",Mo="[object Set]",wo="[object WeakMap]",xo="[object DataView]",Od=Mn(pi),Rd=Mn(vi),Id=Mn(_i),Sd=Mn(gi),Nd=Mn(mi),nn=Tu;(pi&&nn(new pi(new ArrayBuffer(1)))!=xo||vi&&nn(new vi)!=Lo||_i&&nn(_i.resolve())!=ko||gi&&nn(new gi)!=Mo||mi&&nn(new mi)!=wo)&&(nn=function(e){var t=Tu(e),n=t==bd?e.constructor:void 0,r=n?Mn(n):"";if(r)switch(r){case Od:return xo;case Rd:return Lo;case Id:return ko;case Sd:return Mo;case Nd:return wo}return t});var Or=nn;function Pd(e){return e!=null&&typeof e=="object"}var Nt=Pd,Cd=dn,$d=Nt,Ld="[object Arguments]";function kd(e){return $d(e)&&Cd(e)==Ld}var Md=kd,Do=Md,wd=Nt,Au=Object.prototype,xd=Au.hasOwnProperty,Dd=Au.propertyIsEnumerable,Fd=Do(function(){return arguments}())?Do:function(e){return wd(e)&&xd.call(e,"callee")&&!Dd.call(e,"callee")},ua=Fd,Ud=Array.isArray,me=Ud,Gd=9007199254740991;function jd(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Gd}var Mi=jd,Bd=br,Wd=Mi;function Vd(e){return e!=null&&Wd(e.length)&&!Bd(e)}var Pt=Vd,Rn={exports:{}};function Kd(){return!1}var zd=Kd;(function(e,t){var n=It,r=zd,a=t&&!t.nodeType&&t,i=a&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===a,u=o?n.Buffer:void 0,s=u?u.isBuffer:void 0,l=s||r;e.exports=l})(Rn,Rn.exports);var Hd=dn,Yd=Mi,Xd=Nt,qd="[object Arguments]",Zd="[object Array]",Jd="[object Boolean]",Qd="[object Date]",eh="[object Error]",th="[object Function]",nh="[object Map]",rh="[object Number]",ah="[object Object]",ih="[object RegExp]",oh="[object Set]",sh="[object String]",uh="[object WeakMap]",lh="[object ArrayBuffer]",ch="[object DataView]",fh="[object Float32Array]",dh="[object Float64Array]",hh="[object Int8Array]",ph="[object Int16Array]",vh="[object Int32Array]",_h="[object Uint8Array]",gh="[object Uint8ClampedArray]",mh="[object Uint16Array]",yh="[object Uint32Array]",be={};be[fh]=be[dh]=be[hh]=be[ph]=be[vh]=be[_h]=be[gh]=be[mh]=be[yh]=!0;be[qd]=be[Zd]=be[lh]=be[Jd]=be[ch]=be[Qd]=be[eh]=be[th]=be[nh]=be[rh]=be[ah]=be[ih]=be[oh]=be[sh]=be[uh]=!1;function Eh(e){return Xd(e)&&Yd(e.length)&&!!be[Hd(e)]}var Th=Eh;function Ah(e){return function(t){return e(t)}}var Rr=Ah,In={exports:{}};(function(e,t){var n=gu,r=t&&!t.nodeType&&t,a=r&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===r,o=i&&n.process,u=function(){try{var s=a&&a.require&&a.require("util").types;return s||o&&o.binding&&o.binding("util")}catch{}}();e.exports=u})(In,In.exports);var bh=Th,Oh=Rr,Fo=In.exports,Uo=Fo&&Fo.isTypedArray,Rh=Uo?Oh(Uo):bh,wi=Rh,Ih=_u,Sh=Or,Nh=ua,Ph=me,Ch=Pt,$h=Rn.exports,Lh=Ar,kh=wi,Mh="[object Map]",wh="[object Set]",xh=Object.prototype,Dh=xh.hasOwnProperty;function Fh(e){if(e==null)return!0;if(Ch(e)&&(Ph(e)||typeof e=="string"||typeof e.splice=="function"||$h(e)||kh(e)||Nh(e)))return!e.length;var t=Sh(e);if(t==Mh||t==wh)return!e.size;if(Lh(e))return!Ih(e).length;for(var n in e)if(Dh.call(e,n))return!1;return!0}var Ct=Fh;function Uh(e,t){for(var n=-1,r=e==null?0:e.length,a=Array(r);++n<r;)a[n]=t(e[n],n,e);return a}var Ir=Uh;function Gh(){this.__data__=[],this.size=0}var jh=Gh;function Bh(e,t){return e===t||e!==e&&t!==t}var Sr=Bh,Wh=Sr;function Vh(e,t){for(var n=e.length;n--;)if(Wh(e[n][0],t))return n;return-1}var la=Vh,Kh=la,zh=Array.prototype,Hh=zh.splice;function Yh(e){var t=this.__data__,n=Kh(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():Hh.call(t,n,1),--this.size,!0}var Xh=Yh,qh=la;function Zh(e){var t=this.__data__,n=qh(t,e);return n<0?void 0:t[n][1]}var Jh=Zh,Qh=la;function ep(e){return Qh(this.__data__,e)>-1}var tp=ep,np=la;function rp(e,t){var n=this.__data__,r=np(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var ap=rp,ip=jh,op=Xh,sp=Jh,up=tp,lp=ap;function wn(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}wn.prototype.clear=ip;wn.prototype.delete=op;wn.prototype.get=sp;wn.prototype.has=up;wn.prototype.set=lp;var ca=wn,cp=ca;function fp(){this.__data__=new cp,this.size=0}var dp=fp;function hp(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var pp=hp;function vp(e){return this.__data__.get(e)}var _p=vp;function gp(e){return this.__data__.has(e)}var mp=gp,yp=hn,Ep=yp(Object,"create"),fa=Ep,Go=fa;function Tp(){this.__data__=Go?Go(null):{},this.size=0}var Ap=Tp;function bp(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Op=bp,Rp=fa,Ip="__lodash_hash_undefined__",Sp=Object.prototype,Np=Sp.hasOwnProperty;function Pp(e){var t=this.__data__;if(Rp){var n=t[e];return n===Ip?void 0:n}return Np.call(t,e)?t[e]:void 0}var Cp=Pp,$p=fa,Lp=Object.prototype,kp=Lp.hasOwnProperty;function Mp(e){var t=this.__data__;return $p?t[e]!==void 0:kp.call(t,e)}var wp=Mp,xp=fa,Dp="__lodash_hash_undefined__";function Fp(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=xp&&t===void 0?Dp:t,this}var Up=Fp,Gp=Ap,jp=Op,Bp=Cp,Wp=wp,Vp=Up;function xn(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}xn.prototype.clear=Gp;xn.prototype.delete=jp;xn.prototype.get=Bp;xn.prototype.has=Wp;xn.prototype.set=Vp;var Kp=xn,jo=Kp,zp=ca,Hp=ki;function Yp(){this.size=0,this.__data__={hash:new jo,map:new(Hp||zp),string:new jo}}var Xp=Yp;function qp(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var Zp=qp,Jp=Zp;function Qp(e,t){var n=e.__data__;return Jp(t)?n[typeof t=="string"?"string":"hash"]:n.map}var da=Qp,ev=da;function tv(e){var t=ev(this,e).delete(e);return this.size-=t?1:0,t}var nv=tv,rv=da;function av(e){return rv(this,e).get(e)}var iv=av,ov=da;function sv(e){return ov(this,e).has(e)}var uv=sv,lv=da;function cv(e,t){var n=lv(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var fv=cv,dv=Xp,hv=nv,pv=iv,vv=uv,_v=fv;function Dn(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Dn.prototype.clear=dv;Dn.prototype.delete=hv;Dn.prototype.get=pv;Dn.prototype.has=vv;Dn.prototype.set=_v;var xi=Dn,gv=ca,mv=ki,yv=xi,Ev=200;function Tv(e,t){var n=this.__data__;if(n instanceof gv){var r=n.__data__;if(!mv||r.length<Ev-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new yv(r)}return n.set(e,t),this.size=n.size,this}var Av=Tv,bv=ca,Ov=dp,Rv=pp,Iv=_p,Sv=mp,Nv=Av;function Fn(e){var t=this.__data__=new bv(e);this.size=t.size}Fn.prototype.clear=Ov;Fn.prototype.delete=Rv;Fn.prototype.get=Iv;Fn.prototype.has=Sv;Fn.prototype.set=Nv;var Di=Fn,Pv="__lodash_hash_undefined__";function Cv(e){return this.__data__.set(e,Pv),this}var $v=Cv;function Lv(e){return this.__data__.has(e)}var kv=Lv,Mv=xi,wv=$v,xv=kv;function na(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new Mv;++t<n;)this.add(e[t])}na.prototype.add=na.prototype.push=wv;na.prototype.has=xv;var Fi=na;function Dv(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var bu=Dv;function Fv(e,t){return e.has(t)}var Ui=Fv,Uv=Fi,Gv=bu,jv=Ui,Bv=1,Wv=2;function Vv(e,t,n,r,a,i){var o=n&Bv,u=e.length,s=t.length;if(u!=s&&!(o&&s>u))return!1;var l=i.get(e),d=i.get(t);if(l&&d)return l==t&&d==e;var c=-1,p=!0,v=n&Wv?new Uv:void 0;for(i.set(e,t),i.set(t,e);++c<u;){var _=e[c],f=t[c];if(r)var m=o?r(f,_,c,t,e,i):r(_,f,c,e,t,i);if(m!==void 0){if(m)continue;p=!1;break}if(v){if(!Gv(t,function(E,b){if(!jv(v,b)&&(_===E||a(_,E,n,r,i)))return v.push(b)})){p=!1;break}}else if(!(_===f||a(_,f,n,r,i))){p=!1;break}}return i.delete(e),i.delete(t),p}var Ou=Vv,Kv=It,zv=Kv.Uint8Array,Ru=zv;function Hv(e){var t=-1,n=Array(e.size);return e.forEach(function(r,a){n[++t]=[a,r]}),n}var Yv=Hv;function Xv(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var Gi=Xv,Bo=kn,Wo=Ru,qv=Sr,Zv=Ou,Jv=Yv,Qv=Gi,e_=1,t_=2,n_="[object Boolean]",r_="[object Date]",a_="[object Error]",i_="[object Map]",o_="[object Number]",s_="[object RegExp]",u_="[object Set]",l_="[object String]",c_="[object Symbol]",f_="[object ArrayBuffer]",d_="[object DataView]",Vo=Bo?Bo.prototype:void 0,ni=Vo?Vo.valueOf:void 0;function h_(e,t,n,r,a,i,o){switch(n){case d_:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case f_:return!(e.byteLength!=t.byteLength||!i(new Wo(e),new Wo(t)));case n_:case r_:case o_:return qv(+e,+t);case a_:return e.name==t.name&&e.message==t.message;case s_:case l_:return e==t+"";case i_:var u=Jv;case u_:var s=r&e_;if(u||(u=Qv),e.size!=t.size&&!s)return!1;var l=o.get(e);if(l)return l==t;r|=t_,o.set(e,t);var d=Zv(u(e),u(t),r,a,i,o);return o.delete(e),d;case c_:if(ni)return ni.call(e)==ni.call(t)}return!1}var p_=h_;function v_(e,t){for(var n=-1,r=t.length,a=e.length;++n<r;)e[a+n]=t[n];return e}var ji=v_,__=ji,g_=me;function m_(e,t,n){var r=t(e);return g_(e)?r:__(r,n(e))}var Iu=m_;function y_(e,t){for(var n=-1,r=e==null?0:e.length,a=0,i=[];++n<r;){var o=e[n];t(o,n,e)&&(i[a++]=o)}return i}var Bi=y_;function E_(){return[]}var Su=E_,T_=Bi,A_=Su,b_=Object.prototype,O_=b_.propertyIsEnumerable,Ko=Object.getOwnPropertySymbols,R_=Ko?function(e){return e==null?[]:(e=Object(e),T_(Ko(e),function(t){return O_.call(e,t)}))}:A_,Wi=R_;function I_(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var S_=I_,N_=9007199254740991,P_=/^(?:0|[1-9]\d*)$/;function C_(e,t){var n=typeof e;return t=t==null?N_:t,!!t&&(n=="number"||n!="symbol"&&P_.test(e))&&e>-1&&e%1==0&&e<t}var ha=C_,$_=S_,L_=ua,k_=me,M_=Rn.exports,w_=ha,x_=wi,D_=Object.prototype,F_=D_.hasOwnProperty;function U_(e,t){var n=k_(e),r=!n&&L_(e),a=!n&&!r&&M_(e),i=!n&&!r&&!a&&x_(e),o=n||r||a||i,u=o?$_(e.length,String):[],s=u.length;for(var l in e)(t||F_.call(e,l))&&!(o&&(l=="length"||a&&(l=="offset"||l=="parent")||i&&(l=="buffer"||l=="byteLength"||l=="byteOffset")||w_(l,s)))&&u.push(l);return u}var Nu=U_,G_=Nu,j_=_u,B_=Pt;function W_(e){return B_(e)?G_(e):j_(e)}var lt=W_,V_=Iu,K_=Wi,z_=lt;function H_(e){return V_(e,z_,K_)}var Pu=H_,zo=Pu,Y_=1,X_=Object.prototype,q_=X_.hasOwnProperty;function Z_(e,t,n,r,a,i){var o=n&Y_,u=zo(e),s=u.length,l=zo(t),d=l.length;if(s!=d&&!o)return!1;for(var c=s;c--;){var p=u[c];if(!(o?p in t:q_.call(t,p)))return!1}var v=i.get(e),_=i.get(t);if(v&&_)return v==t&&_==e;var f=!0;i.set(e,t),i.set(t,e);for(var m=o;++c<s;){p=u[c];var E=e[p],b=t[p];if(r)var A=o?r(b,E,p,t,e,i):r(E,b,p,e,t,i);if(!(A===void 0?E===b||a(E,b,n,r,i):A)){f=!1;break}m||(m=p=="constructor")}if(f&&!m){var S=e.constructor,$=t.constructor;S!=$&&"constructor"in e&&"constructor"in t&&!(typeof S=="function"&&S instanceof S&&typeof $=="function"&&$ instanceof $)&&(f=!1)}return i.delete(e),i.delete(t),f}var J_=Z_,ri=Di,Q_=Ou,eg=p_,tg=J_,Ho=Or,Yo=me,Xo=Rn.exports,ng=wi,rg=1,qo="[object Arguments]",Zo="[object Array]",Vr="[object Object]",ag=Object.prototype,Jo=ag.hasOwnProperty;function ig(e,t,n,r,a,i){var o=Yo(e),u=Yo(t),s=o?Zo:Ho(e),l=u?Zo:Ho(t);s=s==qo?Vr:s,l=l==qo?Vr:l;var d=s==Vr,c=l==Vr,p=s==l;if(p&&Xo(e)){if(!Xo(t))return!1;o=!0,d=!1}if(p&&!d)return i||(i=new ri),o||ng(e)?Q_(e,t,n,r,a,i):eg(e,t,s,n,r,a,i);if(!(n&rg)){var v=d&&Jo.call(e,"__wrapped__"),_=c&&Jo.call(t,"__wrapped__");if(v||_){var f=v?e.value():e,m=_?t.value():t;return i||(i=new ri),a(f,m,n,r,i)}}return p?(i||(i=new ri),tg(e,t,n,r,a,i)):!1}var og=ig,sg=og,Qo=Nt;function Cu(e,t,n,r,a){return e===t?!0:e==null||t==null||!Qo(e)&&!Qo(t)?e!==e&&t!==t:sg(e,t,n,r,Cu,a)}var $u=Cu,ug=Di,lg=$u,cg=1,fg=2;function dg(e,t,n,r){var a=n.length,i=a,o=!r;if(e==null)return!i;for(e=Object(e);a--;){var u=n[a];if(o&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++a<i;){u=n[a];var s=u[0],l=e[s],d=u[1];if(o&&u[2]){if(l===void 0&&!(s in e))return!1}else{var c=new ug;if(r)var p=r(l,d,s,e,t,c);if(!(p===void 0?lg(d,l,cg|fg,r,c):p))return!1}}return!0}var hg=dg,pg=St;function vg(e){return e===e&&!pg(e)}var Lu=vg,_g=Lu,gg=lt;function mg(e){for(var t=gg(e),n=t.length;n--;){var r=t[n],a=e[r];t[n]=[r,a,_g(a)]}return t}var yg=mg;function Eg(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}var ku=Eg,Tg=hg,Ag=yg,bg=ku;function Og(e){var t=Ag(e);return t.length==1&&t[0][2]?bg(t[0][0],t[0][1]):function(n){return n===e||Tg(n,e,t)}}var Rg=Og,Ig=dn,Sg=Nt,Ng="[object Symbol]";function Pg(e){return typeof e=="symbol"||Sg(e)&&Ig(e)==Ng}var pa=Pg,Cg=me,$g=pa,Lg=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,kg=/^\w*$/;function Mg(e,t){if(Cg(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||$g(e)?!0:kg.test(e)||!Lg.test(e)||t!=null&&e in Object(t)}var Vi=Mg,Mu=xi,wg="Expected a function";function Ki(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(wg);var n=function(){var r=arguments,a=t?t.apply(this,r):r[0],i=n.cache;if(i.has(a))return i.get(a);var o=e.apply(this,r);return n.cache=i.set(a,o)||i,o};return n.cache=new(Ki.Cache||Mu),n}Ki.Cache=Mu;var xg=Ki,Dg=xg,Fg=500;function Ug(e){var t=Dg(e,function(r){return n.size===Fg&&n.clear(),r}),n=t.cache;return t}var Gg=Ug,jg=Gg,Bg=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Wg=/\\(\\)?/g,Vg=jg(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Bg,function(n,r,a,i){t.push(a?i.replace(Wg,"$1"):r||n)}),t}),Kg=Vg,es=kn,zg=Ir,Hg=me,Yg=pa,Xg=1/0,ts=es?es.prototype:void 0,ns=ts?ts.toString:void 0;function wu(e){if(typeof e=="string")return e;if(Hg(e))return zg(e,wu)+"";if(Yg(e))return ns?ns.call(e):"";var t=e+"";return t=="0"&&1/e==-Xg?"-0":t}var qg=wu,Zg=qg;function Jg(e){return e==null?"":Zg(e)}var xu=Jg,Qg=me,em=Vi,tm=Kg,nm=xu;function rm(e,t){return Qg(e)?e:em(e,t)?[e]:tm(nm(e))}var va=rm,am=pa,im=1/0;function om(e){if(typeof e=="string"||am(e))return e;var t=e+"";return t=="0"&&1/e==-im?"-0":t}var Nr=om,sm=va,um=Nr;function lm(e,t){t=sm(t,e);for(var n=0,r=t.length;e!=null&&n<r;)e=e[um(t[n++])];return n&&n==r?e:void 0}var zi=lm,cm=zi;function fm(e,t,n){var r=e==null?void 0:cm(e,t);return r===void 0?n:r}var dm=fm;function hm(e,t){return e!=null&&t in Object(e)}var pm=hm,vm=va,_m=ua,gm=me,mm=ha,ym=Mi,Em=Nr;function Tm(e,t,n){t=vm(t,e);for(var r=-1,a=t.length,i=!1;++r<a;){var o=Em(t[r]);if(!(i=e!=null&&n(e,o)))break;e=e[o]}return i||++r!=a?i:(a=e==null?0:e.length,!!a&&ym(a)&&mm(o,a)&&(gm(e)||_m(e)))}var Du=Tm,Am=pm,bm=Du;function Om(e,t){return e!=null&&bm(e,t,Am)}var Rm=Om,Im=$u,Sm=dm,Nm=Rm,Pm=Vi,Cm=Lu,$m=ku,Lm=Nr,km=1,Mm=2;function wm(e,t){return Pm(e)&&Cm(t)?$m(Lm(e),t):function(n){var r=Sm(n,e);return r===void 0&&r===t?Nm(n,e):Im(t,r,km|Mm)}}var xm=wm;function Dm(e){return e}var Pr=Dm;function Fm(e){return function(t){return t==null?void 0:t[e]}}var Um=Fm,Gm=zi;function jm(e){return function(t){return Gm(t,e)}}var Bm=jm,Wm=Um,Vm=Bm,Km=Vi,zm=Nr;function Hm(e){return Km(e)?Wm(zm(e)):Vm(e)}var Ym=Hm,Xm=Rg,qm=xm,Zm=Pr,Jm=me,Qm=Ym;function ey(e){return typeof e=="function"?e:e==null?Zm:typeof e=="object"?Jm(e)?qm(e[0],e[1]):Xm(e):Qm(e)}var $t=ey;function ty(e){return function(t,n,r){for(var a=-1,i=Object(t),o=r(t),u=o.length;u--;){var s=o[e?u:++a];if(n(i[s],s,i)===!1)break}return t}}var ny=ty,ry=ny,ay=ry(),iy=ay,oy=iy,sy=lt;function uy(e,t){return e&&oy(e,t,sy)}var ly=uy,cy=Pt;function fy(e,t){return function(n,r){if(n==null)return n;if(!cy(n))return e(n,r);for(var a=n.length,i=t?a:-1,o=Object(n);(t?i--:++i<a)&&r(o[i],i,o)!==!1;);return n}}var dy=fy,hy=ly,py=dy,vy=py(hy),pn=vy,_y=pn,gy=Pt;function my(e,t){var n=-1,r=gy(e)?Array(e.length):[];return _y(e,function(a,i,o){r[++n]=t(a,i,o)}),r}var yy=my,Ey=Ir,Ty=$t,Ay=yy,by=me;function Oy(e,t){var n=by(e)?Ey:Ay;return n(e,Ty(t))}var et=Oy;function Ry(e,t){for(var n=-1,r=e==null?0:e.length;++n<r&&t(e[n],n,e)!==!1;);return e}var Fu=Ry,Iy=Pr;function Sy(e){return typeof e=="function"?e:Iy}var Ny=Sy,Py=Fu,Cy=pn,$y=Ny,Ly=me;function ky(e,t){var n=Ly(e)?Py:Cy;return n(e,$y(t))}var Be=ky,My=Ir;function wy(e,t){return My(t,function(n){return e[n]})}var xy=wy,Dy=xy,Fy=lt;function Uy(e){return e==null?[]:Dy(e,Fy(e))}var Wt=Uy,Gy=Object.prototype,jy=Gy.hasOwnProperty;function By(e,t){return e!=null&&jy.call(e,t)}var Wy=By,Vy=Wy,Ky=Du;function zy(e,t){return e!=null&&Ky(e,t,Vy)}var ct=zy,Hy=hn,Yy=function(){try{var e=Hy(Object,"defineProperty");return e({},"",{}),e}catch{}}(),Uu=Yy,rs=Uu;function Xy(e,t,n){t=="__proto__"&&rs?rs(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var Hi=Xy,qy=Hi,Zy=Sr,Jy=Object.prototype,Qy=Jy.hasOwnProperty;function eE(e,t,n){var r=e[t];(!(Qy.call(e,t)&&Zy(r,n))||n===void 0&&!(t in e))&&qy(e,t,n)}var _a=eE,tE=_a,nE=Hi;function rE(e,t,n,r){var a=!n;n||(n={});for(var i=-1,o=t.length;++i<o;){var u=t[i],s=r?r(n[u],e[u],u,n,e):void 0;s===void 0&&(s=e[u]),a?nE(n,u,s):tE(n,u,s)}return n}var Cr=rE,aE=Cr,iE=lt;function oE(e,t){return e&&aE(t,iE(t),e)}var sE=oE;function uE(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var lE=uE,cE=St,fE=Ar,dE=lE,hE=Object.prototype,pE=hE.hasOwnProperty;function vE(e){if(!cE(e))return dE(e);var t=fE(e),n=[];for(var r in e)r=="constructor"&&(t||!pE.call(e,r))||n.push(r);return n}var _E=vE,gE=Nu,mE=_E,yE=Pt;function EE(e){return yE(e)?gE(e,!0):mE(e)}var ga=EE,TE=Cr,AE=ga;function bE(e,t){return e&&TE(t,AE(t),e)}var OE=bE,yi={exports:{}};(function(e,t){var n=It,r=t&&!t.nodeType&&t,a=r&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===r,o=i?n.Buffer:void 0,u=o?o.allocUnsafe:void 0;function s(l,d){if(d)return l.slice();var c=l.length,p=u?u(c):new l.constructor(c);return l.copy(p),p}e.exports=s})(yi,yi.exports);function RE(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}var IE=RE,SE=Cr,NE=Wi;function PE(e,t){return SE(e,NE(e),t)}var CE=PE,$E=vu,LE=$E(Object.getPrototypeOf,Object),Gu=LE,kE=ji,ME=Gu,wE=Wi,xE=Su,DE=Object.getOwnPropertySymbols,FE=DE?function(e){for(var t=[];e;)kE(t,wE(e)),e=ME(e);return t}:xE,ju=FE,UE=Cr,GE=ju;function jE(e,t){return UE(e,GE(e),t)}var BE=jE,WE=Iu,VE=ju,KE=ga;function zE(e){return WE(e,KE,VE)}var Bu=zE,HE=Object.prototype,YE=HE.hasOwnProperty;function XE(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&YE.call(e,"index")&&(n.index=e.index,n.input=e.input),n}var qE=XE,as=Ru;function ZE(e){var t=new e.constructor(e.byteLength);return new as(t).set(new as(e)),t}var Yi=ZE,JE=Yi;function QE(e,t){var n=t?JE(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}var eT=QE,tT=/\w*$/;function nT(e){var t=new e.constructor(e.source,tT.exec(e));return t.lastIndex=e.lastIndex,t}var rT=nT,is=kn,os=is?is.prototype:void 0,ss=os?os.valueOf:void 0;function aT(e){return ss?Object(ss.call(e)):{}}var iT=aT,oT=Yi;function sT(e,t){var n=t?oT(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var uT=sT,lT=Yi,cT=eT,fT=rT,dT=iT,hT=uT,pT="[object Boolean]",vT="[object Date]",_T="[object Map]",gT="[object Number]",mT="[object RegExp]",yT="[object Set]",ET="[object String]",TT="[object Symbol]",AT="[object ArrayBuffer]",bT="[object DataView]",OT="[object Float32Array]",RT="[object Float64Array]",IT="[object Int8Array]",ST="[object Int16Array]",NT="[object Int32Array]",PT="[object Uint8Array]",CT="[object Uint8ClampedArray]",$T="[object Uint16Array]",LT="[object Uint32Array]";function kT(e,t,n){var r=e.constructor;switch(t){case AT:return lT(e);case pT:case vT:return new r(+e);case bT:return cT(e,n);case OT:case RT:case IT:case ST:case NT:case PT:case CT:case $T:case LT:return hT(e,n);case _T:return new r;case gT:case ET:return new r(e);case mT:return fT(e);case yT:return new r;case TT:return dT(e)}}var MT=kT,wT=St,us=Object.create,xT=function(){function e(){}return function(t){if(!wT(t))return{};if(us)return us(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),DT=xT,FT=DT,UT=Gu,GT=Ar;function jT(e){return typeof e.constructor=="function"&&!GT(e)?FT(UT(e)):{}}var BT=jT,WT=Or,VT=Nt,KT="[object Map]";function zT(e){return VT(e)&&WT(e)==KT}var HT=zT,YT=HT,XT=Rr,ls=In.exports,cs=ls&&ls.isMap,qT=cs?XT(cs):YT,ZT=qT,JT=Or,QT=Nt,eA="[object Set]";function tA(e){return QT(e)&&JT(e)==eA}var nA=tA,rA=nA,aA=Rr,fs=In.exports,ds=fs&&fs.isSet,iA=ds?aA(ds):rA,oA=iA,sA=Di,uA=Fu,lA=_a,cA=sE,fA=OE,dA=yi.exports,hA=IE,pA=CE,vA=BE,_A=Pu,gA=Bu,mA=Or,yA=qE,EA=MT,TA=BT,AA=me,bA=Rn.exports,OA=ZT,RA=St,IA=oA,SA=lt,NA=ga,PA=1,CA=2,$A=4,Wu="[object Arguments]",LA="[object Array]",kA="[object Boolean]",MA="[object Date]",wA="[object Error]",Vu="[object Function]",xA="[object GeneratorFunction]",DA="[object Map]",FA="[object Number]",Ku="[object Object]",UA="[object RegExp]",GA="[object Set]",jA="[object String]",BA="[object Symbol]",WA="[object WeakMap]",VA="[object ArrayBuffer]",KA="[object DataView]",zA="[object Float32Array]",HA="[object Float64Array]",YA="[object Int8Array]",XA="[object Int16Array]",qA="[object Int32Array]",ZA="[object Uint8Array]",JA="[object Uint8ClampedArray]",QA="[object Uint16Array]",eb="[object Uint32Array]",Ae={};Ae[Wu]=Ae[LA]=Ae[VA]=Ae[KA]=Ae[kA]=Ae[MA]=Ae[zA]=Ae[HA]=Ae[YA]=Ae[XA]=Ae[qA]=Ae[DA]=Ae[FA]=Ae[Ku]=Ae[UA]=Ae[GA]=Ae[jA]=Ae[BA]=Ae[ZA]=Ae[JA]=Ae[QA]=Ae[eb]=!0;Ae[wA]=Ae[Vu]=Ae[WA]=!1;function qr(e,t,n,r,a,i){var o,u=t&PA,s=t&CA,l=t&$A;if(n&&(o=a?n(e,r,a,i):n(e)),o!==void 0)return o;if(!RA(e))return e;var d=AA(e);if(d){if(o=yA(e),!u)return hA(e,o)}else{var c=mA(e),p=c==Vu||c==xA;if(bA(e))return dA(e,u);if(c==Ku||c==Wu||p&&!a){if(o=s||p?{}:TA(e),!u)return s?vA(e,fA(o,e)):pA(e,cA(o,e))}else{if(!Ae[c])return a?e:{};o=EA(e,c,u)}}i||(i=new sA);var v=i.get(e);if(v)return v;i.set(e,o),IA(e)?e.forEach(function(m){o.add(qr(m,t,n,m,e,i))}):OA(e)&&e.forEach(function(m,E){o.set(E,qr(m,t,n,E,e,i))});var _=l?s?gA:_A:s?NA:SA,f=d?void 0:_(e);return uA(f||e,function(m,E){f&&(E=m,m=e[E]),lA(o,E,qr(m,t,n,E,e,i))}),o}var tb=qr,nb=tb,rb=4;function ab(e){return nb(e,rb)}var en=ab,Un={},Sn={};Object.defineProperty(Sn,"__esModule",{value:!0});Sn.PRINT_WARNING=Sn.PRINT_ERROR=void 0;function ib(e){console&&console.error&&console.error("Error: ".concat(e))}Sn.PRINT_ERROR=ib;function ob(e){console&&console.warn&&console.warn("Warning: ".concat(e))}Sn.PRINT_WARNING=ob;var ma={};Object.defineProperty(ma,"__esModule",{value:!0});ma.timer=void 0;function sb(e){var t=new Date().getTime(),n=e(),r=new Date().getTime(),a=r-t;return{time:a,value:n}}ma.timer=sb;var ya={};Object.defineProperty(ya,"__esModule",{value:!0});ya.toFastProperties=void 0;function ub(e){function t(){}t.prototype=e;var n=new t;function r(){return typeof n.bar}return r(),r(),e}ya.toFastProperties=ub;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.toFastProperties=e.timer=e.PRINT_ERROR=e.PRINT_WARNING=void 0;var t=Sn;Object.defineProperty(e,"PRINT_WARNING",{enumerable:!0,get:function(){return t.PRINT_WARNING}}),Object.defineProperty(e,"PRINT_ERROR",{enumerable:!0,get:function(){return t.PRINT_ERROR}});var n=ma;Object.defineProperty(e,"timer",{enumerable:!0,get:function(){return n.timer}});var r=ya;Object.defineProperty(e,"toFastProperties",{enumerable:!0,get:function(){return r.toFastProperties}})})(Un);var bt={},Gn={};function lb(e,t,n){var r=-1,a=e.length;t<0&&(t=-t>a?0:a+t),n=n>a?a:n,n<0&&(n+=a),a=t>n?0:n-t>>>0,t>>>=0;for(var i=Array(a);++r<a;)i[r]=e[r+t];return i}var Xi=lb,cb=/\s/;function fb(e){for(var t=e.length;t--&&cb.test(e.charAt(t)););return t}var db=fb,hb=db,pb=/^\s+/;function vb(e){return e&&e.slice(0,hb(e)+1).replace(pb,"")}var _b=vb,gb=_b,hs=St,mb=pa,ps=0/0,yb=/^[-+]0x[0-9a-f]+$/i,Eb=/^0b[01]+$/i,Tb=/^0o[0-7]+$/i,Ab=parseInt;function bb(e){if(typeof e=="number")return e;if(mb(e))return ps;if(hs(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=hs(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=gb(e);var n=Eb.test(e);return n||Tb.test(e)?Ab(e.slice(2),n?2:8):yb.test(e)?ps:+e}var Ob=bb,Rb=Ob,vs=1/0,Ib=17976931348623157e292;function Sb(e){if(!e)return e===0?e:0;if(e=Rb(e),e===vs||e===-vs){var t=e<0?-1:1;return t*Ib}return e===e?e:0}var Nb=Sb,Pb=Nb;function Cb(e){var t=Pb(e),n=t%1;return t===t?n?t-n:t:0}var $r=Cb,$b=Xi,Lb=$r;function kb(e,t,n){var r=e==null?0:e.length;return r?(t=n||t===void 0?1:Lb(t),$b(e,t<0?0:t,r)):[]}var qi=kb,Le={},_e={},Mb=dn,wb=me,xb=Nt,Db="[object String]";function Fb(e){return typeof e=="string"||!wb(e)&&xb(e)&&Mb(e)==Db}var Ea=Fb,Ub=dn,Gb=Nt,jb="[object RegExp]";function Bb(e){return Gb(e)&&Ub(e)==jb}var Wb=Bb,Vb=Wb,Kb=Rr,_s=In.exports,gs=_s&&_s.isRegExp,zb=gs?Kb(gs):Vb,zu=zb,Hb=_a,Yb=va,Xb=ha,ms=St,qb=Nr;function Zb(e,t,n,r){if(!ms(e))return e;t=Yb(t,e);for(var a=-1,i=t.length,o=i-1,u=e;u!=null&&++a<i;){var s=qb(t[a]),l=n;if(s==="__proto__"||s==="constructor"||s==="prototype")return e;if(a!=o){var d=u[s];l=r?r(d,s,u):void 0,l===void 0&&(l=ms(d)?d:Xb(t[a+1])?[]:{})}Hb(u,s,l),u=u[s]}return e}var Jb=Zb,Qb=zi,e0=Jb,t0=va;function n0(e,t,n){for(var r=-1,a=t.length,i={};++r<a;){var o=t[r],u=Qb(e,o);n(u,o)&&e0(i,t0(o,e),u)}return i}var r0=n0,a0=Ir,i0=$t,o0=r0,s0=Bu;function u0(e,t){if(e==null)return{};var n=a0(s0(e),function(r){return[r]});return t=i0(t),o0(e,n,function(r,a){return t(r,a[0])})}var Hu=u0;function l0(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var c0=l0,f0=c0,ys=Math.max;function d0(e,t,n){return t=ys(t===void 0?e.length-1:t,0),function(){for(var r=arguments,a=-1,i=ys(r.length-t,0),o=Array(i);++a<i;)o[a]=r[t+a];a=-1;for(var u=Array(t+1);++a<t;)u[a]=r[a];return u[t]=n(o),f0(e,this,u)}}var h0=d0;function p0(e){return function(){return e}}var v0=p0,_0=v0,Es=Uu,g0=Pr,m0=Es?function(e,t){return Es(e,"toString",{configurable:!0,enumerable:!1,value:_0(t),writable:!0})}:g0,y0=m0,E0=800,T0=16,A0=Date.now;function b0(e){var t=0,n=0;return function(){var r=A0(),a=T0-(r-n);if(n=r,a>0){if(++t>=E0)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var O0=b0,R0=y0,I0=O0,S0=I0(R0),N0=S0,P0=Pr,C0=h0,$0=N0;function L0(e,t){return $0(C0(e,t,P0),e+"")}var Zi=L0,k0=Sr,M0=Pt,w0=ha,x0=St;function D0(e,t,n){if(!x0(n))return!1;var r=typeof t;return(r=="number"?M0(n)&&w0(t,n.length):r=="string"&&t in n)?k0(n[t],e):!1}var Ta=D0,F0=Zi,U0=Ta;function G0(e){return F0(function(t,n){var r=-1,a=n.length,i=a>1?n[a-1]:void 0,o=a>2?n[2]:void 0;for(i=e.length>3&&typeof i=="function"?(a--,i):void 0,o&&U0(n[0],n[1],o)&&(i=a<3?void 0:i,a=1),t=Object(t);++r<a;){var u=n[r];u&&e(t,u,r,i)}return t})}var j0=G0,B0=_a,W0=Cr,V0=j0,K0=Pt,z0=Ar,H0=lt,Y0=Object.prototype,X0=Y0.hasOwnProperty,q0=V0(function(e,t){if(z0(t)||K0(t)){W0(t,H0(t),e);return}for(var n in t)X0.call(t,n)&&B0(e,n,t[n])}),Aa=q0,Vt=k&&k.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(r[i]=a[i])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),jn=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(_e,"__esModule",{value:!0});_e.serializeProduction=_e.serializeGrammar=_e.Terminal=_e.Alternation=_e.RepetitionWithSeparator=_e.Repetition=_e.RepetitionMandatoryWithSeparator=_e.RepetitionMandatory=_e.Option=_e.Alternative=_e.Rule=_e.NonTerminal=_e.AbstractProduction=void 0;var Yu=jn(et),Z0=jn(Be),Ei=jn(Ea),J0=jn(zu),Lt=jn(Hu),kt=jn(Aa);function Q0(e){return e1(e)?e.LABEL:e.name}function e1(e){return(0,Ei.default)(e.LABEL)&&e.LABEL!==""}var Mt=function(){function e(t){this._definition=t}return Object.defineProperty(e.prototype,"definition",{get:function(){return this._definition},set:function(t){this._definition=t},enumerable:!1,configurable:!0}),e.prototype.accept=function(t){t.visit(this),(0,Z0.default)(this.definition,function(n){n.accept(t)})},e}();_e.AbstractProduction=Mt;var Xu=function(e){Vt(t,e);function t(n){var r=e.call(this,[])||this;return r.idx=1,(0,kt.default)(r,(0,Lt.default)(n,function(a){return a!==void 0})),r}return Object.defineProperty(t.prototype,"definition",{get:function(){return this.referencedRule!==void 0?this.referencedRule.definition:[]},set:function(n){},enumerable:!1,configurable:!0}),t.prototype.accept=function(n){n.visit(this)},t}(Mt);_e.NonTerminal=Xu;var qu=function(e){Vt(t,e);function t(n){var r=e.call(this,n.definition)||this;return r.orgText="",(0,kt.default)(r,(0,Lt.default)(n,function(a){return a!==void 0})),r}return t}(Mt);_e.Rule=qu;var Zu=function(e){Vt(t,e);function t(n){var r=e.call(this,n.definition)||this;return r.ignoreAmbiguities=!1,(0,kt.default)(r,(0,Lt.default)(n,function(a){return a!==void 0})),r}return t}(Mt);_e.Alternative=Zu;var Ju=function(e){Vt(t,e);function t(n){var r=e.call(this,n.definition)||this;return r.idx=1,(0,kt.default)(r,(0,Lt.default)(n,function(a){return a!==void 0})),r}return t}(Mt);_e.Option=Ju;var Qu=function(e){Vt(t,e);function t(n){var r=e.call(this,n.definition)||this;return r.idx=1,(0,kt.default)(r,(0,Lt.default)(n,function(a){return a!==void 0})),r}return t}(Mt);_e.RepetitionMandatory=Qu;var el=function(e){Vt(t,e);function t(n){var r=e.call(this,n.definition)||this;return r.idx=1,(0,kt.default)(r,(0,Lt.default)(n,function(a){return a!==void 0})),r}return t}(Mt);_e.RepetitionMandatoryWithSeparator=el;var tl=function(e){Vt(t,e);function t(n){var r=e.call(this,n.definition)||this;return r.idx=1,(0,kt.default)(r,(0,Lt.default)(n,function(a){return a!==void 0})),r}return t}(Mt);_e.Repetition=tl;var nl=function(e){Vt(t,e);function t(n){var r=e.call(this,n.definition)||this;return r.idx=1,(0,kt.default)(r,(0,Lt.default)(n,function(a){return a!==void 0})),r}return t}(Mt);_e.RepetitionWithSeparator=nl;var rl=function(e){Vt(t,e);function t(n){var r=e.call(this,n.definition)||this;return r.idx=1,r.ignoreAmbiguities=!1,r.hasPredicates=!1,(0,kt.default)(r,(0,Lt.default)(n,function(a){return a!==void 0})),r}return Object.defineProperty(t.prototype,"definition",{get:function(){return this._definition},set:function(n){this._definition=n},enumerable:!1,configurable:!0}),t}(Mt);_e.Alternation=rl;var Zr=function(){function e(t){this.idx=1,(0,kt.default)(this,(0,Lt.default)(t,function(n){return n!==void 0}))}return e.prototype.accept=function(t){t.visit(this)},e}();_e.Terminal=Zr;function t1(e){return(0,Yu.default)(e,nr)}_e.serializeGrammar=t1;function nr(e){function t(i){return(0,Yu.default)(i,nr)}if(e instanceof Xu){var n={type:"NonTerminal",name:e.nonTerminalName,idx:e.idx};return(0,Ei.default)(e.label)&&(n.label=e.label),n}else{if(e instanceof Zu)return{type:"Alternative",definition:t(e.definition)};if(e instanceof Ju)return{type:"Option",idx:e.idx,definition:t(e.definition)};if(e instanceof Qu)return{type:"RepetitionMandatory",idx:e.idx,definition:t(e.definition)};if(e instanceof el)return{type:"RepetitionMandatoryWithSeparator",idx:e.idx,separator:nr(new Zr({terminalType:e.separator})),definition:t(e.definition)};if(e instanceof nl)return{type:"RepetitionWithSeparator",idx:e.idx,separator:nr(new Zr({terminalType:e.separator})),definition:t(e.definition)};if(e instanceof tl)return{type:"Repetition",idx:e.idx,definition:t(e.definition)};if(e instanceof rl)return{type:"Alternation",idx:e.idx,definition:t(e.definition)};if(e instanceof Zr){var r={type:"Terminal",name:e.terminalType.name,label:Q0(e.terminalType),idx:e.idx};(0,Ei.default)(e.label)&&(r.terminalLabel=e.label);var a=e.terminalType.PATTERN;return e.terminalType.PATTERN&&(r.pattern=(0,J0.default)(a)?a.source:a),r}else{if(e instanceof qu)return{type:"Rule",name:e.name,orgText:e.orgText,definition:t(e.definition)};throw Error("non exhaustive match")}}}_e.serializeProduction=nr;var ba={};Object.defineProperty(ba,"__esModule",{value:!0});ba.GAstVisitor=void 0;var Tt=_e,n1=function(){function e(){}return e.prototype.visit=function(t){var n=t;switch(n.constructor){case Tt.NonTerminal:return this.visitNonTerminal(n);case Tt.Alternative:return this.visitAlternative(n);case Tt.Option:return this.visitOption(n);case Tt.RepetitionMandatory:return this.visitRepetitionMandatory(n);case Tt.RepetitionMandatoryWithSeparator:return this.visitRepetitionMandatoryWithSeparator(n);case Tt.RepetitionWithSeparator:return this.visitRepetitionWithSeparator(n);case Tt.Repetition:return this.visitRepetition(n);case Tt.Alternation:return this.visitAlternation(n);case Tt.Terminal:return this.visitTerminal(n);case Tt.Rule:return this.visitRule(n);default:throw Error("non exhaustive match")}},e.prototype.visitNonTerminal=function(t){},e.prototype.visitAlternative=function(t){},e.prototype.visitOption=function(t){},e.prototype.visitRepetition=function(t){},e.prototype.visitRepetitionMandatory=function(t){},e.prototype.visitRepetitionMandatoryWithSeparator=function(t){},e.prototype.visitRepetitionWithSeparator=function(t){},e.prototype.visitAlternation=function(t){},e.prototype.visitTerminal=function(t){},e.prototype.visitRule=function(t){},e}();ba.GAstVisitor=n1;var Ot={},r1=pn;function a1(e,t){var n;return r1(e,function(r,a,i){return n=t(r,a,i),!n}),!!n}var i1=a1,o1=bu,s1=$t,u1=i1,l1=me,c1=Ta;function f1(e,t,n){var r=l1(e)?o1:u1;return n&&c1(e,t,n)&&(t=void 0),r(e,s1(t))}var Ji=f1;function d1(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}var h1=d1,p1=pn;function v1(e,t){var n=!0;return p1(e,function(r,a,i){return n=!!t(r,a,i),n}),n}var _1=v1,g1=h1,m1=_1,y1=$t,E1=me,T1=Ta;function A1(e,t,n){var r=E1(e)?g1:m1;return n&&T1(e,t,n)&&(t=void 0),r(e,y1(t))}var Oa=A1;function b1(e,t,n,r){for(var a=e.length,i=n+(r?1:-1);r?i--:++i<a;)if(t(e[i],i,e))return i;return-1}var al=b1;function O1(e){return e!==e}var R1=O1;function I1(e,t,n){for(var r=n-1,a=e.length;++r<a;)if(e[r]===t)return r;return-1}var S1=I1,N1=al,P1=R1,C1=S1;function $1(e,t,n){return t===t?C1(e,t,n):N1(e,P1,n)}var Qi=$1,L1=Qi,k1=Pt,M1=Ea,w1=$r,x1=Wt,D1=Math.max;function F1(e,t,n,r){e=k1(e)?e:x1(e),n=n&&!r?w1(n):0;var a=e.length;return n<0&&(n=D1(a+n,0)),M1(e)?n<=a&&e.indexOf(t,n)>-1:!!a&&L1(e,t,n)>-1}var Kt=F1,eo=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ot,"__esModule",{value:!0});Ot.getProductionDslName=Ot.isBranchingProd=Ot.isOptionalProd=Ot.isSequenceProd=void 0;var U1=eo(Ji),G1=eo(Oa),j1=eo(Kt),Re=_e;function B1(e){return e instanceof Re.Alternative||e instanceof Re.Option||e instanceof Re.Repetition||e instanceof Re.RepetitionMandatory||e instanceof Re.RepetitionMandatoryWithSeparator||e instanceof Re.RepetitionWithSeparator||e instanceof Re.Terminal||e instanceof Re.Rule}Ot.isSequenceProd=B1;function Ti(e,t){t===void 0&&(t=[]);var n=e instanceof Re.Option||e instanceof Re.Repetition||e instanceof Re.RepetitionWithSeparator;return n?!0:e instanceof Re.Alternation?(0,U1.default)(e.definition,function(r){return Ti(r,t)}):e instanceof Re.NonTerminal&&(0,j1.default)(t,e)?!1:e instanceof Re.AbstractProduction?(e instanceof Re.NonTerminal&&t.push(e),(0,G1.default)(e.definition,function(r){return Ti(r,t)})):!1}Ot.isOptionalProd=Ti;function W1(e){return e instanceof Re.Alternation}Ot.isBranchingProd=W1;function V1(e){if(e instanceof Re.NonTerminal)return"SUBRULE";if(e instanceof Re.Option)return"OPTION";if(e instanceof Re.Alternation)return"OR";if(e instanceof Re.RepetitionMandatory)return"AT_LEAST_ONE";if(e instanceof Re.RepetitionMandatoryWithSeparator)return"AT_LEAST_ONE_SEP";if(e instanceof Re.RepetitionWithSeparator)return"MANY_SEP";if(e instanceof Re.Repetition)return"MANY";if(e instanceof Re.Terminal)return"CONSUME";throw Error("non exhaustive match")}Ot.getProductionDslName=V1;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isSequenceProd=e.isBranchingProd=e.isOptionalProd=e.getProductionDslName=e.GAstVisitor=e.serializeProduction=e.serializeGrammar=e.Alternative=e.Alternation=e.RepetitionWithSeparator=e.RepetitionMandatoryWithSeparator=e.RepetitionMandatory=e.Repetition=e.Option=e.NonTerminal=e.Terminal=e.Rule=void 0;var t=_e;Object.defineProperty(e,"Rule",{enumerable:!0,get:function(){return t.Rule}}),Object.defineProperty(e,"Terminal",{enumerable:!0,get:function(){return t.Terminal}}),Object.defineProperty(e,"NonTerminal",{enumerable:!0,get:function(){return t.NonTerminal}}),Object.defineProperty(e,"Option",{enumerable:!0,get:function(){return t.Option}}),Object.defineProperty(e,"Repetition",{enumerable:!0,get:function(){return t.Repetition}}),Object.defineProperty(e,"RepetitionMandatory",{enumerable:!0,get:function(){return t.RepetitionMandatory}}),Object.defineProperty(e,"RepetitionMandatoryWithSeparator",{enumerable:!0,get:function(){return t.RepetitionMandatoryWithSeparator}}),Object.defineProperty(e,"RepetitionWithSeparator",{enumerable:!0,get:function(){return t.RepetitionWithSeparator}}),Object.defineProperty(e,"Alternation",{enumerable:!0,get:function(){return t.Alternation}}),Object.defineProperty(e,"Alternative",{enumerable:!0,get:function(){return t.Alternative}}),Object.defineProperty(e,"serializeGrammar",{enumerable:!0,get:function(){return t.serializeGrammar}}),Object.defineProperty(e,"serializeProduction",{enumerable:!0,get:function(){return t.serializeProduction}});var n=ba;Object.defineProperty(e,"GAstVisitor",{enumerable:!0,get:function(){return n.GAstVisitor}});var r=Ot;Object.defineProperty(e,"getProductionDslName",{enumerable:!0,get:function(){return r.getProductionDslName}}),Object.defineProperty(e,"isOptionalProd",{enumerable:!0,get:function(){return r.isOptionalProd}}),Object.defineProperty(e,"isBranchingProd",{enumerable:!0,get:function(){return r.isBranchingProd}}),Object.defineProperty(e,"isSequenceProd",{enumerable:!0,get:function(){return r.isSequenceProd}})})(Le);var il=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Gn,"__esModule",{value:!0});Gn.RestWalker=void 0;var K1=il(qi),Ts=il(Be),Qe=Le,z1=function(){function e(){}return e.prototype.walk=function(t,n){var r=this;n===void 0&&(n=[]),(0,Ts.default)(t.definition,function(a,i){var o=(0,K1.default)(t.definition,i+1);if(a instanceof Qe.NonTerminal)r.walkProdRef(a,o,n);else if(a instanceof Qe.Terminal)r.walkTerminal(a,o,n);else if(a instanceof Qe.Alternative)r.walkFlat(a,o,n);else if(a instanceof Qe.Option)r.walkOption(a,o,n);else if(a instanceof Qe.RepetitionMandatory)r.walkAtLeastOne(a,o,n);else if(a instanceof Qe.RepetitionMandatoryWithSeparator)r.walkAtLeastOneSep(a,o,n);else if(a instanceof Qe.RepetitionWithSeparator)r.walkManySep(a,o,n);else if(a instanceof Qe.Repetition)r.walkMany(a,o,n);else if(a instanceof Qe.Alternation)r.walkOr(a,o,n);else throw Error("non exhaustive match")})},e.prototype.walkTerminal=function(t,n,r){},e.prototype.walkProdRef=function(t,n,r){},e.prototype.walkFlat=function(t,n,r){var a=n.concat(r);this.walk(t,a)},e.prototype.walkOption=function(t,n,r){var a=n.concat(r);this.walk(t,a)},e.prototype.walkAtLeastOne=function(t,n,r){var a=[new Qe.Option({definition:t.definition})].concat(n,r);this.walk(t,a)},e.prototype.walkAtLeastOneSep=function(t,n,r){var a=As(t,n,r);this.walk(t,a)},e.prototype.walkMany=function(t,n,r){var a=[new Qe.Option({definition:t.definition})].concat(n,r);this.walk(t,a)},e.prototype.walkManySep=function(t,n,r){var a=As(t,n,r);this.walk(t,a)},e.prototype.walkOr=function(t,n,r){var a=this,i=n.concat(r);(0,Ts.default)(t.definition,function(o){var u=new Qe.Alternative({definition:[o]});a.walk(u,i)})},e}();Gn.RestWalker=z1;function As(e,t,n){var r=[new Qe.Option({definition:[new Qe.Terminal({terminalType:e.separator})].concat(e.definition)})],a=r.concat(t,n);return a}var yt={},bs=kn,H1=ua,Y1=me,Os=bs?bs.isConcatSpreadable:void 0;function X1(e){return Y1(e)||H1(e)||!!(Os&&e&&e[Os])}var q1=X1,Z1=ji,J1=q1;function ol(e,t,n,r,a){var i=-1,o=e.length;for(n||(n=J1),a||(a=[]);++i<o;){var u=e[i];t>0&&n(u)?t>1?ol(u,t-1,n,r,a):Z1(a,u):r||(a[a.length]=u)}return a}var to=ol,Q1=to;function eO(e){var t=e==null?0:e.length;return t?Q1(e,1):[]}var zt=eO,tO=Qi;function nO(e,t){var n=e==null?0:e.length;return!!n&&tO(e,t,0)>-1}var sl=nO;function rO(e,t,n){for(var r=-1,a=e==null?0:e.length;++r<a;)if(n(t,e[r]))return!0;return!1}var ul=rO;function aO(){}var no=aO,ai=Eu,iO=no,oO=Gi,sO=1/0,uO=ai&&1/oO(new ai([,-0]))[1]==sO?function(e){return new ai(e)}:iO,lO=uO,cO=Fi,fO=sl,dO=ul,hO=Ui,pO=lO,vO=Gi,_O=200;function gO(e,t,n){var r=-1,a=fO,i=e.length,o=!0,u=[],s=u;if(n)o=!1,a=dO;else if(i>=_O){var l=t?null:pO(e);if(l)return vO(l);o=!1,a=hO,s=new cO}else s=t?[]:u;e:for(;++r<i;){var d=e[r],c=t?t(d):d;if(d=n||d!==0?d:0,o&&c===c){for(var p=s.length;p--;)if(s[p]===c)continue e;t&&s.push(c),u.push(d)}else a(s,c,n)||(s!==u&&s.push(c),u.push(d))}return u}var mO=gO,yO=mO;function EO(e){return e&&e.length?yO(e):[]}var ro=EO,ao=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(yt,"__esModule",{value:!0});yt.firstForTerminal=yt.firstForBranching=yt.firstForSequence=yt.first=void 0;var TO=ao(zt),ll=ao(ro),AO=ao(et),Rs=Le,Ai=Le;function Ra(e){if(e instanceof Rs.NonTerminal)return Ra(e.referencedRule);if(e instanceof Rs.Terminal)return dl(e);if((0,Ai.isSequenceProd)(e))return cl(e);if((0,Ai.isBranchingProd)(e))return fl(e);throw Error("non exhaustive match")}yt.first=Ra;function cl(e){for(var t=[],n=e.definition,r=0,a=n.length>r,i,o=!0;a&&o;)i=n[r],o=(0,Ai.isOptionalProd)(i),t=t.concat(Ra(i)),r=r+1,a=n.length>r;return(0,ll.default)(t)}yt.firstForSequence=cl;function fl(e){var t=(0,AO.default)(e.definition,function(n){return Ra(n)});return(0,ll.default)((0,TO.default)(t))}yt.firstForBranching=fl;function dl(e){return[e.terminalType]}yt.firstForTerminal=dl;var Lr={};Object.defineProperty(Lr,"__esModule",{value:!0});Lr.IN=void 0;Lr.IN="_~IN~_";var bO=k&&k.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(r[i]=a[i])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),hl=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(bt,"__esModule",{value:!0});bt.buildInProdFollowPrefix=bt.buildBetweenProdsFollowPrefix=bt.computeAllProdsFollows=bt.ResyncFollowsWalker=void 0;var OO=Gn,RO=yt,IO=hl(Be),SO=hl(Aa),pl=Lr,NO=Le,vl=function(e){bO(t,e);function t(n){var r=e.call(this)||this;return r.topProd=n,r.follows={},r}return t.prototype.startWalking=function(){return this.walk(this.topProd),this.follows},t.prototype.walkTerminal=function(n,r,a){},t.prototype.walkProdRef=function(n,r,a){var i=_l(n.referencedRule,n.idx)+this.topProd.name,o=r.concat(a),u=new NO.Alternative({definition:o}),s=(0,RO.first)(u);this.follows[i]=s},t}(OO.RestWalker);bt.ResyncFollowsWalker=vl;function PO(e){var t={};return(0,IO.default)(e,function(n){var r=new vl(n).startWalking();(0,SO.default)(t,r)}),t}bt.computeAllProdsFollows=PO;function _l(e,t){return e.name+t+pl.IN}bt.buildBetweenProdsFollowPrefix=_l;function CO(e){var t=e.terminalType.name;return t+e.idx+pl.IN}bt.buildInProdFollowPrefix=CO;var vn={};function $O(e){return e===void 0}var Bn=$O,kr={},io={},Ia={exports:{}};(function(e){(function(t,n){e.exports?e.exports=n():t.regexpToAst=n()})(typeof self!="undefined"?self:k,function(){function t(){}t.prototype.saveState=function(){return{idx:this.idx,input:this.input,groupIdx:this.groupIdx}},t.prototype.restoreState=function(f){this.idx=f.idx,this.input=f.input,this.groupIdx=f.groupIdx},t.prototype.pattern=function(f){this.idx=0,this.input=f,this.groupIdx=0,this.consumeChar("/");var m=this.disjunction();this.consumeChar("/");for(var E={type:"Flags",loc:{begin:this.idx,end:f.length},global:!1,ignoreCase:!1,multiLine:!1,unicode:!1,sticky:!1};this.isRegExpFlag();)switch(this.popChar()){case"g":u(E,"global");break;case"i":u(E,"ignoreCase");break;case"m":u(E,"multiLine");break;case"u":u(E,"unicode");break;case"y":u(E,"sticky");break}if(this.idx!==this.input.length)throw Error("Redundant input: "+this.input.substring(this.idx));return{type:"Pattern",flags:E,value:m,loc:this.loc(0)}},t.prototype.disjunction=function(){var f=[],m=this.idx;for(f.push(this.alternative());this.peekChar()==="|";)this.consumeChar("|"),f.push(this.alternative());return{type:"Disjunction",value:f,loc:this.loc(m)}},t.prototype.alternative=function(){for(var f=[],m=this.idx;this.isTerm();)f.push(this.term());return{type:"Alternative",value:f,loc:this.loc(m)}},t.prototype.term=function(){return this.isAssertion()?this.assertion():this.atom()},t.prototype.assertion=function(){var f=this.idx;switch(this.popChar()){case"^":return{type:"StartAnchor",loc:this.loc(f)};case"$":return{type:"EndAnchor",loc:this.loc(f)};case"\\":switch(this.popChar()){case"b":return{type:"WordBoundary",loc:this.loc(f)};case"B":return{type:"NonWordBoundary",loc:this.loc(f)}}throw Error("Invalid Assertion Escape");case"(":this.consumeChar("?");var m;switch(this.popChar()){case"=":m="Lookahead";break;case"!":m="NegativeLookahead";break}s(m);var E=this.disjunction();return this.consumeChar(")"),{type:m,value:E,loc:this.loc(f)}}l()},t.prototype.quantifier=function(f){var m,E=this.idx;switch(this.popChar()){case"*":m={atLeast:0,atMost:1/0};break;case"+":m={atLeast:1,atMost:1/0};break;case"?":m={atLeast:0,atMost:1};break;case"{":var b=this.integerIncludingZero();switch(this.popChar()){case"}":m={atLeast:b,atMost:b};break;case",":var A;this.isDigit()?(A=this.integerIncludingZero(),m={atLeast:b,atMost:A}):m={atLeast:b,atMost:1/0},this.consumeChar("}");break}if(f===!0&&m===void 0)return;s(m);break}if(!(f===!0&&m===void 0))return s(m),this.peekChar(0)==="?"?(this.consumeChar("?"),m.greedy=!1):m.greedy=!0,m.type="Quantifier",m.loc=this.loc(E),m},t.prototype.atom=function(){var f,m=this.idx;switch(this.peekChar()){case".":f=this.dotAll();break;case"\\":f=this.atomEscape();break;case"[":f=this.characterClass();break;case"(":f=this.group();break}return f===void 0&&this.isPatternCharacter()&&(f=this.patternCharacter()),s(f),f.loc=this.loc(m),this.isQuantifier()&&(f.quantifier=this.quantifier()),f},t.prototype.dotAll=function(){return this.consumeChar("."),{type:"Set",complement:!0,value:[i(`
`),i("\r"),i("\u2028"),i("\u2029")]}},t.prototype.atomEscape=function(){switch(this.consumeChar("\\"),this.peekChar()){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return this.decimalEscapeAtom();case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}},t.prototype.decimalEscapeAtom=function(){var f=this.positiveInteger();return{type:"GroupBackReference",value:f}},t.prototype.characterClassEscape=function(){var f,m=!1;switch(this.popChar()){case"d":f=c;break;case"D":f=c,m=!0;break;case"s":f=v;break;case"S":f=v,m=!0;break;case"w":f=p;break;case"W":f=p,m=!0;break}return s(f),{type:"Set",value:f,complement:m}},t.prototype.controlEscapeAtom=function(){var f;switch(this.popChar()){case"f":f=i("\f");break;case"n":f=i(`
`);break;case"r":f=i("\r");break;case"t":f=i("	");break;case"v":f=i("\v");break}return s(f),{type:"Character",value:f}},t.prototype.controlLetterEscapeAtom=function(){this.consumeChar("c");var f=this.popChar();if(/[a-zA-Z]/.test(f)===!1)throw Error("Invalid ");var m=f.toUpperCase().charCodeAt(0)-64;return{type:"Character",value:m}},t.prototype.nulCharacterAtom=function(){return this.consumeChar("0"),{type:"Character",value:i("\0")}},t.prototype.hexEscapeSequenceAtom=function(){return this.consumeChar("x"),this.parseHexDigits(2)},t.prototype.regExpUnicodeEscapeSequenceAtom=function(){return this.consumeChar("u"),this.parseHexDigits(4)},t.prototype.identityEscapeAtom=function(){var f=this.popChar();return{type:"Character",value:i(f)}},t.prototype.classPatternCharacterAtom=function(){switch(this.peekChar()){case`
`:case"\r":case"\u2028":case"\u2029":case"\\":case"]":throw Error("TBD");default:var f=this.popChar();return{type:"Character",value:i(f)}}},t.prototype.characterClass=function(){var f=[],m=!1;for(this.consumeChar("["),this.peekChar(0)==="^"&&(this.consumeChar("^"),m=!0);this.isClassAtom();){var E=this.classAtom(),b=E.type==="Character";if(b&&this.isRangeDash()){this.consumeChar("-");var A=this.classAtom(),S=A.type==="Character";if(S){if(A.value<E.value)throw Error("Range out of order in character class");f.push({from:E.value,to:A.value})}else o(E.value,f),f.push(i("-")),o(A.value,f)}else o(E.value,f)}return this.consumeChar("]"),{type:"Set",complement:m,value:f}},t.prototype.classAtom=function(){switch(this.peekChar()){case"]":case`
`:case"\r":case"\u2028":case"\u2029":throw Error("TBD");case"\\":return this.classEscape();default:return this.classPatternCharacterAtom()}},t.prototype.classEscape=function(){switch(this.consumeChar("\\"),this.peekChar()){case"b":return this.consumeChar("b"),{type:"Character",value:i("\b")};case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}},t.prototype.group=function(){var f=!0;switch(this.consumeChar("("),this.peekChar(0)){case"?":this.consumeChar("?"),this.consumeChar(":"),f=!1;break;default:this.groupIdx++;break}var m=this.disjunction();this.consumeChar(")");var E={type:"Group",capturing:f,value:m};return f&&(E.idx=this.groupIdx),E},t.prototype.positiveInteger=function(){var f=this.popChar();if(a.test(f)===!1)throw Error("Expecting a positive integer");for(;r.test(this.peekChar(0));)f+=this.popChar();return parseInt(f,10)},t.prototype.integerIncludingZero=function(){var f=this.popChar();if(r.test(f)===!1)throw Error("Expecting an integer");for(;r.test(this.peekChar(0));)f+=this.popChar();return parseInt(f,10)},t.prototype.patternCharacter=function(){var f=this.popChar();switch(f){case`
`:case"\r":case"\u2028":case"\u2029":case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":throw Error("TBD");default:return{type:"Character",value:i(f)}}},t.prototype.isRegExpFlag=function(){switch(this.peekChar(0)){case"g":case"i":case"m":case"u":case"y":return!0;default:return!1}},t.prototype.isRangeDash=function(){return this.peekChar()==="-"&&this.isClassAtom(1)},t.prototype.isDigit=function(){return r.test(this.peekChar(0))},t.prototype.isClassAtom=function(f){switch(f===void 0&&(f=0),this.peekChar(f)){case"]":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}},t.prototype.isTerm=function(){return this.isAtom()||this.isAssertion()},t.prototype.isAtom=function(){if(this.isPatternCharacter())return!0;switch(this.peekChar(0)){case".":case"\\":case"[":case"(":return!0;default:return!1}},t.prototype.isAssertion=function(){switch(this.peekChar(0)){case"^":case"$":return!0;case"\\":switch(this.peekChar(1)){case"b":case"B":return!0;default:return!1}case"(":return this.peekChar(1)==="?"&&(this.peekChar(2)==="="||this.peekChar(2)==="!");default:return!1}},t.prototype.isQuantifier=function(){var f=this.saveState();try{return this.quantifier(!0)!==void 0}catch{return!1}finally{this.restoreState(f)}},t.prototype.isPatternCharacter=function(){switch(this.peekChar()){case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":case"/":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}},t.prototype.parseHexDigits=function(f){for(var m="",E=0;E<f;E++){var b=this.popChar();if(n.test(b)===!1)throw Error("Expecting a HexDecimal digits");m+=b}var A=parseInt(m,16);return{type:"Character",value:A}},t.prototype.peekChar=function(f){return f===void 0&&(f=0),this.input[this.idx+f]},t.prototype.popChar=function(){var f=this.peekChar(0);return this.consumeChar(),f},t.prototype.consumeChar=function(f){if(f!==void 0&&this.input[this.idx]!==f)throw Error("Expected: '"+f+"' but found: '"+this.input[this.idx]+"' at offset: "+this.idx);if(this.idx>=this.input.length)throw Error("Unexpected end of input");this.idx++},t.prototype.loc=function(f){return{begin:f,end:this.idx}};var n=/[0-9a-fA-F]/,r=/[0-9]/,a=/[1-9]/;function i(f){return f.charCodeAt(0)}function o(f,m){f.length!==void 0?f.forEach(function(E){m.push(E)}):m.push(f)}function u(f,m){if(f[m]===!0)throw"duplicate flag "+m;f[m]=!0}function s(f){if(f===void 0)throw Error("Internal Error - Should never get here!")}function l(){throw Error("Internal Error - Should never get here!")}var d,c=[];for(d=i("0");d<=i("9");d++)c.push(d);var p=[i("_")].concat(c);for(d=i("a");d<=i("z");d++)p.push(d);for(d=i("A");d<=i("Z");d++)p.push(d);var v=[i(" "),i("\f"),i(`
`),i("\r"),i("	"),i("\v"),i("	"),i("\xA0"),i("\u1680"),i("\u2000"),i("\u2001"),i("\u2002"),i("\u2003"),i("\u2004"),i("\u2005"),i("\u2006"),i("\u2007"),i("\u2008"),i("\u2009"),i("\u200A"),i("\u2028"),i("\u2029"),i("\u202F"),i("\u205F"),i("\u3000"),i("\uFEFF")];function _(){}return _.prototype.visitChildren=function(f){for(var m in f){var E=f[m];f.hasOwnProperty(m)&&(E.type!==void 0?this.visit(E):Array.isArray(E)&&E.forEach(function(b){this.visit(b)},this))}},_.prototype.visit=function(f){switch(f.type){case"Pattern":this.visitPattern(f);break;case"Flags":this.visitFlags(f);break;case"Disjunction":this.visitDisjunction(f);break;case"Alternative":this.visitAlternative(f);break;case"StartAnchor":this.visitStartAnchor(f);break;case"EndAnchor":this.visitEndAnchor(f);break;case"WordBoundary":this.visitWordBoundary(f);break;case"NonWordBoundary":this.visitNonWordBoundary(f);break;case"Lookahead":this.visitLookahead(f);break;case"NegativeLookahead":this.visitNegativeLookahead(f);break;case"Character":this.visitCharacter(f);break;case"Set":this.visitSet(f);break;case"Group":this.visitGroup(f);break;case"GroupBackReference":this.visitGroupBackReference(f);break;case"Quantifier":this.visitQuantifier(f);break}this.visitChildren(f)},_.prototype.visitPattern=function(f){},_.prototype.visitFlags=function(f){},_.prototype.visitDisjunction=function(f){},_.prototype.visitAlternative=function(f){},_.prototype.visitStartAnchor=function(f){},_.prototype.visitEndAnchor=function(f){},_.prototype.visitWordBoundary=function(f){},_.prototype.visitNonWordBoundary=function(f){},_.prototype.visitLookahead=function(f){},_.prototype.visitNegativeLookahead=function(f){},_.prototype.visitCharacter=function(f){},_.prototype.visitSet=function(f){},_.prototype.visitGroup=function(f){},_.prototype.visitGroupBackReference=function(f){},_.prototype.visitQuantifier=function(f){},{RegExpParser:t,BaseRegExpVisitor:_,VERSION:"0.5.0"}})})(Ia);function LO(e){return e&&e.length?e[0]:void 0}var kO=LO,Mr=kO;function MO(e){for(var t=-1,n=e==null?0:e.length,r=0,a=[];++t<n;){var i=e[t];i&&(a[r++]=i)}return a}var Sa=MO,wO=pn;function xO(e,t){var n=[];return wO(e,function(r,a,i){t(r,a,i)&&n.push(r)}),n}var gl=xO,DO="Expected a function";function FO(e){if(typeof e!="function")throw new TypeError(DO);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}var UO=FO,GO=Bi,jO=gl,BO=$t,WO=me,VO=UO;function KO(e,t){var n=WO(e)?GO:jO;return n(e,VO(BO(t)))}var oo=KO,zO=Fi,HO=sl,YO=ul,XO=Ir,qO=Rr,ZO=Ui,JO=200;function QO(e,t,n,r){var a=-1,i=HO,o=!0,u=e.length,s=[],l=t.length;if(!u)return s;n&&(t=XO(t,qO(n))),r?(i=YO,o=!1):t.length>=JO&&(i=ZO,o=!1,t=new zO(t));e:for(;++a<u;){var d=e[a],c=n==null?d:n(d);if(d=r||d!==0?d:0,o&&c===c){for(var p=l;p--;)if(t[p]===c)continue e;s.push(d)}else i(t,c,r)||s.push(d)}return s}var eR=QO,tR=Pt,nR=Nt;function rR(e){return nR(e)&&tR(e)}var aR=rR,iR=eR,oR=to,sR=Zi,Is=aR,uR=sR(function(e,t){return Is(e)?iR(e,oR(t,1,Is,!0)):[]}),so=uR,lR=Qi,cR=$r,fR=Math.max;function dR(e,t,n){var r=e==null?0:e.length;if(!r)return-1;var a=n==null?0:cR(n);return a<0&&(a=fR(r+a,0)),lR(e,t,a)}var hR=dR,pR=$t,vR=Pt,_R=lt;function gR(e){return function(t,n,r){var a=Object(t);if(!vR(t)){var i=pR(n);t=_R(t),n=function(u){return i(a[u],u,a)}}var o=e(t,n,r);return o>-1?a[i?t[o]:o]:void 0}}var mR=gR,yR=al,ER=$t,TR=$r,AR=Math.max;function bR(e,t,n){var r=e==null?0:e.length;if(!r)return-1;var a=n==null?0:TR(n);return a<0&&(a=AR(r+a,0)),yR(e,ER(t),a)}var OR=bR,RR=mR,IR=OR,SR=RR(IR),uo=SR,NR=Bi,PR=gl,CR=$t,$R=me;function LR(e,t){var n=$R(e)?NR:PR;return n(e,CR(t))}var lo=LR,kR=Zi,MR=Sr,wR=Ta,xR=ga,ml=Object.prototype,DR=ml.hasOwnProperty,FR=kR(function(e,t){e=Object(e);var n=-1,r=t.length,a=r>2?t[2]:void 0;for(a&&wR(t[0],t[1],a)&&(r=1);++n<r;)for(var i=t[n],o=xR(i),u=-1,s=o.length;++u<s;){var l=o[u],d=e[l];(d===void 0||MR(d,ml[l])&&!DR.call(e,l))&&(e[l]=i[l])}return e}),yl=FR;function UR(e,t,n,r){var a=-1,i=e==null?0:e.length;for(r&&i&&(n=e[++a]);++a<i;)n=t(n,e[a],a,e);return n}var GR=UR;function jR(e,t,n,r,a){return a(e,function(i,o,u){n=r?(r=!1,i):t(n,i,o,u)}),n}var BR=jR,WR=GR,VR=pn,KR=$t,zR=BR,HR=me;function YR(e,t,n){var r=HR(e)?WR:zR,a=arguments.length<3;return r(e,KR(t),n,a,VR)}var _n=YR,El={},Qt={};Object.defineProperty(Qt,"__esModule",{value:!0});Qt.clearRegExpParserCache=Qt.getRegExpAst=void 0;var XR=Ia.exports,Jr={},qR=new XR.RegExpParser;function ZR(e){var t=e.toString();if(Jr.hasOwnProperty(t))return Jr[t];var n=qR.pattern(t);return Jr[t]=n,n}Qt.getRegExpAst=ZR;function JR(){Jr={}}Qt.clearRegExpParserCache=JR;(function(e){var t=k&&k.__extends||function(){var y=function(g,T){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,I){h.__proto__=I}||function(h,I){for(var U in I)Object.prototype.hasOwnProperty.call(I,U)&&(h[U]=I[U])},y(g,T)};return function(g,T){if(typeof T!="function"&&T!==null)throw new TypeError("Class extends value "+String(T)+" is not a constructor or null");y(g,T);function h(){this.constructor=g}g.prototype=T===null?Object.create(T):(h.prototype=T.prototype,new h)}}(),n=k&&k.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(e,"__esModule",{value:!0}),e.canMatchCharCode=e.firstCharOptimizedIndices=e.getOptimizedStartCodesIndices=e.failedOptimizationPrefixMsg=void 0;var r=Ia.exports,a=n(me),i=n(Oa),o=n(Be),u=n(uo),s=n(Wt),l=n(Kt),d=Un,c=Qt,p=io,v="Complement Sets are not supported for first char optimization";e.failedOptimizationPrefixMsg=`Unable to use "first char" lexer optimizations:
`;function _(y,g){g===void 0&&(g=!1);try{var T=(0,c.getRegExpAst)(y),h=f(T.value,{},T.flags.ignoreCase);return h}catch(U){if(U.message===v)g&&(0,d.PRINT_WARNING)("".concat(e.failedOptimizationPrefixMsg)+"	Unable to optimize: < ".concat(y.toString(),` >
`)+`	Complement Sets cannot be automatically optimized.
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#COMPLEMENT for details.`);else{var I="";g&&(I=`
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#REGEXP_PARSING for details.`),(0,d.PRINT_ERROR)("".concat(e.failedOptimizationPrefixMsg,`
`)+"	Failed parsing: < ".concat(y.toString(),` >
`)+"	Using the regexp-to-ast library version: ".concat(r.VERSION,`
`)+"	Please open an issue at: https://github.com/bd82/regexp-to-ast/issues"+I)}}return[]}e.getOptimizedStartCodesIndices=_;function f(y,g,T){switch(y.type){case"Disjunction":for(var h=0;h<y.value.length;h++)f(y.value[h],g,T);break;case"Alternative":for(var I=y.value,h=0;h<I.length;h++){var U=I[h];switch(U.type){case"EndAnchor":case"GroupBackReference":case"Lookahead":case"NegativeLookahead":case"StartAnchor":case"WordBoundary":case"NonWordBoundary":continue}var K=U;switch(K.type){case"Character":m(K.value,g,T);break;case"Set":if(K.complement===!0)throw Error(v);(0,o.default)(K.value,function(B){if(typeof B=="number")m(B,g,T);else{var O=B;if(T===!0)for(var P=O.from;P<=O.to;P++)m(P,g,T);else{for(var P=O.from;P<=O.to&&P<p.minOptimizationVal;P++)m(P,g,T);if(O.to>=p.minOptimizationVal)for(var N=O.from>=p.minOptimizationVal?O.from:p.minOptimizationVal,G=O.to,j=(0,p.charCodeToOptimizedIndex)(N),W=(0,p.charCodeToOptimizedIndex)(G),ue=j;ue<=W;ue++)g[ue]=ue}}});break;case"Group":f(K.value,g,T);break;default:throw Error("Non Exhaustive Match")}var w=K.quantifier!==void 0&&K.quantifier.atLeast===0;if(K.type==="Group"&&A(K)===!1||K.type!=="Group"&&w===!1)break}break;default:throw Error("non exhaustive match!")}return(0,s.default)(g)}e.firstCharOptimizedIndices=f;function m(y,g,T){var h=(0,p.charCodeToOptimizedIndex)(y);g[h]=h,T===!0&&E(y,g)}function E(y,g){var T=String.fromCharCode(y),h=T.toUpperCase();if(h!==T){var I=(0,p.charCodeToOptimizedIndex)(h.charCodeAt(0));g[I]=I}else{var U=T.toLowerCase();if(U!==T){var I=(0,p.charCodeToOptimizedIndex)(U.charCodeAt(0));g[I]=I}}}function b(y,g){return(0,u.default)(y.value,function(T){if(typeof T=="number")return(0,l.default)(g,T);var h=T;return(0,u.default)(g,function(I){return h.from<=I&&I<=h.to})!==void 0})}function A(y){var g=y.quantifier;return g&&g.atLeast===0?!0:y.value?(0,a.default)(y.value)?(0,i.default)(y.value,A):A(y.value):!1}var S=function(y){t(g,y);function g(T){var h=y.call(this)||this;return h.targetCharCodes=T,h.found=!1,h}return g.prototype.visitChildren=function(T){if(this.found!==!0){switch(T.type){case"Lookahead":this.visitLookahead(T);return;case"NegativeLookahead":this.visitNegativeLookahead(T);return}y.prototype.visitChildren.call(this,T)}},g.prototype.visitCharacter=function(T){(0,l.default)(this.targetCharCodes,T.value)&&(this.found=!0)},g.prototype.visitSet=function(T){T.complement?b(T,this.targetCharCodes)===void 0&&(this.found=!0):b(T,this.targetCharCodes)!==void 0&&(this.found=!0)},g}(r.BaseRegExpVisitor);function $(y,g){if(g instanceof RegExp){var T=(0,c.getRegExpAst)(g),h=new S(y);return h.visit(T),h.found}else return(0,u.default)(g,function(I){return(0,l.default)(y,I.charCodeAt(0))})!==void 0}e.canMatchCharCode=$})(El);(function(e){var t=k&&k.__extends||function(){var L=function(M,F){return L=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(R,C){R.__proto__=C}||function(R,C){for(var H in C)Object.prototype.hasOwnProperty.call(C,H)&&(R[H]=C[H])},L(M,F)};return function(M,F){if(typeof F!="function"&&F!==null)throw new TypeError("Class extends value "+String(F)+" is not a constructor or null");L(M,F);function R(){this.constructor=M}M.prototype=F===null?Object.create(F):(R.prototype=F.prototype,new R)}}(),n=k&&k.__importDefault||function(L){return L&&L.__esModule?L:{default:L}};Object.defineProperty(e,"__esModule",{value:!0}),e.charCodeToOptimizedIndex=e.minOptimizationVal=e.buildLineBreakIssueMessage=e.LineTerminatorOptimizedTester=e.isShortPattern=e.isCustomPattern=e.cloneEmptyGroups=e.performWarningRuntimeChecks=e.performRuntimeChecks=e.addStickyFlag=e.addStartOfInput=e.findUnreachablePatterns=e.findModesThatDoNotExist=e.findInvalidGroupType=e.findDuplicatePatterns=e.findUnsupportedFlags=e.findStartOfInputAnchor=e.findEmptyMatchRegExps=e.findEndOfInputAnchor=e.findInvalidPatterns=e.findMissingPatterns=e.validatePatterns=e.analyzeTokenTypes=e.enableSticky=e.disableSticky=e.SUPPORT_STICKY=e.MODES=e.DEFAULT_MODE=void 0;var r=Ia.exports,a=kr,i=n(Mr),o=n(Ct),u=n(Sa),s=n(me),l=n(Wt),d=n(zt),c=n(oo),p=n(so),v=n(hR),_=n(et),f=n(Be),m=n(Ea),E=n(br),b=n(Bn),A=n(uo),S=n(ct),$=n(lt),y=n(zu),g=n(lo),T=n(yl),h=n(_n),I=n(Kt),U=Un,K=El,w=Qt,x="PATTERN";e.DEFAULT_MODE="defaultMode",e.MODES="modes",e.SUPPORT_STICKY=typeof new RegExp("(?:)").sticky=="boolean";function B(){e.SUPPORT_STICKY=!1}e.disableSticky=B;function O(){e.SUPPORT_STICKY=!0}e.enableSticky=O;function P(L,M){M=(0,T.default)(M,{useSticky:e.SUPPORT_STICKY,debug:!1,safeMode:!1,positionTracking:"full",lineTerminatorCharacters:["\r",`
`],tracer:function(fe,z){return z()}});var F=M.tracer;F("initCharCodeToOptimizedIndexMap",function(){Ce()});var R;F("Reject Lexer.NA",function(){R=(0,c.default)(L,function(fe){return fe[x]===a.Lexer.NA})});var C=!1,H;F("Transform Patterns",function(){C=!1,H=(0,_.default)(R,function(fe){var z=fe[x];if((0,y.default)(z)){var we=z.source;return we.length===1&&we!=="^"&&we!=="$"&&we!=="."&&!z.ignoreCase?we:we.length===2&&we[0]==="\\"&&!(0,I.default)(["d","D","s","S","t","r","n","t","0","c","b","B","f","v","w","W"],we[1])?we[1]:M.useSticky?at(z):Se(z)}else{if((0,E.default)(z))return C=!0,{exec:z};if(typeof z=="object")return C=!0,z;if(typeof z=="string"){if(z.length===1)return z;var zn=z.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),Br=new RegExp(zn);return M.useSticky?at(Br):Se(Br)}else throw Error("non exhaustive match")}})});var oe,pe,Te,Ve,pt;F("misc mapping",function(){oe=(0,_.default)(R,function(fe){return fe.tokenTypeIdx}),pe=(0,_.default)(R,function(fe){var z=fe.GROUP;if(z!==a.Lexer.SKIPPED){if((0,m.default)(z))return z;if((0,b.default)(z))return!1;throw Error("non exhaustive match")}}),Te=(0,_.default)(R,function(fe){var z=fe.LONGER_ALT;if(z){var we=(0,s.default)(z)?(0,_.default)(z,function(zn){return(0,v.default)(R,zn)}):[(0,v.default)(R,z)];return we}}),Ve=(0,_.default)(R,function(fe){return fe.PUSH_MODE}),pt=(0,_.default)(R,function(fe){return(0,S.default)(fe,"POP_MODE")})});var it;F("Line Terminator Handling",function(){var fe=Yt(M.lineTerminatorCharacters);it=(0,_.default)(R,function(z){return!1}),M.positionTracking!=="onlyOffset"&&(it=(0,_.default)(R,function(z){return(0,S.default)(z,"LINE_BREAKS")?!!z.LINE_BREAKS:Ht(z,fe)===!1&&(0,K.canMatchCharCode)(fe,z.PATTERN)}))});var Xt,qt,vt,ot;F("Misc Mapping #2",function(){Xt=(0,_.default)(R,Ze),qt=(0,_.default)(H,We),vt=(0,h.default)(R,function(fe,z){var we=z.GROUP;return(0,m.default)(we)&&we!==a.Lexer.SKIPPED&&(fe[we]=[]),fe},{}),ot=(0,_.default)(H,function(fe,z){return{pattern:H[z],longerAlt:Te[z],canLineTerminator:it[z],isCustom:Xt[z],short:qt[z],group:pe[z],push:Ve[z],pop:pt[z],tokenTypeIdx:oe[z],tokenType:R[z]}})});var $e=!0,_t=[];return M.safeMode||F("First Char Optimization",function(){_t=(0,h.default)(R,function(fe,z,we){if(typeof z.PATTERN=="string"){var zn=z.PATTERN.charCodeAt(0),Br=Ft(zn);Dt(fe,Br,ot[we])}else if((0,s.default)(z.START_CHARS_HINT)){var bo;(0,f.default)(z.START_CHARS_HINT,function(Hn){var yc=typeof Hn=="string"?Hn.charCodeAt(0):Hn,Za=Ft(yc);bo!==Za&&(bo=Za,Dt(fe,Za,ot[we]))})}else if((0,y.default)(z.PATTERN))if(z.PATTERN.unicode)$e=!1,M.ensureOptimizations&&(0,U.PRINT_ERROR)("".concat(K.failedOptimizationPrefixMsg)+"	Unable to analyze < ".concat(z.PATTERN.toString(),` > pattern.
`)+`	The regexp unicode flag is not currently supported by the regexp-to-ast library.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNICODE_OPTIMIZE`);else{var Oo=(0,K.getOptimizedStartCodesIndices)(z.PATTERN,M.ensureOptimizations);(0,o.default)(Oo)&&($e=!1),(0,f.default)(Oo,function(Hn){Dt(fe,Hn,ot[we])})}else M.ensureOptimizations&&(0,U.PRINT_ERROR)("".concat(K.failedOptimizationPrefixMsg)+"	TokenType: <".concat(z.name,`> is using a custom token pattern without providing <start_chars_hint> parameter.
`)+`	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_OPTIMIZE`),$e=!1;return fe},[])}),{emptyGroups:vt,patternIdxToConfig:ot,charCodeToPatternIdxToConfig:_t,hasCustom:C,canBeOptimized:$e}}e.analyzeTokenTypes=P;function N(L,M){var F=[],R=j(L);F=F.concat(R.errors);var C=W(R.valid),H=C.valid;return F=F.concat(C.errors),F=F.concat(G(H)),F=F.concat(Pe(H)),F=F.concat(Ee(H,M)),F=F.concat(xe(H)),F}e.validatePatterns=N;function G(L){var M=[],F=(0,g.default)(L,function(R){return(0,y.default)(R[x])});return M=M.concat(de(F)),M=M.concat(le(F)),M=M.concat(q(F)),M=M.concat(he(F)),M=M.concat(ne(F)),M}function j(L){var M=(0,g.default)(L,function(C){return!(0,S.default)(C,x)}),F=(0,_.default)(M,function(C){return{message:"Token Type: ->"+C.name+"<- missing static 'PATTERN' property",type:a.LexerDefinitionErrorType.MISSING_PATTERN,tokenTypes:[C]}}),R=(0,p.default)(L,M);return{errors:F,valid:R}}e.findMissingPatterns=j;function W(L){var M=(0,g.default)(L,function(C){var H=C[x];return!(0,y.default)(H)&&!(0,E.default)(H)&&!(0,S.default)(H,"exec")&&!(0,m.default)(H)}),F=(0,_.default)(M,function(C){return{message:"Token Type: ->"+C.name+"<- static 'PATTERN' can only be a RegExp, a Function matching the {CustomPatternMatcherFunc} type or an Object matching the {ICustomPattern} interface.",type:a.LexerDefinitionErrorType.INVALID_PATTERN,tokenTypes:[C]}}),R=(0,p.default)(L,M);return{errors:F,valid:R}}e.findInvalidPatterns=W;var ue=/[^\\][$]/;function de(L){var M=function(C){t(H,C);function H(){var oe=C!==null&&C.apply(this,arguments)||this;return oe.found=!1,oe}return H.prototype.visitEndAnchor=function(oe){this.found=!0},H}(r.BaseRegExpVisitor),F=(0,g.default)(L,function(C){var H=C.PATTERN;try{var oe=(0,w.getRegExpAst)(H),pe=new M;return pe.visit(oe),pe.found}catch{return ue.test(H.source)}}),R=(0,_.default)(F,function(C){return{message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+C.name+`<- static 'PATTERN' cannot contain end of input anchor '$'
	See chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:a.LexerDefinitionErrorType.EOI_ANCHOR_FOUND,tokenTypes:[C]}});return R}e.findEndOfInputAnchor=de;function ne(L){var M=(0,g.default)(L,function(R){var C=R.PATTERN;return C.test("")}),F=(0,_.default)(M,function(R){return{message:"Token Type: ->"+R.name+"<- static 'PATTERN' must not match an empty string",type:a.LexerDefinitionErrorType.EMPTY_MATCH_PATTERN,tokenTypes:[R]}});return F}e.findEmptyMatchRegExps=ne;var J=/[^\\[][\^]|^\^/;function le(L){var M=function(C){t(H,C);function H(){var oe=C!==null&&C.apply(this,arguments)||this;return oe.found=!1,oe}return H.prototype.visitStartAnchor=function(oe){this.found=!0},H}(r.BaseRegExpVisitor),F=(0,g.default)(L,function(C){var H=C.PATTERN;try{var oe=(0,w.getRegExpAst)(H),pe=new M;return pe.visit(oe),pe.found}catch{return J.test(H.source)}}),R=(0,_.default)(F,function(C){return{message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+C.name+`<- static 'PATTERN' cannot contain start of input anchor '^'
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:a.LexerDefinitionErrorType.SOI_ANCHOR_FOUND,tokenTypes:[C]}});return R}e.findStartOfInputAnchor=le;function q(L){var M=(0,g.default)(L,function(R){var C=R[x];return C instanceof RegExp&&(C.multiline||C.global)}),F=(0,_.default)(M,function(R){return{message:"Token Type: ->"+R.name+"<- static 'PATTERN' may NOT contain global('g') or multiline('m')",type:a.LexerDefinitionErrorType.UNSUPPORTED_FLAGS_FOUND,tokenTypes:[R]}});return F}e.findUnsupportedFlags=q;function he(L){var M=[],F=(0,_.default)(L,function(H){return(0,h.default)(L,function(oe,pe){return H.PATTERN.source===pe.PATTERN.source&&!(0,I.default)(M,pe)&&pe.PATTERN!==a.Lexer.NA&&(M.push(pe),oe.push(pe)),oe},[])});F=(0,u.default)(F);var R=(0,g.default)(F,function(H){return H.length>1}),C=(0,_.default)(R,function(H){var oe=(0,_.default)(H,function(Te){return Te.name}),pe=(0,i.default)(H).PATTERN;return{message:"The same RegExp pattern ->".concat(pe,"<-")+"has been used in all of the following Token Types: ".concat(oe.join(", ")," <-"),type:a.LexerDefinitionErrorType.DUPLICATE_PATTERNS_FOUND,tokenTypes:H}});return C}e.findDuplicatePatterns=he;function Pe(L){var M=(0,g.default)(L,function(R){if(!(0,S.default)(R,"GROUP"))return!1;var C=R.GROUP;return C!==a.Lexer.SKIPPED&&C!==a.Lexer.NA&&!(0,m.default)(C)}),F=(0,_.default)(M,function(R){return{message:"Token Type: ->"+R.name+"<- static 'GROUP' can only be Lexer.SKIPPED/Lexer.NA/A String",type:a.LexerDefinitionErrorType.INVALID_GROUP_TYPE_FOUND,tokenTypes:[R]}});return F}e.findInvalidGroupType=Pe;function Ee(L,M){var F=(0,g.default)(L,function(C){return C.PUSH_MODE!==void 0&&!(0,I.default)(M,C.PUSH_MODE)}),R=(0,_.default)(F,function(C){var H="Token Type: ->".concat(C.name,"<- static 'PUSH_MODE' value cannot refer to a Lexer Mode ->").concat(C.PUSH_MODE,"<-")+"which does not exist";return{message:H,type:a.LexerDefinitionErrorType.PUSH_MODE_DOES_NOT_EXIST,tokenTypes:[C]}});return R}e.findModesThatDoNotExist=Ee;function xe(L){var M=[],F=(0,h.default)(L,function(R,C,H){var oe=C.PATTERN;return oe===a.Lexer.NA||((0,m.default)(oe)?R.push({str:oe,idx:H,tokenType:C}):(0,y.default)(oe)&&Me(oe)&&R.push({str:oe.source,idx:H,tokenType:C})),R},[]);return(0,f.default)(L,function(R,C){(0,f.default)(F,function(H){var oe=H.str,pe=H.idx,Te=H.tokenType;if(C<pe&&Ie(oe,R.PATTERN)){var Ve="Token: ->".concat(Te.name,`<- can never be matched.
`)+"Because it appears AFTER the Token Type ->".concat(R.name,"<-")+`in the lexer's definition.
See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNREACHABLE`;M.push({message:Ve,type:a.LexerDefinitionErrorType.UNREACHABLE_PATTERN,tokenTypes:[R,Te]})}})}),M}e.findUnreachablePatterns=xe;function Ie(L,M){if((0,y.default)(M)){var F=M.exec(L);return F!==null&&F.index===0}else{if((0,E.default)(M))return M(L,0,[],{});if((0,S.default)(M,"exec"))return M.exec(L,0,[],{});if(typeof M=="string")return M===L;throw Error("non exhaustive match")}}function Me(L){var M=[".","\\","[","]","|","^","$","(",")","?","*","+","{"];return(0,A.default)(M,function(F){return L.source.indexOf(F)!==-1})===void 0}function Se(L){var M=L.ignoreCase?"i":"";return new RegExp("^(?:".concat(L.source,")"),M)}e.addStartOfInput=Se;function at(L){var M=L.ignoreCase?"iy":"y";return new RegExp("".concat(L.source),M)}e.addStickyFlag=at;function Ue(L,M,F){var R=[];return(0,S.default)(L,e.DEFAULT_MODE)||R.push({message:"A MultiMode Lexer cannot be initialized without a <"+e.DEFAULT_MODE+`> property in its definition
`,type:a.LexerDefinitionErrorType.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE}),(0,S.default)(L,e.MODES)||R.push({message:"A MultiMode Lexer cannot be initialized without a <"+e.MODES+`> property in its definition
`,type:a.LexerDefinitionErrorType.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY}),(0,S.default)(L,e.MODES)&&(0,S.default)(L,e.DEFAULT_MODE)&&!(0,S.default)(L.modes,L.defaultMode)&&R.push({message:"A MultiMode Lexer cannot be initialized with a ".concat(e.DEFAULT_MODE,": <").concat(L.defaultMode,">")+`which does not exist
`,type:a.LexerDefinitionErrorType.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST}),(0,S.default)(L,e.MODES)&&(0,f.default)(L.modes,function(C,H){(0,f.default)(C,function(oe,pe){(0,b.default)(oe)&&R.push({message:"A Lexer cannot be initialized using an undefined Token Type. Mode:"+"<".concat(H,"> at index: <").concat(pe,`>
`),type:a.LexerDefinitionErrorType.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED})})}),R}e.performRuntimeChecks=Ue;function ft(L,M,F){var R=[],C=!1,H=(0,u.default)((0,d.default)((0,l.default)(L.modes))),oe=(0,c.default)(H,function(Te){return Te[x]===a.Lexer.NA}),pe=Yt(F);return M&&(0,f.default)(oe,function(Te){var Ve=Ht(Te,pe);if(Ve!==!1){var pt=dt(Te,Ve),it={message:pt,type:Ve.issue,tokenType:Te};R.push(it)}else(0,S.default)(Te,"LINE_BREAKS")?Te.LINE_BREAKS===!0&&(C=!0):(0,K.canMatchCharCode)(pe,Te.PATTERN)&&(C=!0)}),M&&!C&&R.push({message:`Warning: No LINE_BREAKS Found.
	This Lexer has been defined to track line and column information,
	But none of the Token Types can be identified as matching a line terminator.
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#LINE_BREAKS 
	for details.`,type:a.LexerDefinitionErrorType.NO_LINE_BREAKS_FLAGS}),R}e.performWarningRuntimeChecks=ft;function ke(L){var M={},F=(0,$.default)(L);return(0,f.default)(F,function(R){var C=L[R];if((0,s.default)(C))M[R]=[];else throw Error("non exhaustive match")}),M}e.cloneEmptyGroups=ke;function Ze(L){var M=L.PATTERN;if((0,y.default)(M))return!1;if((0,E.default)(M))return!0;if((0,S.default)(M,"exec"))return!0;if((0,m.default)(M))return!1;throw Error("non exhaustive match")}e.isCustomPattern=Ze;function We(L){return(0,m.default)(L)&&L.length===1?L.charCodeAt(0):!1}e.isShortPattern=We,e.LineTerminatorOptimizedTester={test:function(L){for(var M=L.length,F=this.lastIndex;F<M;F++){var R=L.charCodeAt(F);if(R===10)return this.lastIndex=F+1,!0;if(R===13)return L.charCodeAt(F+1)===10?this.lastIndex=F+2:this.lastIndex=F+1,!0}return!1},lastIndex:0};function Ht(L,M){if((0,S.default)(L,"LINE_BREAKS"))return!1;if((0,y.default)(L.PATTERN)){try{(0,K.canMatchCharCode)(M,L.PATTERN)}catch(F){return{issue:a.LexerDefinitionErrorType.IDENTIFY_TERMINATOR,errMsg:F.message}}return!1}else{if((0,m.default)(L.PATTERN))return!1;if(Ze(L))return{issue:a.LexerDefinitionErrorType.CUSTOM_LINE_BREAK};throw Error("non exhaustive match")}}function dt(L,M){if(M.issue===a.LexerDefinitionErrorType.IDENTIFY_TERMINATOR)return`Warning: unable to identify line terminator usage in pattern.
`+"	The problem is in the <".concat(L.name,`> Token Type
`)+"	 Root cause: ".concat(M.errMsg,`.
`)+"	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#IDENTIFY_TERMINATOR";if(M.issue===a.LexerDefinitionErrorType.CUSTOM_LINE_BREAK)return`Warning: A Custom Token Pattern should specify the <line_breaks> option.
`+"	The problem is in the <".concat(L.name,`> Token Type
`)+"	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_LINE_BREAK";throw Error("non exhaustive match")}e.buildLineBreakIssueMessage=dt;function Yt(L){var M=(0,_.default)(L,function(F){return(0,m.default)(F)?F.charCodeAt(0):F});return M}function Dt(L,M,F){L[M]===void 0?L[M]=[F]:L[M].push(F)}e.minOptimizationVal=256;var ht=[];function Ft(L){return L<e.minOptimizationVal?L:ht[L]}e.charCodeToOptimizedIndex=Ft;function Ce(){if((0,o.default)(ht)){ht=new Array(65536);for(var L=0;L<65536;L++)ht[L]=L>255?255+~~(L/255):L}}})(io);function QR(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var co=QR,gn={};(function(e){var t=k&&k.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(e,"__esModule",{value:!0}),e.isTokenType=e.hasExtendingTokensTypesMapProperty=e.hasExtendingTokensTypesProperty=e.hasCategoriesProperty=e.hasShortKeyProperty=e.singleAssignCategoriesToksMap=e.assignCategoriesMapProp=e.assignCategoriesTokensProp=e.assignTokenDefaultProps=e.expandCategories=e.augmentTokenTypes=e.tokenIdxToClass=e.tokenShortNameIdx=e.tokenStructuredMatcherNoCategories=e.tokenStructuredMatcher=void 0;var n=t(Ct),r=t(Sa),a=t(me),i=t(zt),o=t(so),u=t(et),s=t(Be),l=t(ct),d=t(Kt),c=t(en);function p(h,I){var U=h.tokenTypeIdx;return U===I.tokenTypeIdx?!0:I.isParent===!0&&I.categoryMatchesMap[U]===!0}e.tokenStructuredMatcher=p;function v(h,I){return h.tokenTypeIdx===I.tokenTypeIdx}e.tokenStructuredMatcherNoCategories=v,e.tokenShortNameIdx=1,e.tokenIdxToClass={};function _(h){var I=f(h);m(I),b(I),E(I),(0,s.default)(I,function(U){U.isParent=U.categoryMatches.length>0})}e.augmentTokenTypes=_;function f(h){for(var I=(0,c.default)(h),U=h,K=!0;K;){U=(0,r.default)((0,i.default)((0,u.default)(U,function(x){return x.CATEGORIES})));var w=(0,o.default)(U,I);I=I.concat(w),(0,n.default)(w)?K=!1:U=w}return I}e.expandCategories=f;function m(h){(0,s.default)(h,function(I){S(I)||(e.tokenIdxToClass[e.tokenShortNameIdx]=I,I.tokenTypeIdx=e.tokenShortNameIdx++),$(I)&&!(0,a.default)(I.CATEGORIES)&&(I.CATEGORIES=[I.CATEGORIES]),$(I)||(I.CATEGORIES=[]),y(I)||(I.categoryMatches=[]),g(I)||(I.categoryMatchesMap={})})}e.assignTokenDefaultProps=m;function E(h){(0,s.default)(h,function(I){I.categoryMatches=[],(0,s.default)(I.categoryMatchesMap,function(U,K){I.categoryMatches.push(e.tokenIdxToClass[K].tokenTypeIdx)})})}e.assignCategoriesTokensProp=E;function b(h){(0,s.default)(h,function(I){A([],I)})}e.assignCategoriesMapProp=b;function A(h,I){(0,s.default)(h,function(U){I.categoryMatchesMap[U.tokenTypeIdx]=!0}),(0,s.default)(I.CATEGORIES,function(U){var K=h.concat(I);(0,d.default)(K,U)||A(K,U)})}e.singleAssignCategoriesToksMap=A;function S(h){return(0,l.default)(h,"tokenTypeIdx")}e.hasShortKeyProperty=S;function $(h){return(0,l.default)(h,"CATEGORIES")}e.hasCategoriesProperty=$;function y(h){return(0,l.default)(h,"categoryMatches")}e.hasExtendingTokensTypesProperty=y;function g(h){return(0,l.default)(h,"categoryMatchesMap")}e.hasExtendingTokensTypesMapProperty=g;function T(h){return(0,l.default)(h,"tokenTypeIdx")}e.isTokenType=T})(gn);var wr={};Object.defineProperty(wr,"__esModule",{value:!0});wr.defaultLexerErrorProvider=void 0;wr.defaultLexerErrorProvider={buildUnableToPopLexerModeMessage:function(e){return"Unable to pop Lexer Mode after encountering Token ->".concat(e.image,"<- The Mode Stack is empty")},buildUnexpectedCharactersMessage:function(e,t,n,r,a){return"unexpected character: ->".concat(e.charAt(t),"<- at offset: ").concat(t,",")+" skipped ".concat(n," characters.")}};(function(e){var t=k&&k.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(e,"__esModule",{value:!0}),e.Lexer=e.LexerDefinitionErrorType=void 0;var n=io,r=t(no),a=t(Ct),i=t(me),o=t(co),u=t(oo),s=t(et),l=t(Be),d=t(lt),c=t(Bn),p=t(Pr),v=t(Aa),_=t(_n),f=t(en),m=Un,E=gn,b=wr,A=Qt;(function(y){y[y.MISSING_PATTERN=0]="MISSING_PATTERN",y[y.INVALID_PATTERN=1]="INVALID_PATTERN",y[y.EOI_ANCHOR_FOUND=2]="EOI_ANCHOR_FOUND",y[y.UNSUPPORTED_FLAGS_FOUND=3]="UNSUPPORTED_FLAGS_FOUND",y[y.DUPLICATE_PATTERNS_FOUND=4]="DUPLICATE_PATTERNS_FOUND",y[y.INVALID_GROUP_TYPE_FOUND=5]="INVALID_GROUP_TYPE_FOUND",y[y.PUSH_MODE_DOES_NOT_EXIST=6]="PUSH_MODE_DOES_NOT_EXIST",y[y.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE=7]="MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE",y[y.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY=8]="MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY",y[y.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST=9]="MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST",y[y.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED=10]="LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED",y[y.SOI_ANCHOR_FOUND=11]="SOI_ANCHOR_FOUND",y[y.EMPTY_MATCH_PATTERN=12]="EMPTY_MATCH_PATTERN",y[y.NO_LINE_BREAKS_FLAGS=13]="NO_LINE_BREAKS_FLAGS",y[y.UNREACHABLE_PATTERN=14]="UNREACHABLE_PATTERN",y[y.IDENTIFY_TERMINATOR=15]="IDENTIFY_TERMINATOR",y[y.CUSTOM_LINE_BREAK=16]="CUSTOM_LINE_BREAK"})(e.LexerDefinitionErrorType||(e.LexerDefinitionErrorType={}));var S={deferDefinitionErrorsHandling:!1,positionTracking:"full",lineTerminatorsPattern:/\n|\r\n?/g,lineTerminatorCharacters:[`
`,"\r"],ensureOptimizations:!1,safeMode:!1,errorMessageProvider:b.defaultLexerErrorProvider,traceInitPerf:!1,skipValidations:!1};Object.freeze(S);var $=function(){function y(g,T){T===void 0&&(T=S);var h=this;if(this.lexerDefinition=g,this.lexerDefinitionErrors=[],this.lexerDefinitionWarning=[],this.patternIdxToConfig={},this.charCodeToPatternIdxToConfig={},this.modes=[],this.emptyGroups={},this.trackStartLines=!0,this.trackEndLines=!0,this.hasCustom=!1,this.canModeBeOptimized={},this.TRACE_INIT=function(U,K){if(h.traceInitPerf===!0){h.traceInitIndent++;var w=new Array(h.traceInitIndent+1).join("	");h.traceInitIndent<h.traceInitMaxIdent&&console.log("".concat(w,"--> <").concat(U,">"));var x=(0,m.timer)(K),B=x.time,O=x.value,P=B>10?console.warn:console.log;return h.traceInitIndent<h.traceInitMaxIdent&&P("".concat(w,"<-- <").concat(U,"> time: ").concat(B,"ms")),h.traceInitIndent--,O}else return K()},typeof T=="boolean")throw Error(`The second argument to the Lexer constructor is now an ILexerConfig Object.
a boolean 2nd argument is no longer supported`);this.config=(0,v.default)({},S,T);var I=this.config.traceInitPerf;I===!0?(this.traceInitMaxIdent=1/0,this.traceInitPerf=!0):typeof I=="number"&&(this.traceInitMaxIdent=I,this.traceInitPerf=!0),this.traceInitIndent=-1,this.TRACE_INIT("Lexer Constructor",function(){var U,K=!0;h.TRACE_INIT("Lexer Config handling",function(){if(h.config.lineTerminatorsPattern===S.lineTerminatorsPattern)h.config.lineTerminatorsPattern=n.LineTerminatorOptimizedTester;else if(h.config.lineTerminatorCharacters===S.lineTerminatorCharacters)throw Error(`Error: Missing <lineTerminatorCharacters> property on the Lexer config.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#MISSING_LINE_TERM_CHARS`);if(T.safeMode&&T.ensureOptimizations)throw Error('"safeMode" and "ensureOptimizations" flags are mutually exclusive.');h.trackStartLines=/full|onlyStart/i.test(h.config.positionTracking),h.trackEndLines=/full/i.test(h.config.positionTracking),(0,i.default)(g)?U={modes:{defaultMode:(0,f.default)(g)},defaultMode:n.DEFAULT_MODE}:(K=!1,U=(0,f.default)(g))}),h.config.skipValidations===!1&&(h.TRACE_INIT("performRuntimeChecks",function(){h.lexerDefinitionErrors=h.lexerDefinitionErrors.concat((0,n.performRuntimeChecks)(U,h.trackStartLines,h.config.lineTerminatorCharacters))}),h.TRACE_INIT("performWarningRuntimeChecks",function(){h.lexerDefinitionWarning=h.lexerDefinitionWarning.concat((0,n.performWarningRuntimeChecks)(U,h.trackStartLines,h.config.lineTerminatorCharacters))})),U.modes=U.modes?U.modes:{},(0,l.default)(U.modes,function(O,P){U.modes[P]=(0,u.default)(O,function(N){return(0,c.default)(N)})});var w=(0,d.default)(U.modes);if((0,l.default)(U.modes,function(O,P){h.TRACE_INIT("Mode: <".concat(P,"> processing"),function(){if(h.modes.push(P),h.config.skipValidations===!1&&h.TRACE_INIT("validatePatterns",function(){h.lexerDefinitionErrors=h.lexerDefinitionErrors.concat((0,n.validatePatterns)(O,w))}),(0,a.default)(h.lexerDefinitionErrors)){(0,E.augmentTokenTypes)(O);var N;h.TRACE_INIT("analyzeTokenTypes",function(){N=(0,n.analyzeTokenTypes)(O,{lineTerminatorCharacters:h.config.lineTerminatorCharacters,positionTracking:T.positionTracking,ensureOptimizations:T.ensureOptimizations,safeMode:T.safeMode,tracer:h.TRACE_INIT})}),h.patternIdxToConfig[P]=N.patternIdxToConfig,h.charCodeToPatternIdxToConfig[P]=N.charCodeToPatternIdxToConfig,h.emptyGroups=(0,v.default)({},h.emptyGroups,N.emptyGroups),h.hasCustom=N.hasCustom||h.hasCustom,h.canModeBeOptimized[P]=N.canBeOptimized}})}),h.defaultMode=U.defaultMode,!(0,a.default)(h.lexerDefinitionErrors)&&!h.config.deferDefinitionErrorsHandling){var x=(0,s.default)(h.lexerDefinitionErrors,function(O){return O.message}),B=x.join(`-----------------------
`);throw new Error(`Errors detected in definition of Lexer:
`+B)}(0,l.default)(h.lexerDefinitionWarning,function(O){(0,m.PRINT_WARNING)(O.message)}),h.TRACE_INIT("Choosing sub-methods implementations",function(){if(n.SUPPORT_STICKY?(h.chopInput=p.default,h.match=h.matchWithTest):(h.updateLastIndex=r.default,h.match=h.matchWithExec),K&&(h.handleModes=r.default),h.trackStartLines===!1&&(h.computeNewColumn=p.default),h.trackEndLines===!1&&(h.updateTokenEndLineColumnLocation=r.default),/full/i.test(h.config.positionTracking))h.createTokenInstance=h.createFullToken;else if(/onlyStart/i.test(h.config.positionTracking))h.createTokenInstance=h.createStartOnlyToken;else if(/onlyOffset/i.test(h.config.positionTracking))h.createTokenInstance=h.createOffsetOnlyToken;else throw Error('Invalid <positionTracking> config option: "'.concat(h.config.positionTracking,'"'));h.hasCustom?(h.addToken=h.addTokenUsingPush,h.handlePayload=h.handlePayloadWithCustom):(h.addToken=h.addTokenUsingMemberAccess,h.handlePayload=h.handlePayloadNoCustom)}),h.TRACE_INIT("Failed Optimization Warnings",function(){var O=(0,_.default)(h.canModeBeOptimized,function(P,N,G){return N===!1&&P.push(G),P},[]);if(T.ensureOptimizations&&!(0,a.default)(O))throw Error("Lexer Modes: < ".concat(O.join(", "),` > cannot be optimized.
`)+`	 Disable the "ensureOptimizations" lexer config flag to silently ignore this and run the lexer in an un-optimized mode.
	 Or inspect the console log for details on how to resolve these issues.`)}),h.TRACE_INIT("clearRegExpParserCache",function(){(0,A.clearRegExpParserCache)()}),h.TRACE_INIT("toFastProperties",function(){(0,m.toFastProperties)(h)})})}return y.prototype.tokenize=function(g,T){if(T===void 0&&(T=this.defaultMode),!(0,a.default)(this.lexerDefinitionErrors)){var h=(0,s.default)(this.lexerDefinitionErrors,function(U){return U.message}),I=h.join(`-----------------------
`);throw new Error(`Unable to Tokenize because Errors detected in definition of Lexer:
`+I)}return this.tokenizeInternal(g,T)},y.prototype.tokenizeInternal=function(g,T){var h=this,I,U,K,w,x,B,O,P,N,G,j,W,ue,de,ne,J=g,le=J.length,q=0,he=0,Pe=this.hasCustom?0:Math.floor(g.length/10),Ee=new Array(Pe),xe=[],Ie=this.trackStartLines?1:void 0,Me=this.trackStartLines?1:void 0,Se=(0,n.cloneEmptyGroups)(this.emptyGroups),at=this.trackStartLines,Ue=this.config.lineTerminatorsPattern,ft=0,ke=[],Ze=[],We=[],Ht=[];Object.freeze(Ht);var dt;function Yt(){return ke}function Dt($e){var _t=(0,n.charCodeToOptimizedIndex)($e),fe=Ze[_t];return fe===void 0?Ht:fe}var ht=function($e){if(We.length===1&&$e.tokenType.PUSH_MODE===void 0){var _t=h.config.errorMessageProvider.buildUnableToPopLexerModeMessage($e);xe.push({offset:$e.startOffset,line:$e.startLine,column:$e.startColumn,length:$e.image.length,message:_t})}else{We.pop();var fe=(0,o.default)(We);ke=h.patternIdxToConfig[fe],Ze=h.charCodeToPatternIdxToConfig[fe],ft=ke.length;var z=h.canModeBeOptimized[fe]&&h.config.safeMode===!1;Ze&&z?dt=Dt:dt=Yt}};function Ft($e){We.push($e),Ze=this.charCodeToPatternIdxToConfig[$e],ke=this.patternIdxToConfig[$e],ft=ke.length,ft=ke.length;var _t=this.canModeBeOptimized[$e]&&this.config.safeMode===!1;Ze&&_t?dt=Dt:dt=Yt}Ft.call(this,T);for(var Ce;q<le;){B=null;var L=J.charCodeAt(q),M=dt(L),F=M.length;for(I=0;I<F;I++){Ce=M[I];var R=Ce.pattern;O=null;var C=Ce.short;if(C!==!1?L===C&&(B=R):Ce.isCustom===!0?(ne=R.exec(J,q,Ee,Se),ne!==null?(B=ne[0],ne.payload!==void 0&&(O=ne.payload)):B=null):(this.updateLastIndex(R,q),B=this.match(R,g,q)),B!==null){if(x=Ce.longerAlt,x!==void 0){var H=x.length;for(K=0;K<H;K++){var oe=ke[x[K]],pe=oe.pattern;if(P=null,oe.isCustom===!0?(ne=pe.exec(J,q,Ee,Se),ne!==null?(w=ne[0],ne.payload!==void 0&&(P=ne.payload)):w=null):(this.updateLastIndex(pe,q),w=this.match(pe,g,q)),w&&w.length>B.length){B=w,O=P,Ce=oe;break}}}break}}if(B!==null){if(N=B.length,G=Ce.group,G!==void 0&&(j=Ce.tokenTypeIdx,W=this.createTokenInstance(B,q,j,Ce.tokenType,Ie,Me,N),this.handlePayload(W,O),G===!1?he=this.addToken(Ee,he,W):Se[G].push(W)),g=this.chopInput(g,N),q=q+N,Me=this.computeNewColumn(Me,N),at===!0&&Ce.canLineTerminator===!0){var Te=0,Ve=void 0,pt=void 0;Ue.lastIndex=0;do Ve=Ue.test(B),Ve===!0&&(pt=Ue.lastIndex-1,Te++);while(Ve===!0);Te!==0&&(Ie=Ie+Te,Me=N-pt,this.updateTokenEndLineColumnLocation(W,G,pt,Te,Ie,Me,N))}this.handleModes(Ce,ht,Ft,W)}else{for(var it=q,Xt=Ie,qt=Me,vt=!1;!vt&&q<le;)for(J.charCodeAt(q),g=this.chopInput(g,1),q++,U=0;U<ft;U++){var ot=ke[U],R=ot.pattern,C=ot.short;if(C!==!1?J.charCodeAt(q)===C&&(vt=!0):ot.isCustom===!0?vt=R.exec(J,q,Ee,Se)!==null:(this.updateLastIndex(R,q),vt=R.exec(g)!==null),vt===!0)break}ue=q-it,de=this.config.errorMessageProvider.buildUnexpectedCharactersMessage(J,it,ue,Xt,qt),xe.push({offset:it,line:Xt,column:qt,length:ue,message:de})}}return this.hasCustom||(Ee.length=he),{tokens:Ee,groups:Se,errors:xe}},y.prototype.handleModes=function(g,T,h,I){if(g.pop===!0){var U=g.push;T(I),U!==void 0&&h.call(this,U)}else g.push!==void 0&&h.call(this,g.push)},y.prototype.chopInput=function(g,T){return g.substring(T)},y.prototype.updateLastIndex=function(g,T){g.lastIndex=T},y.prototype.updateTokenEndLineColumnLocation=function(g,T,h,I,U,K,w){var x,B;T!==void 0&&(x=h===w-1,B=x?-1:0,I===1&&x===!0||(g.endLine=U+B,g.endColumn=K-1+-B))},y.prototype.computeNewColumn=function(g,T){return g+T},y.prototype.createOffsetOnlyToken=function(g,T,h,I){return{image:g,startOffset:T,tokenTypeIdx:h,tokenType:I}},y.prototype.createStartOnlyToken=function(g,T,h,I,U,K){return{image:g,startOffset:T,startLine:U,startColumn:K,tokenTypeIdx:h,tokenType:I}},y.prototype.createFullToken=function(g,T,h,I,U,K,w){return{image:g,startOffset:T,endOffset:T+w-1,startLine:U,endLine:U,startColumn:K,endColumn:K+w-1,tokenTypeIdx:h,tokenType:I}},y.prototype.addTokenUsingPush=function(g,T,h){return g.push(h),T},y.prototype.addTokenUsingMemberAccess=function(g,T,h){return g[T]=h,T++,T},y.prototype.handlePayloadNoCustom=function(g,T){},y.prototype.handlePayloadWithCustom=function(g,T){T!==null&&(g.payload=T)},y.prototype.matchWithTest=function(g,T,h){var I=g.test(T);return I===!0?T.substring(h,g.lastIndex):null},y.prototype.matchWithExec=function(g,T){var h=g.exec(T);return h!==null?h[0]:null},y.SKIPPED="This marks a skipped Token pattern, this means each token identified by it willbe consumed and then thrown into oblivion, this can be used to for example to completely ignore whitespace.",y.NA=/NOT_APPLICABLE/,y}();e.Lexer=$})(kr);(function(e){var t=k&&k.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(e,"__esModule",{value:!0}),e.tokenMatcher=e.createTokenInstance=e.EOF=e.createToken=e.hasTokenLabel=e.tokenName=e.tokenLabel=void 0;var n=t(Ea),r=t(ct),a=t(Bn),i=kr,o=gn;function u(g){return l(g)?g.LABEL:g.name}e.tokenLabel=u;function s(g){return g.name}e.tokenName=s;function l(g){return(0,n.default)(g.LABEL)&&g.LABEL!==""}e.hasTokenLabel=l;var d="parent",c="categories",p="label",v="group",_="push_mode",f="pop_mode",m="longer_alt",E="line_breaks",b="start_chars_hint";function A(g){return S(g)}e.createToken=A;function S(g){var T=g.pattern,h={};if(h.name=g.name,(0,a.default)(T)||(h.PATTERN=T),(0,r.default)(g,d))throw`The parent property is no longer supported.
See: https://github.com/chevrotain/chevrotain/issues/564#issuecomment-349062346 for details.`;return(0,r.default)(g,c)&&(h.CATEGORIES=g[c]),(0,o.augmentTokenTypes)([h]),(0,r.default)(g,p)&&(h.LABEL=g[p]),(0,r.default)(g,v)&&(h.GROUP=g[v]),(0,r.default)(g,f)&&(h.POP_MODE=g[f]),(0,r.default)(g,_)&&(h.PUSH_MODE=g[_]),(0,r.default)(g,m)&&(h.LONGER_ALT=g[m]),(0,r.default)(g,E)&&(h.LINE_BREAKS=g[E]),(0,r.default)(g,b)&&(h.START_CHARS_HINT=g[b]),h}e.EOF=A({name:"EOF",pattern:i.Lexer.NA}),(0,o.augmentTokenTypes)([e.EOF]);function $(g,T,h,I,U,K,w,x){return{image:T,startOffset:h,endOffset:I,startLine:U,endLine:K,startColumn:w,endColumn:x,tokenTypeIdx:g.tokenTypeIdx,tokenType:g}}e.createTokenInstance=$;function y(g,T){return(0,o.tokenStructuredMatcher)(g,T)}e.tokenMatcher=y})(vn);var xr={};(function(e){var t=k&&k.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(e,"__esModule",{value:!0}),e.defaultGrammarValidatorErrorProvider=e.defaultGrammarResolverErrorProvider=e.defaultParserErrorProvider=void 0;var n=vn,r=t(Mr),a=t(et),i=t(_n),o=Le,u=Le;e.defaultParserErrorProvider={buildMismatchTokenMessage:function(s){var l=s.expected,d=s.actual;s.previous,s.ruleName;var c=(0,n.hasTokenLabel)(l),p=c?"--> ".concat((0,n.tokenLabel)(l)," <--"):"token of type --> ".concat(l.name," <--"),v="Expecting ".concat(p," but found --> '").concat(d.image,"' <--");return v},buildNotAllInputParsedMessage:function(s){var l=s.firstRedundant;return s.ruleName,"Redundant input, expecting EOF but found: "+l.image},buildNoViableAltMessage:function(s){var l=s.expectedPathsPerAlt,d=s.actual;s.previous;var c=s.customUserDescription;s.ruleName;var p="Expecting: ",v=(0,r.default)(d).image,_=`
but found: '`+v+"'";if(c)return p+c+_;var f=(0,i.default)(l,function(A,S){return A.concat(S)},[]),m=(0,a.default)(f,function(A){return"[".concat((0,a.default)(A,function(S){return(0,n.tokenLabel)(S)}).join(", "),"]")}),E=(0,a.default)(m,function(A,S){return"  ".concat(S+1,". ").concat(A)}),b=`one of these possible Token sequences:
`.concat(E.join(`
`));return p+b+_},buildEarlyExitMessage:function(s){var l=s.expectedIterationPaths,d=s.actual,c=s.customUserDescription;s.ruleName;var p="Expecting: ",v=(0,r.default)(d).image,_=`
but found: '`+v+"'";if(c)return p+c+_;var f=(0,a.default)(l,function(E){return"[".concat((0,a.default)(E,function(b){return(0,n.tokenLabel)(b)}).join(","),"]")}),m=`expecting at least one iteration which starts with one of these possible Token sequences::
  `+"<".concat(f.join(" ,"),">");return p+m+_}},Object.freeze(e.defaultParserErrorProvider),e.defaultGrammarResolverErrorProvider={buildRuleNotFoundError:function(s,l){var d="Invalid grammar, reference to a rule which is not defined: ->"+l.nonTerminalName+`<-
inside top level rule: ->`+s.name+"<-";return d}},e.defaultGrammarValidatorErrorProvider={buildDuplicateFoundError:function(s,l){function d(b){return b instanceof o.Terminal?b.terminalType.name:b instanceof o.NonTerminal?b.nonTerminalName:""}var c=s.name,p=(0,r.default)(l),v=p.idx,_=(0,u.getProductionDslName)(p),f=d(p),m=v>0,E="->".concat(_).concat(m?v:"","<- ").concat(f?"with argument: ->".concat(f,"<-"):"",`
                  appears more than once (`).concat(l.length," times) in the top level rule: ->").concat(c,`<-.                  
                  For further details see: https://chevrotain.io/docs/FAQ.html#NUMERICAL_SUFFIXES 
                  `);return E=E.replace(/[ \t]+/g," "),E=E.replace(/\s\s+/g,`
`),E},buildNamespaceConflictError:function(s){var l=`Namespace conflict found in grammar.
`+"The grammar has both a Terminal(Token) and a Non-Terminal(Rule) named: <".concat(s.name,`>.
`)+`To resolve this make sure each Terminal and Non-Terminal names are unique
This is easy to accomplish by using the convention that Terminal names start with an uppercase letter
and Non-Terminal names start with a lower case letter.`;return l},buildAlternationPrefixAmbiguityError:function(s){var l=(0,a.default)(s.prefixPath,function(p){return(0,n.tokenLabel)(p)}).join(", "),d=s.alternation.idx===0?"":s.alternation.idx,c="Ambiguous alternatives: <".concat(s.ambiguityIndices.join(" ,"),`> due to common lookahead prefix
`)+"in <OR".concat(d,"> inside <").concat(s.topLevelRule.name,`> Rule,
`)+"<".concat(l,`> may appears as a prefix path in all these alternatives.
`)+`See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#COMMON_PREFIX
For Further details.`;return c},buildAlternationAmbiguityError:function(s){var l=(0,a.default)(s.prefixPath,function(p){return(0,n.tokenLabel)(p)}).join(", "),d=s.alternation.idx===0?"":s.alternation.idx,c="Ambiguous Alternatives Detected: <".concat(s.ambiguityIndices.join(" ,"),"> in <OR").concat(d,">")+" inside <".concat(s.topLevelRule.name,`> Rule,
`)+"<".concat(l,`> may appears as a prefix path in all these alternatives.
`);return c=c+`See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES
For Further details.`,c},buildEmptyRepetitionError:function(s){var l=(0,u.getProductionDslName)(s.repetition);s.repetition.idx!==0&&(l+=s.repetition.idx);var d="The repetition <".concat(l,"> within Rule <").concat(s.topLevelRule.name,`> can never consume any tokens.
`)+"This could lead to an infinite loop.";return d},buildTokenNameError:function(s){return"deprecated"},buildEmptyAlternationError:function(s){var l="Ambiguous empty alternative: <".concat(s.emptyChoiceIdx+1,">")+" in <OR".concat(s.alternation.idx,"> inside <").concat(s.topLevelRule.name,`> Rule.
`)+"Only the last alternative may be an empty alternative.";return l},buildTooManyAlternativesError:function(s){var l=`An Alternation cannot have more than 256 alternatives:
`+"<OR".concat(s.alternation.idx,"> inside <").concat(s.topLevelRule.name,`> Rule.
 has `).concat(s.alternation.definition.length+1," alternatives.");return l},buildLeftRecursionError:function(s){var l=s.topLevelRule.name,d=(0,a.default)(s.leftRecursionPath,function(v){return v.name}),c="".concat(l," --> ").concat(d.concat([l]).join(" --> ")),p=`Left Recursion found in grammar.
`+"rule: <".concat(l,`> can be invoked from itself (directly or indirectly)
`)+`without consuming any Tokens. The grammar path that causes this is: 
 `.concat(c,`
`)+` To fix this refactor your grammar to remove the left recursion.
see: https://en.wikipedia.org/wiki/LL_parser#Left_factoring.`;return p},buildInvalidRuleNameError:function(s){return"deprecated"},buildDuplicateRuleNameError:function(s){var l;s.topLevelRule instanceof o.Rule?l=s.topLevelRule.name:l=s.topLevelRule;var d="Duplicate definition, rule: ->".concat(l,"<- is already defined in the grammar: ->").concat(s.grammarName,"<-");return d}}})(xr);var Nn={},Pn={},eI=k&&k.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(r[i]=a[i])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Tl=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Pn,"__esModule",{value:!0});Pn.GastRefResolverVisitor=Pn.resolveGrammar=void 0;var tI=rt,nI=Tl(Be),rI=Tl(Wt),aI=Le;function iI(e,t){var n=new Al(e,t);return n.resolveRefs(),n.errors}Pn.resolveGrammar=iI;var Al=function(e){eI(t,e);function t(n,r){var a=e.call(this)||this;return a.nameToTopRule=n,a.errMsgProvider=r,a.errors=[],a}return t.prototype.resolveRefs=function(){var n=this;(0,nI.default)((0,rI.default)(this.nameToTopRule),function(r){n.currTopLevel=r,r.accept(n)})},t.prototype.visitNonTerminal=function(n){var r=this.nameToTopRule[n.nonTerminalName];if(r)n.referencedRule=r;else{var a=this.errMsgProvider.buildRuleNotFoundError(this.currTopLevel,n);this.errors.push({message:a,type:tI.ParserDefinitionErrorType.UNRESOLVED_SUBRULE_REF,ruleName:this.currTopLevel.name,unresolvedRefName:n.nonTerminalName})}},t}(aI.GAstVisitor);Pn.GastRefResolverVisitor=Al;var ge={};function oI(e,t,n,r){for(var a=-1,i=e==null?0:e.length;++a<i;){var o=e[a];t(r,o,n(o),e)}return r}var sI=oI,uI=pn;function lI(e,t,n,r){return uI(e,function(a,i,o){t(r,a,n(a),o)}),r}var cI=lI,fI=sI,dI=cI,hI=$t,pI=me;function vI(e,t){return function(n,r){var a=pI(n)?fI:dI,i=t?t():{};return a(n,e,hI(r),i)}}var _I=vI,gI=Hi,mI=_I,yI=Object.prototype,EI=yI.hasOwnProperty,TI=mI(function(e,t,n){EI.call(e,n)?e[n].push(t):gI(e,n,[t])}),bl=TI,AI=to,bI=et;function OI(e,t){return AI(bI(e,t),1)}var RI=OI,Dr={},Ne={},II=Xi,SI=$r;function NI(e,t,n){var r=e==null?0:e.length;return r?(t=n||t===void 0?1:SI(t),t=r-t,II(e,0,t<0?0:t)):[]}var fo=NI,mn=k&&k.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(r[i]=a[i])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),yn=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ne,"__esModule",{value:!0});Ne.nextPossibleTokensAfter=Ne.possiblePathsFrom=Ne.NextTerminalAfterAtLeastOneSepWalker=Ne.NextTerminalAfterAtLeastOneWalker=Ne.NextTerminalAfterManySepWalker=Ne.NextTerminalAfterManyWalker=Ne.AbstractNextTerminalAfterProductionWalker=Ne.NextAfterTokenWalker=Ne.AbstractNextPossibleTokensWalker=void 0;var Ol=Gn,Na=yn(Mr),ra=yn(Ct),Ss=yn(fo),Ye=yn(qi),PI=yn(co),CI=yn(Be),un=yn(en),$I=yt,ce=Le,Rl=function(e){mn(t,e);function t(n,r){var a=e.call(this)||this;return a.topProd=n,a.path=r,a.possibleTokTypes=[],a.nextProductionName="",a.nextProductionOccurrence=0,a.found=!1,a.isAtEndOfPath=!1,a}return t.prototype.startWalking=function(){if(this.found=!1,this.path.ruleStack[0]!==this.topProd.name)throw Error("The path does not start with the walker's top Rule!");return this.ruleStack=(0,un.default)(this.path.ruleStack).reverse(),this.occurrenceStack=(0,un.default)(this.path.occurrenceStack).reverse(),this.ruleStack.pop(),this.occurrenceStack.pop(),this.updateExpectedNext(),this.walk(this.topProd),this.possibleTokTypes},t.prototype.walk=function(n,r){r===void 0&&(r=[]),this.found||e.prototype.walk.call(this,n,r)},t.prototype.walkProdRef=function(n,r,a){if(n.referencedRule.name===this.nextProductionName&&n.idx===this.nextProductionOccurrence){var i=r.concat(a);this.updateExpectedNext(),this.walk(n.referencedRule,i)}},t.prototype.updateExpectedNext=function(){(0,ra.default)(this.ruleStack)?(this.nextProductionName="",this.nextProductionOccurrence=0,this.isAtEndOfPath=!0):(this.nextProductionName=this.ruleStack.pop(),this.nextProductionOccurrence=this.occurrenceStack.pop())},t}(Ol.RestWalker);Ne.AbstractNextPossibleTokensWalker=Rl;var LI=function(e){mn(t,e);function t(n,r){var a=e.call(this,n,r)||this;return a.path=r,a.nextTerminalName="",a.nextTerminalOccurrence=0,a.nextTerminalName=a.path.lastTok.name,a.nextTerminalOccurrence=a.path.lastTokOccurrence,a}return t.prototype.walkTerminal=function(n,r,a){if(this.isAtEndOfPath&&n.terminalType.name===this.nextTerminalName&&n.idx===this.nextTerminalOccurrence&&!this.found){var i=r.concat(a),o=new ce.Alternative({definition:i});this.possibleTokTypes=(0,$I.first)(o),this.found=!0}},t}(Rl);Ne.NextAfterTokenWalker=LI;var Fr=function(e){mn(t,e);function t(n,r){var a=e.call(this)||this;return a.topRule=n,a.occurrence=r,a.result={token:void 0,occurrence:void 0,isEndOfRule:void 0},a}return t.prototype.startWalking=function(){return this.walk(this.topRule),this.result},t}(Ol.RestWalker);Ne.AbstractNextTerminalAfterProductionWalker=Fr;var kI=function(e){mn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.walkMany=function(n,r,a){if(n.idx===this.occurrence){var i=(0,Na.default)(r.concat(a));this.result.isEndOfRule=i===void 0,i instanceof ce.Terminal&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else e.prototype.walkMany.call(this,n,r,a)},t}(Fr);Ne.NextTerminalAfterManyWalker=kI;var MI=function(e){mn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.walkManySep=function(n,r,a){if(n.idx===this.occurrence){var i=(0,Na.default)(r.concat(a));this.result.isEndOfRule=i===void 0,i instanceof ce.Terminal&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else e.prototype.walkManySep.call(this,n,r,a)},t}(Fr);Ne.NextTerminalAfterManySepWalker=MI;var wI=function(e){mn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.walkAtLeastOne=function(n,r,a){if(n.idx===this.occurrence){var i=(0,Na.default)(r.concat(a));this.result.isEndOfRule=i===void 0,i instanceof ce.Terminal&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else e.prototype.walkAtLeastOne.call(this,n,r,a)},t}(Fr);Ne.NextTerminalAfterAtLeastOneWalker=wI;var xI=function(e){mn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.walkAtLeastOneSep=function(n,r,a){if(n.idx===this.occurrence){var i=(0,Na.default)(r.concat(a));this.result.isEndOfRule=i===void 0,i instanceof ce.Terminal&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else e.prototype.walkAtLeastOneSep.call(this,n,r,a)},t}(Fr);Ne.NextTerminalAfterAtLeastOneSepWalker=xI;function Il(e,t,n){n===void 0&&(n=[]),n=(0,un.default)(n);var r=[],a=0;function i(l){return l.concat((0,Ye.default)(e,a+1))}function o(l){var d=Il(i(l),t,n);return r.concat(d)}for(;n.length<t&&a<e.length;){var u=e[a];if(u instanceof ce.Alternative)return o(u.definition);if(u instanceof ce.NonTerminal)return o(u.definition);if(u instanceof ce.Option)r=o(u.definition);else if(u instanceof ce.RepetitionMandatory){var s=u.definition.concat([new ce.Repetition({definition:u.definition})]);return o(s)}else if(u instanceof ce.RepetitionMandatoryWithSeparator){var s=[new ce.Alternative({definition:u.definition}),new ce.Repetition({definition:[new ce.Terminal({terminalType:u.separator})].concat(u.definition)})];return o(s)}else if(u instanceof ce.RepetitionWithSeparator){var s=u.definition.concat([new ce.Repetition({definition:[new ce.Terminal({terminalType:u.separator})].concat(u.definition)})]);r=o(s)}else if(u instanceof ce.Repetition){var s=u.definition.concat([new ce.Repetition({definition:u.definition})]);r=o(s)}else{if(u instanceof ce.Alternation)return(0,CI.default)(u.definition,function(l){(0,ra.default)(l.definition)===!1&&(r=o(l.definition))}),r;if(u instanceof ce.Terminal)n.push(u.terminalType);else throw Error("non exhaustive match")}a++}return r.push({partialPath:n,suffixDef:(0,Ye.default)(e,a)}),r}Ne.possiblePathsFrom=Il;function DI(e,t,n,r){var a="EXIT_NONE_TERMINAL",i=[a],o="EXIT_ALTERNATIVE",u=!1,s=t.length,l=s-r-1,d=[],c=[];for(c.push({idx:-1,def:e,ruleStack:[],occurrenceStack:[]});!(0,ra.default)(c);){var p=c.pop();if(p===o){u&&(0,PI.default)(c).idx<=l&&c.pop();continue}var v=p.def,_=p.idx,f=p.ruleStack,m=p.occurrenceStack;if(!(0,ra.default)(v)){var E=v[0];if(E===a){var b={idx:_,def:(0,Ye.default)(v),ruleStack:(0,Ss.default)(f),occurrenceStack:(0,Ss.default)(m)};c.push(b)}else if(E instanceof ce.Terminal)if(_<s-1){var A=_+1,S=t[A];if(n(S,E.terminalType)){var b={idx:A,def:(0,Ye.default)(v),ruleStack:f,occurrenceStack:m};c.push(b)}}else if(_===s-1)d.push({nextTokenType:E.terminalType,nextTokenOccurrence:E.idx,ruleStack:f,occurrenceStack:m}),u=!0;else throw Error("non exhaustive match");else if(E instanceof ce.NonTerminal){var $=(0,un.default)(f);$.push(E.nonTerminalName);var y=(0,un.default)(m);y.push(E.idx);var b={idx:_,def:E.definition.concat(i,(0,Ye.default)(v)),ruleStack:$,occurrenceStack:y};c.push(b)}else if(E instanceof ce.Option){var g={idx:_,def:(0,Ye.default)(v),ruleStack:f,occurrenceStack:m};c.push(g),c.push(o);var T={idx:_,def:E.definition.concat((0,Ye.default)(v)),ruleStack:f,occurrenceStack:m};c.push(T)}else if(E instanceof ce.RepetitionMandatory){var h=new ce.Repetition({definition:E.definition,idx:E.idx}),I=E.definition.concat([h],(0,Ye.default)(v)),b={idx:_,def:I,ruleStack:f,occurrenceStack:m};c.push(b)}else if(E instanceof ce.RepetitionMandatoryWithSeparator){var U=new ce.Terminal({terminalType:E.separator}),h=new ce.Repetition({definition:[U].concat(E.definition),idx:E.idx}),I=E.definition.concat([h],(0,Ye.default)(v)),b={idx:_,def:I,ruleStack:f,occurrenceStack:m};c.push(b)}else if(E instanceof ce.RepetitionWithSeparator){var g={idx:_,def:(0,Ye.default)(v),ruleStack:f,occurrenceStack:m};c.push(g),c.push(o);var U=new ce.Terminal({terminalType:E.separator}),K=new ce.Repetition({definition:[U].concat(E.definition),idx:E.idx}),I=E.definition.concat([K],(0,Ye.default)(v)),T={idx:_,def:I,ruleStack:f,occurrenceStack:m};c.push(T)}else if(E instanceof ce.Repetition){var g={idx:_,def:(0,Ye.default)(v),ruleStack:f,occurrenceStack:m};c.push(g),c.push(o);var K=new ce.Repetition({definition:E.definition,idx:E.idx}),I=E.definition.concat([K],(0,Ye.default)(v)),T={idx:_,def:I,ruleStack:f,occurrenceStack:m};c.push(T)}else if(E instanceof ce.Alternation)for(var w=E.definition.length-1;w>=0;w--){var x=E.definition[w],B={idx:_,def:x.definition.concat((0,Ye.default)(v)),ruleStack:f,occurrenceStack:m};c.push(B),c.push(o)}else if(E instanceof ce.Alternative)c.push({idx:_,def:E.definition.concat((0,Ye.default)(v)),ruleStack:f,occurrenceStack:m});else if(E instanceof ce.Rule)c.push(FI(E,_,f,m));else throw Error("non exhaustive match")}}return d}Ne.nextPossibleTokensAfter=DI;function FI(e,t,n,r){var a=(0,un.default)(n);a.push(e.name);var i=(0,un.default)(r);return i.push(1),{idx:t,def:e.definition,ruleStack:a,occurrenceStack:i}}(function(e){var t=k&&k.__extends||function(){var O=function(P,N){return O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(G,j){G.__proto__=j}||function(G,j){for(var W in j)Object.prototype.hasOwnProperty.call(j,W)&&(G[W]=j[W])},O(P,N)};return function(P,N){if(typeof N!="function"&&N!==null)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");O(P,N);function G(){this.constructor=P}P.prototype=N===null?Object.create(N):(G.prototype=N.prototype,new G)}}(),n=k&&k.__importDefault||function(O){return O&&O.__esModule?O:{default:O}};Object.defineProperty(e,"__esModule",{value:!0}),e.areTokenCategoriesNotUsed=e.isStrictPrefixOfPath=e.containsPath=e.getLookaheadPathsForOptionalProd=e.getLookaheadPathsForOr=e.lookAheadSequenceFromAlternatives=e.buildSingleAlternativeLookaheadFunction=e.buildAlternativesLookAheadFunc=e.buildLookaheadFuncForOptionalProd=e.buildLookaheadFuncForOr=e.getProdType=e.PROD_TYPE=void 0;var r=n(Ct),a=n(zt),i=n(Oa),o=n(et),u=n(Be),s=n(ct),l=n(_n),d=Ne,c=Gn,p=gn,v=Le,_=Le,f;(function(O){O[O.OPTION=0]="OPTION",O[O.REPETITION=1]="REPETITION",O[O.REPETITION_MANDATORY=2]="REPETITION_MANDATORY",O[O.REPETITION_MANDATORY_WITH_SEPARATOR=3]="REPETITION_MANDATORY_WITH_SEPARATOR",O[O.REPETITION_WITH_SEPARATOR=4]="REPETITION_WITH_SEPARATOR",O[O.ALTERNATION=5]="ALTERNATION"})(f=e.PROD_TYPE||(e.PROD_TYPE={}));function m(O){if(O instanceof v.Option)return f.OPTION;if(O instanceof v.Repetition)return f.REPETITION;if(O instanceof v.RepetitionMandatory)return f.REPETITION_MANDATORY;if(O instanceof v.RepetitionMandatoryWithSeparator)return f.REPETITION_MANDATORY_WITH_SEPARATOR;if(O instanceof v.RepetitionWithSeparator)return f.REPETITION_WITH_SEPARATOR;if(O instanceof v.Alternation)return f.ALTERNATION;throw Error("non exhaustive match")}e.getProdType=m;function E(O,P,N,G,j,W){var ue=U(O,P,N),de=B(ue)?p.tokenStructuredMatcherNoCategories:p.tokenStructuredMatcher;return W(ue,G,de,j)}e.buildLookaheadFuncForOr=E;function b(O,P,N,G,j,W){var ue=K(O,P,j,N),de=B(ue)?p.tokenStructuredMatcherNoCategories:p.tokenStructuredMatcher;return W(ue[0],de,G)}e.buildLookaheadFuncForOptionalProd=b;function A(O,P,N,G){var j=O.length,W=(0,i.default)(O,function(ne){return(0,i.default)(ne,function(J){return J.length===1})});if(P)return function(ne){for(var J=(0,o.default)(ne,function(at){return at.GATE}),le=0;le<j;le++){var q=O[le],he=q.length,Pe=J[le];if(Pe!==void 0&&Pe.call(this)===!1)continue;e:for(var Ee=0;Ee<he;Ee++){for(var xe=q[Ee],Ie=xe.length,Me=0;Me<Ie;Me++){var Se=this.LA(Me+1);if(N(Se,xe[Me])===!1)continue e}return le}}};if(W&&!G){var ue=(0,o.default)(O,function(ne){return(0,a.default)(ne)}),de=(0,l.default)(ue,function(ne,J,le){return(0,u.default)(J,function(q){(0,s.default)(ne,q.tokenTypeIdx)||(ne[q.tokenTypeIdx]=le),(0,u.default)(q.categoryMatches,function(he){(0,s.default)(ne,he)||(ne[he]=le)})}),ne},{});return function(){var ne=this.LA(1);return de[ne.tokenTypeIdx]}}else return function(){for(var ne=0;ne<j;ne++){var J=O[ne],le=J.length;e:for(var q=0;q<le;q++){for(var he=J[q],Pe=he.length,Ee=0;Ee<Pe;Ee++){var xe=this.LA(Ee+1);if(N(xe,he[Ee])===!1)continue e}return ne}}}}e.buildAlternativesLookAheadFunc=A;function S(O,P,N){var G=(0,i.default)(O,function(J){return J.length===1}),j=O.length;if(G&&!N){var W=(0,a.default)(O);if(W.length===1&&(0,r.default)(W[0].categoryMatches)){var ue=W[0],de=ue.tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===de}}else{var ne=(0,l.default)(W,function(J,le,q){return J[le.tokenTypeIdx]=!0,(0,u.default)(le.categoryMatches,function(he){J[he]=!0}),J},[]);return function(){var J=this.LA(1);return ne[J.tokenTypeIdx]===!0}}}else return function(){e:for(var J=0;J<j;J++){for(var le=O[J],q=le.length,he=0;he<q;he++){var Pe=this.LA(he+1);if(P(Pe,le[he])===!1)continue e}return!0}return!1}}e.buildSingleAlternativeLookaheadFunction=S;var $=function(O){t(P,O);function P(N,G,j){var W=O.call(this)||this;return W.topProd=N,W.targetOccurrence=G,W.targetProdType=j,W}return P.prototype.startWalking=function(){return this.walk(this.topProd),this.restDef},P.prototype.checkIsTarget=function(N,G,j,W){return N.idx===this.targetOccurrence&&this.targetProdType===G?(this.restDef=j.concat(W),!0):!1},P.prototype.walkOption=function(N,G,j){this.checkIsTarget(N,f.OPTION,G,j)||O.prototype.walkOption.call(this,N,G,j)},P.prototype.walkAtLeastOne=function(N,G,j){this.checkIsTarget(N,f.REPETITION_MANDATORY,G,j)||O.prototype.walkOption.call(this,N,G,j)},P.prototype.walkAtLeastOneSep=function(N,G,j){this.checkIsTarget(N,f.REPETITION_MANDATORY_WITH_SEPARATOR,G,j)||O.prototype.walkOption.call(this,N,G,j)},P.prototype.walkMany=function(N,G,j){this.checkIsTarget(N,f.REPETITION,G,j)||O.prototype.walkOption.call(this,N,G,j)},P.prototype.walkManySep=function(N,G,j){this.checkIsTarget(N,f.REPETITION_WITH_SEPARATOR,G,j)||O.prototype.walkOption.call(this,N,G,j)},P}(c.RestWalker),y=function(O){t(P,O);function P(N,G,j){var W=O.call(this)||this;return W.targetOccurrence=N,W.targetProdType=G,W.targetRef=j,W.result=[],W}return P.prototype.checkIsTarget=function(N,G){N.idx===this.targetOccurrence&&this.targetProdType===G&&(this.targetRef===void 0||N===this.targetRef)&&(this.result=N.definition)},P.prototype.visitOption=function(N){this.checkIsTarget(N,f.OPTION)},P.prototype.visitRepetition=function(N){this.checkIsTarget(N,f.REPETITION)},P.prototype.visitRepetitionMandatory=function(N){this.checkIsTarget(N,f.REPETITION_MANDATORY)},P.prototype.visitRepetitionMandatoryWithSeparator=function(N){this.checkIsTarget(N,f.REPETITION_MANDATORY_WITH_SEPARATOR)},P.prototype.visitRepetitionWithSeparator=function(N){this.checkIsTarget(N,f.REPETITION_WITH_SEPARATOR)},P.prototype.visitAlternation=function(N){this.checkIsTarget(N,f.ALTERNATION)},P}(_.GAstVisitor);function g(O){for(var P=new Array(O),N=0;N<O;N++)P[N]=[];return P}function T(O){for(var P=[""],N=0;N<O.length;N++){for(var G=O[N],j=[],W=0;W<P.length;W++){var ue=P[W];j.push(ue+"_"+G.tokenTypeIdx);for(var de=0;de<G.categoryMatches.length;de++){var ne="_"+G.categoryMatches[de];j.push(ue+ne)}}P=j}return P}function h(O,P,N){for(var G=0;G<O.length;G++)if(G!==N)for(var j=O[G],W=0;W<P.length;W++){var ue=P[W];if(j[ue]===!0)return!1}return!0}function I(O,P){for(var N=(0,o.default)(O,function(le){return(0,d.possiblePathsFrom)([le],1)}),G=g(N.length),j=(0,o.default)(N,function(le){var q={};return(0,u.default)(le,function(he){var Pe=T(he.partialPath);(0,u.default)(Pe,function(Ee){q[Ee]=!0})}),q}),W=N,ue=1;ue<=P;ue++){var de=W;W=g(de.length);for(var ne=function(le){for(var q=de[le],he=0;he<q.length;he++){var Pe=q[he].partialPath,Ee=q[he].suffixDef,xe=T(Pe),Ie=h(j,xe,le);if(Ie||(0,r.default)(Ee)||Pe.length===P){var Me=G[le];if(w(Me,Pe)===!1){Me.push(Pe);for(var Se=0;Se<xe.length;Se++){var at=xe[Se];j[le][at]=!0}}}else{var Ue=(0,d.possiblePathsFrom)(Ee,ue+1,Pe);W[le]=W[le].concat(Ue),(0,u.default)(Ue,function(ft){var ke=T(ft.partialPath);(0,u.default)(ke,function(Ze){j[le][Ze]=!0})})}}},J=0;J<de.length;J++)ne(J)}return G}e.lookAheadSequenceFromAlternatives=I;function U(O,P,N,G){var j=new y(O,f.ALTERNATION,G);return P.accept(j),I(j.result,N)}e.getLookaheadPathsForOr=U;function K(O,P,N,G){var j=new y(O,N);P.accept(j);var W=j.result,ue=new $(P,O,N),de=ue.startWalking(),ne=new v.Alternative({definition:W}),J=new v.Alternative({definition:de});return I([ne,J],G)}e.getLookaheadPathsForOptionalProd=K;function w(O,P){e:for(var N=0;N<O.length;N++){var G=O[N];if(G.length===P.length){for(var j=0;j<G.length;j++){var W=P[j],ue=G[j],de=W===ue||ue.categoryMatchesMap[W.tokenTypeIdx]!==void 0;if(de===!1)continue e}return!0}}return!1}e.containsPath=w;function x(O,P){return O.length<P.length&&(0,i.default)(O,function(N,G){var j=P[G];return N===j||j.categoryMatchesMap[N.tokenTypeIdx]})}e.isStrictPrefixOfPath=x;function B(O){return(0,i.default)(O,function(P){return(0,i.default)(P,function(N){return(0,i.default)(N,function(G){return(0,r.default)(G.categoryMatches)})})})}e.areTokenCategoriesNotUsed=B})(Dr);var ho=k&&k.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(r[i]=a[i])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),De=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ge,"__esModule",{value:!0});ge.checkPrefixAlternativesAmbiguities=ge.validateSomeNonEmptyLookaheadPath=ge.validateTooManyAlts=ge.RepetitionCollector=ge.validateAmbiguousAlternationAlternatives=ge.validateEmptyOrAlternative=ge.getFirstNoneTerminal=ge.validateNoLeftRecursion=ge.validateRuleIsOverridden=ge.validateRuleDoesNotAlreadyExist=ge.OccurrenceValidationCollector=ge.identifyProductionForDuplicates=ge.validateGrammar=void 0;var Sl=De(Mr),Ur=De(Ct),UI=De(qi),Nl=De(zt),GI=De(lo),jI=De(oo),BI=De(so),ln=De(et),mr=De(Be),WI=De(bl),po=De(_n),VI=De(Hu),KI=De(Wt),vo=De(Kt),st=De(RI),zI=De(en),wt=rt,_o=Le,Cn=Dr,HI=Ne,gt=Le,go=Le,YI=De(fo),XI=De(Sa),qI=gn;function ZI(e,t,n,r,a){var i=(0,st.default)(e,function(v){return JI(v,r)}),o=(0,st.default)(e,function(v){return mo(v,v,r)}),u=[],s=[],l=[];(0,Ur.default)(o)&&(u=(0,st.default)(e,function(v){return kl(v,r)}),s=(0,st.default)(e,function(v){return Ml(v,t,r)}),l=Dl(e,t,r));var d=tS(e,n,r),c=(0,st.default)(e,function(v){return xl(v,r)}),p=(0,st.default)(e,function(v){return Ll(v,e,a,r)});return i.concat(l,o,u,s,d,c,p)}ge.validateGrammar=ZI;function JI(e,t){var n=new $l;e.accept(n);var r=n.allProductions,a=(0,WI.default)(r,Pl),i=(0,VI.default)(a,function(u){return u.length>1}),o=(0,ln.default)((0,KI.default)(i),function(u){var s=(0,Sl.default)(u),l=t.buildDuplicateFoundError(e,u),d=(0,_o.getProductionDslName)(s),c={message:l,type:wt.ParserDefinitionErrorType.DUPLICATE_PRODUCTIONS,ruleName:e.name,dslName:d,occurrence:s.idx},p=Cl(s);return p&&(c.parameter=p),c});return o}function Pl(e){return"".concat((0,_o.getProductionDslName)(e),"_#_").concat(e.idx,"_#_").concat(Cl(e))}ge.identifyProductionForDuplicates=Pl;function Cl(e){return e instanceof gt.Terminal?e.terminalType.name:e instanceof gt.NonTerminal?e.nonTerminalName:""}var $l=function(e){ho(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.allProductions=[],n}return t.prototype.visitNonTerminal=function(n){this.allProductions.push(n)},t.prototype.visitOption=function(n){this.allProductions.push(n)},t.prototype.visitRepetitionWithSeparator=function(n){this.allProductions.push(n)},t.prototype.visitRepetitionMandatory=function(n){this.allProductions.push(n)},t.prototype.visitRepetitionMandatoryWithSeparator=function(n){this.allProductions.push(n)},t.prototype.visitRepetition=function(n){this.allProductions.push(n)},t.prototype.visitAlternation=function(n){this.allProductions.push(n)},t.prototype.visitTerminal=function(n){this.allProductions.push(n)},t}(go.GAstVisitor);ge.OccurrenceValidationCollector=$l;function Ll(e,t,n,r){var a=[],i=(0,po.default)(t,function(u,s){return s.name===e.name?u+1:u},0);if(i>1){var o=r.buildDuplicateRuleNameError({topLevelRule:e,grammarName:n});a.push({message:o,type:wt.ParserDefinitionErrorType.DUPLICATE_RULE_NAME,ruleName:e.name})}return a}ge.validateRuleDoesNotAlreadyExist=Ll;function QI(e,t,n){var r=[],a;return(0,vo.default)(t,e)||(a="Invalid rule override, rule: ->".concat(e,"<- cannot be overridden in the grammar: ->").concat(n,"<-")+"as it is not defined in any of the super grammars ",r.push({message:a,type:wt.ParserDefinitionErrorType.INVALID_RULE_OVERRIDE,ruleName:e})),r}ge.validateRuleIsOverridden=QI;function mo(e,t,n,r){r===void 0&&(r=[]);var a=[],i=rr(t.definition);if((0,Ur.default)(i))return[];var o=e.name,u=(0,vo.default)(i,e);u&&a.push({message:n.buildLeftRecursionError({topLevelRule:e,leftRecursionPath:r}),type:wt.ParserDefinitionErrorType.LEFT_RECURSION,ruleName:o});var s=(0,BI.default)(i,r.concat([e])),l=(0,st.default)(s,function(d){var c=(0,zI.default)(r);return c.push(d),mo(e,d,n,c)});return a.concat(l)}ge.validateNoLeftRecursion=mo;function rr(e){var t=[];if((0,Ur.default)(e))return t;var n=(0,Sl.default)(e);if(n instanceof gt.NonTerminal)t.push(n.referencedRule);else if(n instanceof gt.Alternative||n instanceof gt.Option||n instanceof gt.RepetitionMandatory||n instanceof gt.RepetitionMandatoryWithSeparator||n instanceof gt.RepetitionWithSeparator||n instanceof gt.Repetition)t=t.concat(rr(n.definition));else if(n instanceof gt.Alternation)t=(0,Nl.default)((0,ln.default)(n.definition,function(o){return rr(o.definition)}));else if(!(n instanceof gt.Terminal))throw Error("non exhaustive match");var r=(0,_o.isOptionalProd)(n),a=e.length>1;if(r&&a){var i=(0,UI.default)(e);return t.concat(rr(i))}else return t}ge.getFirstNoneTerminal=rr;var yo=function(e){ho(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.alternations=[],n}return t.prototype.visitAlternation=function(n){this.alternations.push(n)},t}(go.GAstVisitor);function kl(e,t){var n=new yo;e.accept(n);var r=n.alternations,a=(0,st.default)(r,function(i){var o=(0,YI.default)(i.definition);return(0,st.default)(o,function(u,s){var l=(0,HI.nextPossibleTokensAfter)([u],[],qI.tokenStructuredMatcher,1);return(0,Ur.default)(l)?[{message:t.buildEmptyAlternationError({topLevelRule:e,alternation:i,emptyChoiceIdx:s}),type:wt.ParserDefinitionErrorType.NONE_LAST_EMPTY_ALT,ruleName:e.name,occurrence:i.idx,alternative:s+1}]:[]})});return a}ge.validateEmptyOrAlternative=kl;function Ml(e,t,n){var r=new yo;e.accept(r);var a=r.alternations;a=(0,jI.default)(a,function(o){return o.ignoreAmbiguities===!0});var i=(0,st.default)(a,function(o){var u=o.idx,s=o.maxLookahead||t,l=(0,Cn.getLookaheadPathsForOr)(u,e,s,o),d=eS(l,o,e,n),c=Fl(l,o,e,n);return d.concat(c)});return i}ge.validateAmbiguousAlternationAlternatives=Ml;var wl=function(e){ho(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.allProductions=[],n}return t.prototype.visitRepetitionWithSeparator=function(n){this.allProductions.push(n)},t.prototype.visitRepetitionMandatory=function(n){this.allProductions.push(n)},t.prototype.visitRepetitionMandatoryWithSeparator=function(n){this.allProductions.push(n)},t.prototype.visitRepetition=function(n){this.allProductions.push(n)},t}(go.GAstVisitor);ge.RepetitionCollector=wl;function xl(e,t){var n=new yo;e.accept(n);var r=n.alternations,a=(0,st.default)(r,function(i){return i.definition.length>255?[{message:t.buildTooManyAlternativesError({topLevelRule:e,alternation:i}),type:wt.ParserDefinitionErrorType.TOO_MANY_ALTS,ruleName:e.name,occurrence:i.idx}]:[]});return a}ge.validateTooManyAlts=xl;function Dl(e,t,n){var r=[];return(0,mr.default)(e,function(a){var i=new wl;a.accept(i);var o=i.allProductions;(0,mr.default)(o,function(u){var s=(0,Cn.getProdType)(u),l=u.maxLookahead||t,d=u.idx,c=(0,Cn.getLookaheadPathsForOptionalProd)(d,a,s,l),p=c[0];if((0,Ur.default)((0,Nl.default)(p))){var v=n.buildEmptyRepetitionError({topLevelRule:a,repetition:u});r.push({message:v,type:wt.ParserDefinitionErrorType.NO_NON_EMPTY_LOOKAHEAD,ruleName:a.name})}})}),r}ge.validateSomeNonEmptyLookaheadPath=Dl;function eS(e,t,n,r){var a=[],i=(0,po.default)(e,function(u,s,l){return t.definition[l].ignoreAmbiguities===!0||(0,mr.default)(s,function(d){var c=[l];(0,mr.default)(e,function(p,v){l!==v&&(0,Cn.containsPath)(p,d)&&t.definition[v].ignoreAmbiguities!==!0&&c.push(v)}),c.length>1&&!(0,Cn.containsPath)(a,d)&&(a.push(d),u.push({alts:c,path:d}))}),u},[]),o=(0,ln.default)(i,function(u){var s=(0,ln.default)(u.alts,function(d){return d+1}),l=r.buildAlternationAmbiguityError({topLevelRule:n,alternation:t,ambiguityIndices:s,prefixPath:u.path});return{message:l,type:wt.ParserDefinitionErrorType.AMBIGUOUS_ALTS,ruleName:n.name,occurrence:t.idx,alternatives:u.alts}});return o}function Fl(e,t,n,r){var a=(0,po.default)(e,function(o,u,s){var l=(0,ln.default)(u,function(d){return{idx:s,path:d}});return o.concat(l)},[]),i=(0,XI.default)((0,st.default)(a,function(o){var u=t.definition[o.idx];if(u.ignoreAmbiguities===!0)return[];var s=o.idx,l=o.path,d=(0,GI.default)(a,function(p){return t.definition[p.idx].ignoreAmbiguities!==!0&&p.idx<s&&(0,Cn.isStrictPrefixOfPath)(p.path,l)}),c=(0,ln.default)(d,function(p){var v=[p.idx+1,s+1],_=t.idx===0?"":t.idx,f=r.buildAlternationPrefixAmbiguityError({topLevelRule:n,alternation:t,ambiguityIndices:v,prefixPath:p.path});return{message:f,type:wt.ParserDefinitionErrorType.AMBIGUOUS_PREFIX_ALTS,ruleName:n.name,occurrence:_,alternatives:v}});return c}));return i}ge.checkPrefixAlternativesAmbiguities=Fl;function tS(e,t,n){var r=[],a=(0,ln.default)(t,function(i){return i.name});return(0,mr.default)(e,function(i){var o=i.name;if((0,vo.default)(a,o)){var u=n.buildNamespaceConflictError(i);r.push({message:u,type:wt.ParserDefinitionErrorType.CONFLICT_TOKENS_RULES_NAMESPACE,ruleName:o})}}),r}var Ul=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Nn,"__esModule",{value:!0});Nn.validateGrammar=Nn.resolveGrammar=void 0;var nS=Ul(Be),Gl=Ul(yl),rS=Pn,aS=ge,jl=xr;function iS(e){var t=(0,Gl.default)(e,{errMsgProvider:jl.defaultGrammarResolverErrorProvider}),n={};return(0,nS.default)(e.rules,function(r){n[r.name]=r}),(0,rS.resolveGrammar)(n,t.errMsgProvider)}Nn.resolveGrammar=iS;function oS(e){return e=(0,Gl.default)(e,{errMsgProvider:jl.defaultGrammarValidatorErrorProvider}),(0,aS.validateGrammar)(e.rules,e.maxLookahead,e.tokenTypes,e.errMsgProvider,e.grammarName)}Nn.validateGrammar=oS;var Eo={},Ge={},Gr=k&&k.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(r[i]=a[i])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),sS=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ge,"__esModule",{value:!0});Ge.EarlyExitException=Ge.NotAllInputParsedException=Ge.NoViableAltException=Ge.MismatchedTokenException=Ge.isRecognitionException=void 0;var uS=sS(Kt),Bl="MismatchedTokenException",Wl="NoViableAltException",Vl="EarlyExitException",Kl="NotAllInputParsedException",zl=[Bl,Wl,Vl,Kl];Object.freeze(zl);function lS(e){return(0,uS.default)(zl,e.name)}Ge.isRecognitionException=lS;var Pa=function(e){Gr(t,e);function t(n,r){var a=this.constructor,i=e.call(this,n)||this;return i.token=r,i.resyncedTokens=[],Object.setPrototypeOf(i,a.prototype),Error.captureStackTrace&&Error.captureStackTrace(i,i.constructor),i}return t}(Error),cS=function(e){Gr(t,e);function t(n,r,a){var i=e.call(this,n,r)||this;return i.previousToken=a,i.name=Bl,i}return t}(Pa);Ge.MismatchedTokenException=cS;var fS=function(e){Gr(t,e);function t(n,r,a){var i=e.call(this,n,r)||this;return i.previousToken=a,i.name=Wl,i}return t}(Pa);Ge.NoViableAltException=fS;var dS=function(e){Gr(t,e);function t(n,r){var a=e.call(this,n,r)||this;return a.name=Kl,a}return t}(Pa);Ge.NotAllInputParsedException=dS;var hS=function(e){Gr(t,e);function t(n,r,a){var i=e.call(this,n,r)||this;return i.previousToken=a,i.name=Vl,i}return t}(Pa);Ge.EarlyExitException=hS;(function(e){var t=k&&k.__extends||function(){var b=function(A,S){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,y){$.__proto__=y}||function($,y){for(var g in y)Object.prototype.hasOwnProperty.call(y,g)&&($[g]=y[g])},b(A,S)};return function(A,S){if(typeof S!="function"&&S!==null)throw new TypeError("Class extends value "+String(S)+" is not a constructor or null");b(A,S);function $(){this.constructor=A}A.prototype=S===null?Object.create(S):($.prototype=S.prototype,new $)}}(),n=k&&k.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(e,"__esModule",{value:!0}),e.attemptInRepetitionRecovery=e.Recoverable=e.InRuleRecoveryException=e.IN_RULE_RECOVERY_EXCEPTION=e.EOF_FOLLOW_KEY=void 0;var r=vn,a=n(Ct),i=n(fo),o=n(zt),u=n(et),s=n(uo),l=n(ct),d=n(Kt),c=n(en),p=Ge,v=Lr,_=rt;e.EOF_FOLLOW_KEY={},e.IN_RULE_RECOVERY_EXCEPTION="InRuleRecoveryException";var f=function(b){t(A,b);function A(S){var $=b.call(this,S)||this;return $.name=e.IN_RULE_RECOVERY_EXCEPTION,$}return A}(Error);e.InRuleRecoveryException=f;var m=function(){function b(){}return b.prototype.initRecoverable=function(A){this.firstAfterRepMap={},this.resyncFollows={},this.recoveryEnabled=(0,l.default)(A,"recoveryEnabled")?A.recoveryEnabled:_.DEFAULT_PARSER_CONFIG.recoveryEnabled,this.recoveryEnabled&&(this.attemptInRepetitionRecovery=E)},b.prototype.getTokenToInsert=function(A){var S=(0,r.createTokenInstance)(A,"",NaN,NaN,NaN,NaN,NaN,NaN);return S.isInsertedInRecovery=!0,S},b.prototype.canTokenTypeBeInsertedInRecovery=function(A){return!0},b.prototype.canTokenTypeBeDeletedInRecovery=function(A){return!0},b.prototype.tryInRepetitionRecovery=function(A,S,$,y){for(var g=this,T=this.findReSyncTokenType(),h=this.exportLexerState(),I=[],U=!1,K=this.LA(1),w=this.LA(1),x=function(){var B=g.LA(0),O=g.errorMessageProvider.buildMismatchTokenMessage({expected:y,actual:K,previous:B,ruleName:g.getCurrRuleFullName()}),P=new p.MismatchedTokenException(O,K,g.LA(0));P.resyncedTokens=(0,i.default)(I),g.SAVE_ERROR(P)};!U;)if(this.tokenMatcher(w,y)){x();return}else if($.call(this)){x(),A.apply(this,S);return}else this.tokenMatcher(w,T)?U=!0:(w=this.SKIP_TOKEN(),this.addToResyncTokens(w,I));this.importLexerState(h)},b.prototype.shouldInRepetitionRecoveryBeTried=function(A,S,$){return!($===!1||this.tokenMatcher(this.LA(1),A)||this.isBackTracking()||this.canPerformInRuleRecovery(A,this.getFollowsForInRuleRecovery(A,S)))},b.prototype.getFollowsForInRuleRecovery=function(A,S){var $=this.getCurrentGrammarPath(A,S),y=this.getNextPossibleTokenTypes($);return y},b.prototype.tryInRuleRecovery=function(A,S){if(this.canRecoverWithSingleTokenInsertion(A,S)){var $=this.getTokenToInsert(A);return $}if(this.canRecoverWithSingleTokenDeletion(A)){var y=this.SKIP_TOKEN();return this.consumeToken(),y}throw new f("sad sad panda")},b.prototype.canPerformInRuleRecovery=function(A,S){return this.canRecoverWithSingleTokenInsertion(A,S)||this.canRecoverWithSingleTokenDeletion(A)},b.prototype.canRecoverWithSingleTokenInsertion=function(A,S){var $=this;if(!this.canTokenTypeBeInsertedInRecovery(A)||(0,a.default)(S))return!1;var y=this.LA(1),g=(0,s.default)(S,function(T){return $.tokenMatcher(y,T)})!==void 0;return g},b.prototype.canRecoverWithSingleTokenDeletion=function(A){if(!this.canTokenTypeBeDeletedInRecovery(A))return!1;var S=this.tokenMatcher(this.LA(2),A);return S},b.prototype.isInCurrentRuleReSyncSet=function(A){var S=this.getCurrFollowKey(),$=this.getFollowSetFromFollowKey(S);return(0,d.default)($,A)},b.prototype.findReSyncTokenType=function(){for(var A=this.flattenFollowSet(),S=this.LA(1),$=2;;){var y=(0,s.default)(A,function(g){var T=(0,r.tokenMatcher)(S,g);return T});if(y!==void 0)return y;S=this.LA($),$++}},b.prototype.getCurrFollowKey=function(){if(this.RULE_STACK.length===1)return e.EOF_FOLLOW_KEY;var A=this.getLastExplicitRuleShortName(),S=this.getLastExplicitRuleOccurrenceIndex(),$=this.getPreviousExplicitRuleShortName();return{ruleName:this.shortRuleNameToFullName(A),idxInCallingRule:S,inRule:this.shortRuleNameToFullName($)}},b.prototype.buildFullFollowKeyStack=function(){var A=this,S=this.RULE_STACK,$=this.RULE_OCCURRENCE_STACK;return(0,u.default)(S,function(y,g){return g===0?e.EOF_FOLLOW_KEY:{ruleName:A.shortRuleNameToFullName(y),idxInCallingRule:$[g],inRule:A.shortRuleNameToFullName(S[g-1])}})},b.prototype.flattenFollowSet=function(){var A=this,S=(0,u.default)(this.buildFullFollowKeyStack(),function($){return A.getFollowSetFromFollowKey($)});return(0,o.default)(S)},b.prototype.getFollowSetFromFollowKey=function(A){if(A===e.EOF_FOLLOW_KEY)return[r.EOF];var S=A.ruleName+A.idxInCallingRule+v.IN+A.inRule;return this.resyncFollows[S]},b.prototype.addToResyncTokens=function(A,S){return this.tokenMatcher(A,r.EOF)||S.push(A),S},b.prototype.reSyncTo=function(A){for(var S=[],$=this.LA(1);this.tokenMatcher($,A)===!1;)$=this.SKIP_TOKEN(),this.addToResyncTokens($,S);return(0,i.default)(S)},b.prototype.attemptInRepetitionRecovery=function(A,S,$,y,g,T,h){},b.prototype.getCurrentGrammarPath=function(A,S){var $=this.getHumanReadableRuleStack(),y=(0,c.default)(this.RULE_OCCURRENCE_STACK),g={ruleStack:$,occurrenceStack:y,lastTok:A,lastTokOccurrence:S};return g},b.prototype.getHumanReadableRuleStack=function(){var A=this;return(0,u.default)(this.RULE_STACK,function(S){return A.shortRuleNameToFullName(S)})},b}();e.Recoverable=m;function E(b,A,S,$,y,g,T){var h=this.getKeyForAutomaticLookahead($,y),I=this.firstAfterRepMap[h];if(I===void 0){var U=this.getCurrRuleFullName(),K=this.getGAstProductions()[U],w=new g(K,y);I=w.startWalking(),this.firstAfterRepMap[h]=I}var x=I.token,B=I.occurrence,O=I.isEndOfRule;this.RULE_STACK.length===1&&O&&x===void 0&&(x=r.EOF,B=1),!(x===void 0||B===void 0)&&this.shouldInRepetitionRecoveryBeTried(x,B,T)&&this.tryInRepetitionRecovery(b,A,S,x)}e.attemptInRepetitionRecovery=E})(Eo);var $n={},Ca={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getKeyForAutomaticLookahead=e.AT_LEAST_ONE_SEP_IDX=e.MANY_SEP_IDX=e.AT_LEAST_ONE_IDX=e.MANY_IDX=e.OPTION_IDX=e.OR_IDX=e.BITS_FOR_ALT_IDX=e.BITS_FOR_RULE_IDX=e.BITS_FOR_OCCURRENCE_IDX=e.BITS_FOR_METHOD_TYPE=void 0,e.BITS_FOR_METHOD_TYPE=4,e.BITS_FOR_OCCURRENCE_IDX=8,e.BITS_FOR_RULE_IDX=12,e.BITS_FOR_ALT_IDX=8,e.OR_IDX=1<<e.BITS_FOR_OCCURRENCE_IDX,e.OPTION_IDX=2<<e.BITS_FOR_OCCURRENCE_IDX,e.MANY_IDX=3<<e.BITS_FOR_OCCURRENCE_IDX,e.AT_LEAST_ONE_IDX=4<<e.BITS_FOR_OCCURRENCE_IDX,e.MANY_SEP_IDX=5<<e.BITS_FOR_OCCURRENCE_IDX,e.AT_LEAST_ONE_SEP_IDX=6<<e.BITS_FOR_OCCURRENCE_IDX;function t(n,r,a){return a|r|n}e.getKeyForAutomaticLookahead=t,32-e.BITS_FOR_ALT_IDX})(Ca);var pS=k&&k.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(r[i]=a[i])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Hl=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty($n,"__esModule",{value:!0});$n.collectMethods=$n.LooksAhead=void 0;var Ut=Dr,tn=Hl(Be),Ns=Hl(ct),Ps=rt,Gt=Ca,vS=Le,Tn=Le,_S=function(){function e(){}return e.prototype.initLooksAhead=function(t){this.dynamicTokensEnabled=(0,Ns.default)(t,"dynamicTokensEnabled")?t.dynamicTokensEnabled:Ps.DEFAULT_PARSER_CONFIG.dynamicTokensEnabled,this.maxLookahead=(0,Ns.default)(t,"maxLookahead")?t.maxLookahead:Ps.DEFAULT_PARSER_CONFIG.maxLookahead,this.lookAheadFuncsCache=new Map},e.prototype.preComputeLookaheadFunctions=function(t){var n=this;(0,tn.default)(t,function(r){n.TRACE_INIT("".concat(r.name," Rule Lookahead"),function(){var a=Yl(r),i=a.alternation,o=a.repetition,u=a.option,s=a.repetitionMandatory,l=a.repetitionMandatoryWithSeparator,d=a.repetitionWithSeparator;(0,tn.default)(i,function(c){var p=c.idx===0?"":c.idx;n.TRACE_INIT("".concat((0,Tn.getProductionDslName)(c)).concat(p),function(){var v=(0,Ut.buildLookaheadFuncForOr)(c.idx,r,c.maxLookahead||n.maxLookahead,c.hasPredicates,n.dynamicTokensEnabled,n.lookAheadBuilderForAlternatives),_=(0,Gt.getKeyForAutomaticLookahead)(n.fullRuleNameToShort[r.name],Gt.OR_IDX,c.idx);n.setLaFuncCache(_,v)})}),(0,tn.default)(o,function(c){n.computeLookaheadFunc(r,c.idx,Gt.MANY_IDX,Ut.PROD_TYPE.REPETITION,c.maxLookahead,(0,Tn.getProductionDslName)(c))}),(0,tn.default)(u,function(c){n.computeLookaheadFunc(r,c.idx,Gt.OPTION_IDX,Ut.PROD_TYPE.OPTION,c.maxLookahead,(0,Tn.getProductionDslName)(c))}),(0,tn.default)(s,function(c){n.computeLookaheadFunc(r,c.idx,Gt.AT_LEAST_ONE_IDX,Ut.PROD_TYPE.REPETITION_MANDATORY,c.maxLookahead,(0,Tn.getProductionDslName)(c))}),(0,tn.default)(l,function(c){n.computeLookaheadFunc(r,c.idx,Gt.AT_LEAST_ONE_SEP_IDX,Ut.PROD_TYPE.REPETITION_MANDATORY_WITH_SEPARATOR,c.maxLookahead,(0,Tn.getProductionDslName)(c))}),(0,tn.default)(d,function(c){n.computeLookaheadFunc(r,c.idx,Gt.MANY_SEP_IDX,Ut.PROD_TYPE.REPETITION_WITH_SEPARATOR,c.maxLookahead,(0,Tn.getProductionDslName)(c))})})})},e.prototype.computeLookaheadFunc=function(t,n,r,a,i,o){var u=this;this.TRACE_INIT("".concat(o).concat(n===0?"":n),function(){var s=(0,Ut.buildLookaheadFuncForOptionalProd)(n,t,i||u.maxLookahead,u.dynamicTokensEnabled,a,u.lookAheadBuilderForOptional),l=(0,Gt.getKeyForAutomaticLookahead)(u.fullRuleNameToShort[t.name],r,n);u.setLaFuncCache(l,s)})},e.prototype.lookAheadBuilderForOptional=function(t,n,r){return(0,Ut.buildSingleAlternativeLookaheadFunction)(t,n,r)},e.prototype.lookAheadBuilderForAlternatives=function(t,n,r,a){return(0,Ut.buildAlternativesLookAheadFunc)(t,n,r,a)},e.prototype.getKeyForAutomaticLookahead=function(t,n){var r=this.getLastExplicitRuleShortName();return(0,Gt.getKeyForAutomaticLookahead)(r,t,n)},e.prototype.getLaFuncFromCache=function(t){return this.lookAheadFuncsCache.get(t)},e.prototype.setLaFuncCache=function(t,n){this.lookAheadFuncsCache.set(t,n)},e}();$n.LooksAhead=_S;var gS=function(e){pS(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]},n}return t.prototype.reset=function(){this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}},t.prototype.visitOption=function(n){this.dslMethods.option.push(n)},t.prototype.visitRepetitionWithSeparator=function(n){this.dslMethods.repetitionWithSeparator.push(n)},t.prototype.visitRepetitionMandatory=function(n){this.dslMethods.repetitionMandatory.push(n)},t.prototype.visitRepetitionMandatoryWithSeparator=function(n){this.dslMethods.repetitionMandatoryWithSeparator.push(n)},t.prototype.visitRepetition=function(n){this.dslMethods.repetition.push(n)},t.prototype.visitAlternation=function(n){this.dslMethods.alternation.push(n)},t}(vS.GAstVisitor),Kr=new gS;function Yl(e){Kr.reset(),e.accept(Kr);var t=Kr.dslMethods;return Kr.reset(),t}$n.collectMethods=Yl;var $a={},Rt={};Object.defineProperty(Rt,"__esModule",{value:!0});Rt.addNoneTerminalToCst=Rt.addTerminalToCst=Rt.setNodeLocationFull=Rt.setNodeLocationOnlyOffset=void 0;function mS(e,t){isNaN(e.startOffset)===!0?(e.startOffset=t.startOffset,e.endOffset=t.endOffset):e.endOffset<t.endOffset&&(e.endOffset=t.endOffset)}Rt.setNodeLocationOnlyOffset=mS;function yS(e,t){isNaN(e.startOffset)===!0?(e.startOffset=t.startOffset,e.startColumn=t.startColumn,e.startLine=t.startLine,e.endOffset=t.endOffset,e.endColumn=t.endColumn,e.endLine=t.endLine):e.endOffset<t.endOffset&&(e.endOffset=t.endOffset,e.endColumn=t.endColumn,e.endLine=t.endLine)}Rt.setNodeLocationFull=yS;function ES(e,t,n){e.children[n]===void 0?e.children[n]=[t]:e.children[n].push(t)}Rt.addTerminalToCst=ES;function TS(e,t,n){e.children[t]===void 0?e.children[t]=[n]:e.children[t].push(n)}Rt.addNoneTerminalToCst=TS;var Xl={},La={};Object.defineProperty(La,"__esModule",{value:!0});La.defineNameProp=void 0;var AS="name";function bS(e,t){Object.defineProperty(e,AS,{enumerable:!1,configurable:!0,writable:!1,value:t})}La.defineNameProp=bS;(function(e){var t=k&&k.__importDefault||function($){return $&&$.__esModule?$:{default:$}};Object.defineProperty(e,"__esModule",{value:!0}),e.validateRedundantMethods=e.validateMissingCstMethods=e.validateVisitor=e.CstVisitorDefinitionError=e.createBaseVisitorConstructorWithDefaults=e.createBaseSemanticVisitorConstructor=e.defaultVisit=void 0;var n=t(Ct),r=t(Sa),a=t(me),i=t(et),o=t(Be),u=t(lo),s=t(lt),l=t(br),d=t(Bn),c=t(Kt),p=La;function v($,y){for(var g=(0,s.default)($),T=g.length,h=0;h<T;h++)for(var I=g[h],U=$[I],K=U.length,w=0;w<K;w++){var x=U[w];x.tokenTypeIdx===void 0&&this[x.name](x.children,y)}}e.defaultVisit=v;function _($,y){var g=function(){};(0,p.defineNameProp)(g,$+"BaseSemantics");var T={visit:function(h,I){if((0,a.default)(h)&&(h=h[0]),!(0,d.default)(h))return this[h.name](h.children,I)},validateVisitor:function(){var h=E(this,y);if(!(0,n.default)(h)){var I=(0,i.default)(h,function(U){return U.msg});throw Error("Errors Detected in CST Visitor <".concat(this.constructor.name,`>:
	`)+"".concat(I.join(`

`).replace(/\n/g,`
	`)))}}};return g.prototype=T,g.prototype.constructor=g,g._RULE_NAMES=y,g}e.createBaseSemanticVisitorConstructor=_;function f($,y,g){var T=function(){};(0,p.defineNameProp)(T,$+"BaseSemanticsWithDefaults");var h=Object.create(g.prototype);return(0,o.default)(y,function(I){h[I]=v}),T.prototype=h,T.prototype.constructor=T,T}e.createBaseVisitorConstructorWithDefaults=f;var m;(function($){$[$.REDUNDANT_METHOD=0]="REDUNDANT_METHOD",$[$.MISSING_METHOD=1]="MISSING_METHOD"})(m=e.CstVisitorDefinitionError||(e.CstVisitorDefinitionError={}));function E($,y){var g=b($,y),T=S($,y);return g.concat(T)}e.validateVisitor=E;function b($,y){var g=(0,u.default)(y,function(h){return(0,l.default)($[h])===!1}),T=(0,i.default)(g,function(h){return{msg:"Missing visitor method: <".concat(h,"> on ").concat($.constructor.name," CST Visitor."),type:m.MISSING_METHOD,methodName:h}});return(0,r.default)(T)}e.validateMissingCstMethods=b;var A=["constructor","visit","validateVisitor"];function S($,y){var g=[];for(var T in $)(0,l.default)($[T])&&!(0,c.default)(A,T)&&!(0,c.default)(y,T)&&g.push({msg:"Redundant visitor method: <".concat(T,"> on ").concat($.constructor.name,` CST Visitor
`)+`There is no Grammar Rule corresponding to this method's name.
`,type:m.REDUNDANT_METHOD,methodName:T});return g}e.validateRedundantMethods=S})(Xl);var ka=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty($a,"__esModule",{value:!0});$a.TreeBuilder=void 0;var An=Rt,ze=ka(no),OS=ka(ct),Cs=ka(lt),$s=ka(Bn),Ls=Xl,RS=rt,IS=function(){function e(){}return e.prototype.initTreeBuilder=function(t){if(this.CST_STACK=[],this.outputCst=t.outputCst,this.nodeLocationTracking=(0,OS.default)(t,"nodeLocationTracking")?t.nodeLocationTracking:RS.DEFAULT_PARSER_CONFIG.nodeLocationTracking,!this.outputCst)this.cstInvocationStateUpdate=ze.default,this.cstFinallyStateUpdate=ze.default,this.cstPostTerminal=ze.default,this.cstPostNonTerminal=ze.default,this.cstPostRule=ze.default;else if(/full/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=An.setNodeLocationFull,this.setNodeLocationFromNode=An.setNodeLocationFull,this.cstPostRule=ze.default,this.setInitialNodeLocation=this.setInitialNodeLocationFullRecovery):(this.setNodeLocationFromToken=ze.default,this.setNodeLocationFromNode=ze.default,this.cstPostRule=this.cstPostRuleFull,this.setInitialNodeLocation=this.setInitialNodeLocationFullRegular);else if(/onlyOffset/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=An.setNodeLocationOnlyOffset,this.setNodeLocationFromNode=An.setNodeLocationOnlyOffset,this.cstPostRule=ze.default,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRecovery):(this.setNodeLocationFromToken=ze.default,this.setNodeLocationFromNode=ze.default,this.cstPostRule=this.cstPostRuleOnlyOffset,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRegular);else if(/none/i.test(this.nodeLocationTracking))this.setNodeLocationFromToken=ze.default,this.setNodeLocationFromNode=ze.default,this.cstPostRule=ze.default,this.setInitialNodeLocation=ze.default;else throw Error('Invalid <nodeLocationTracking> config option: "'.concat(t.nodeLocationTracking,'"'))},e.prototype.setInitialNodeLocationOnlyOffsetRecovery=function(t){t.location={startOffset:NaN,endOffset:NaN}},e.prototype.setInitialNodeLocationOnlyOffsetRegular=function(t){t.location={startOffset:this.LA(1).startOffset,endOffset:NaN}},e.prototype.setInitialNodeLocationFullRecovery=function(t){t.location={startOffset:NaN,startLine:NaN,startColumn:NaN,endOffset:NaN,endLine:NaN,endColumn:NaN}},e.prototype.setInitialNodeLocationFullRegular=function(t){var n=this.LA(1);t.location={startOffset:n.startOffset,startLine:n.startLine,startColumn:n.startColumn,endOffset:NaN,endLine:NaN,endColumn:NaN}},e.prototype.cstInvocationStateUpdate=function(t){var n={name:t,children:Object.create(null)};this.setInitialNodeLocation(n),this.CST_STACK.push(n)},e.prototype.cstFinallyStateUpdate=function(){this.CST_STACK.pop()},e.prototype.cstPostRuleFull=function(t){var n=this.LA(0),r=t.location;r.startOffset<=n.startOffset?(r.endOffset=n.endOffset,r.endLine=n.endLine,r.endColumn=n.endColumn):(r.startOffset=NaN,r.startLine=NaN,r.startColumn=NaN)},e.prototype.cstPostRuleOnlyOffset=function(t){var n=this.LA(0),r=t.location;r.startOffset<=n.startOffset?r.endOffset=n.endOffset:r.startOffset=NaN},e.prototype.cstPostTerminal=function(t,n){var r=this.CST_STACK[this.CST_STACK.length-1];(0,An.addTerminalToCst)(r,n,t),this.setNodeLocationFromToken(r.location,n)},e.prototype.cstPostNonTerminal=function(t,n){var r=this.CST_STACK[this.CST_STACK.length-1];(0,An.addNoneTerminalToCst)(r,n,t),this.setNodeLocationFromNode(r.location,t.location)},e.prototype.getBaseCstVisitorConstructor=function(){if((0,$s.default)(this.baseCstVisitorConstructor)){var t=(0,Ls.createBaseSemanticVisitorConstructor)(this.className,(0,Cs.default)(this.gastProductionsCache));return this.baseCstVisitorConstructor=t,t}return this.baseCstVisitorConstructor},e.prototype.getBaseCstVisitorConstructorWithDefaults=function(){if((0,$s.default)(this.baseCstVisitorWithDefaultsConstructor)){var t=(0,Ls.createBaseVisitorConstructorWithDefaults)(this.className,(0,Cs.default)(this.gastProductionsCache),this.getBaseCstVisitorConstructor());return this.baseCstVisitorWithDefaultsConstructor=t,t}return this.baseCstVisitorWithDefaultsConstructor},e.prototype.getLastExplicitRuleShortName=function(){var t=this.RULE_STACK;return t[t.length-1]},e.prototype.getPreviousExplicitRuleShortName=function(){var t=this.RULE_STACK;return t[t.length-2]},e.prototype.getLastExplicitRuleOccurrenceIndex=function(){var t=this.RULE_OCCURRENCE_STACK;return t[t.length-1]},e}();$a.TreeBuilder=IS;var Ma={};Object.defineProperty(Ma,"__esModule",{value:!0});Ma.LexerAdapter=void 0;var ks=rt,SS=function(){function e(){}return e.prototype.initLexerAdapter=function(){this.tokVector=[],this.tokVectorLength=0,this.currIdx=-1},Object.defineProperty(e.prototype,"input",{get:function(){return this.tokVector},set:function(t){if(this.selfAnalysisDone!==!0)throw Error("Missing <performSelfAnalysis> invocation at the end of the Parser's constructor.");this.reset(),this.tokVector=t,this.tokVectorLength=t.length},enumerable:!1,configurable:!0}),e.prototype.SKIP_TOKEN=function(){return this.currIdx<=this.tokVector.length-2?(this.consumeToken(),this.LA(1)):ks.END_OF_FILE},e.prototype.LA=function(t){var n=this.currIdx+t;return n<0||this.tokVectorLength<=n?ks.END_OF_FILE:this.tokVector[n]},e.prototype.consumeToken=function(){this.currIdx++},e.prototype.exportLexerState=function(){return this.currIdx},e.prototype.importLexerState=function(t){this.currIdx=t},e.prototype.resetLexerState=function(){this.currIdx=-1},e.prototype.moveToTerminatedState=function(){this.currIdx=this.tokVector.length-1},e.prototype.getLexerPosition=function(){return this.exportLexerState()},e}();Ma.LexerAdapter=SS;var wa={},ql=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(wa,"__esModule",{value:!0});wa.RecognizerApi=void 0;var NS=ql(Wt),PS=ql(Kt),CS=Ge,ii=rt,$S=xr,LS=ge,kS=Le,MS=function(){function e(){}return e.prototype.ACTION=function(t){return t.call(this)},e.prototype.consume=function(t,n,r){return this.consumeInternal(n,t,r)},e.prototype.subrule=function(t,n,r){return this.subruleInternal(n,t,r)},e.prototype.option=function(t,n){return this.optionInternal(n,t)},e.prototype.or=function(t,n){return this.orInternal(n,t)},e.prototype.many=function(t,n){return this.manyInternal(t,n)},e.prototype.atLeastOne=function(t,n){return this.atLeastOneInternal(t,n)},e.prototype.CONSUME=function(t,n){return this.consumeInternal(t,0,n)},e.prototype.CONSUME1=function(t,n){return this.consumeInternal(t,1,n)},e.prototype.CONSUME2=function(t,n){return this.consumeInternal(t,2,n)},e.prototype.CONSUME3=function(t,n){return this.consumeInternal(t,3,n)},e.prototype.CONSUME4=function(t,n){return this.consumeInternal(t,4,n)},e.prototype.CONSUME5=function(t,n){return this.consumeInternal(t,5,n)},e.prototype.CONSUME6=function(t,n){return this.consumeInternal(t,6,n)},e.prototype.CONSUME7=function(t,n){return this.consumeInternal(t,7,n)},e.prototype.CONSUME8=function(t,n){return this.consumeInternal(t,8,n)},e.prototype.CONSUME9=function(t,n){return this.consumeInternal(t,9,n)},e.prototype.SUBRULE=function(t,n){return this.subruleInternal(t,0,n)},e.prototype.SUBRULE1=function(t,n){return this.subruleInternal(t,1,n)},e.prototype.SUBRULE2=function(t,n){return this.subruleInternal(t,2,n)},e.prototype.SUBRULE3=function(t,n){return this.subruleInternal(t,3,n)},e.prototype.SUBRULE4=function(t,n){return this.subruleInternal(t,4,n)},e.prototype.SUBRULE5=function(t,n){return this.subruleInternal(t,5,n)},e.prototype.SUBRULE6=function(t,n){return this.subruleInternal(t,6,n)},e.prototype.SUBRULE7=function(t,n){return this.subruleInternal(t,7,n)},e.prototype.SUBRULE8=function(t,n){return this.subruleInternal(t,8,n)},e.prototype.SUBRULE9=function(t,n){return this.subruleInternal(t,9,n)},e.prototype.OPTION=function(t){return this.optionInternal(t,0)},e.prototype.OPTION1=function(t){return this.optionInternal(t,1)},e.prototype.OPTION2=function(t){return this.optionInternal(t,2)},e.prototype.OPTION3=function(t){return this.optionInternal(t,3)},e.prototype.OPTION4=function(t){return this.optionInternal(t,4)},e.prototype.OPTION5=function(t){return this.optionInternal(t,5)},e.prototype.OPTION6=function(t){return this.optionInternal(t,6)},e.prototype.OPTION7=function(t){return this.optionInternal(t,7)},e.prototype.OPTION8=function(t){return this.optionInternal(t,8)},e.prototype.OPTION9=function(t){return this.optionInternal(t,9)},e.prototype.OR=function(t){return this.orInternal(t,0)},e.prototype.OR1=function(t){return this.orInternal(t,1)},e.prototype.OR2=function(t){return this.orInternal(t,2)},e.prototype.OR3=function(t){return this.orInternal(t,3)},e.prototype.OR4=function(t){return this.orInternal(t,4)},e.prototype.OR5=function(t){return this.orInternal(t,5)},e.prototype.OR6=function(t){return this.orInternal(t,6)},e.prototype.OR7=function(t){return this.orInternal(t,7)},e.prototype.OR8=function(t){return this.orInternal(t,8)},e.prototype.OR9=function(t){return this.orInternal(t,9)},e.prototype.MANY=function(t){this.manyInternal(0,t)},e.prototype.MANY1=function(t){this.manyInternal(1,t)},e.prototype.MANY2=function(t){this.manyInternal(2,t)},e.prototype.MANY3=function(t){this.manyInternal(3,t)},e.prototype.MANY4=function(t){this.manyInternal(4,t)},e.prototype.MANY5=function(t){this.manyInternal(5,t)},e.prototype.MANY6=function(t){this.manyInternal(6,t)},e.prototype.MANY7=function(t){this.manyInternal(7,t)},e.prototype.MANY8=function(t){this.manyInternal(8,t)},e.prototype.MANY9=function(t){this.manyInternal(9,t)},e.prototype.MANY_SEP=function(t){this.manySepFirstInternal(0,t)},e.prototype.MANY_SEP1=function(t){this.manySepFirstInternal(1,t)},e.prototype.MANY_SEP2=function(t){this.manySepFirstInternal(2,t)},e.prototype.MANY_SEP3=function(t){this.manySepFirstInternal(3,t)},e.prototype.MANY_SEP4=function(t){this.manySepFirstInternal(4,t)},e.prototype.MANY_SEP5=function(t){this.manySepFirstInternal(5,t)},e.prototype.MANY_SEP6=function(t){this.manySepFirstInternal(6,t)},e.prototype.MANY_SEP7=function(t){this.manySepFirstInternal(7,t)},e.prototype.MANY_SEP8=function(t){this.manySepFirstInternal(8,t)},e.prototype.MANY_SEP9=function(t){this.manySepFirstInternal(9,t)},e.prototype.AT_LEAST_ONE=function(t){this.atLeastOneInternal(0,t)},e.prototype.AT_LEAST_ONE1=function(t){return this.atLeastOneInternal(1,t)},e.prototype.AT_LEAST_ONE2=function(t){this.atLeastOneInternal(2,t)},e.prototype.AT_LEAST_ONE3=function(t){this.atLeastOneInternal(3,t)},e.prototype.AT_LEAST_ONE4=function(t){this.atLeastOneInternal(4,t)},e.prototype.AT_LEAST_ONE5=function(t){this.atLeastOneInternal(5,t)},e.prototype.AT_LEAST_ONE6=function(t){this.atLeastOneInternal(6,t)},e.prototype.AT_LEAST_ONE7=function(t){this.atLeastOneInternal(7,t)},e.prototype.AT_LEAST_ONE8=function(t){this.atLeastOneInternal(8,t)},e.prototype.AT_LEAST_ONE9=function(t){this.atLeastOneInternal(9,t)},e.prototype.AT_LEAST_ONE_SEP=function(t){this.atLeastOneSepFirstInternal(0,t)},e.prototype.AT_LEAST_ONE_SEP1=function(t){this.atLeastOneSepFirstInternal(1,t)},e.prototype.AT_LEAST_ONE_SEP2=function(t){this.atLeastOneSepFirstInternal(2,t)},e.prototype.AT_LEAST_ONE_SEP3=function(t){this.atLeastOneSepFirstInternal(3,t)},e.prototype.AT_LEAST_ONE_SEP4=function(t){this.atLeastOneSepFirstInternal(4,t)},e.prototype.AT_LEAST_ONE_SEP5=function(t){this.atLeastOneSepFirstInternal(5,t)},e.prototype.AT_LEAST_ONE_SEP6=function(t){this.atLeastOneSepFirstInternal(6,t)},e.prototype.AT_LEAST_ONE_SEP7=function(t){this.atLeastOneSepFirstInternal(7,t)},e.prototype.AT_LEAST_ONE_SEP8=function(t){this.atLeastOneSepFirstInternal(8,t)},e.prototype.AT_LEAST_ONE_SEP9=function(t){this.atLeastOneSepFirstInternal(9,t)},e.prototype.RULE=function(t,n,r){if(r===void 0&&(r=ii.DEFAULT_RULE_CONFIG),(0,PS.default)(this.definedRulesNames,t)){var a=$S.defaultGrammarValidatorErrorProvider.buildDuplicateRuleNameError({topLevelRule:t,grammarName:this.className}),i={message:a,type:ii.ParserDefinitionErrorType.DUPLICATE_RULE_NAME,ruleName:t};this.definitionErrors.push(i)}this.definedRulesNames.push(t);var o=this.defineRule(t,n,r);return this[t]=o,o},e.prototype.OVERRIDE_RULE=function(t,n,r){r===void 0&&(r=ii.DEFAULT_RULE_CONFIG);var a=(0,LS.validateRuleIsOverridden)(t,this.definedRulesNames,this.className);this.definitionErrors=this.definitionErrors.concat(a);var i=this.defineRule(t,n,r);return this[t]=i,i},e.prototype.BACKTRACK=function(t,n){return function(){this.isBackTrackingStack.push(1);var r=this.saveRecogState();try{return t.apply(this,n),!0}catch(a){if((0,CS.isRecognitionException)(a))return!1;throw a}finally{this.reloadRecogState(r),this.isBackTrackingStack.pop()}}},e.prototype.getGAstProductions=function(){return this.gastProductionsCache},e.prototype.getSerializedGastProductions=function(){return(0,kS.serializeGrammar)((0,NS.default)(this.gastProductionsCache))},e}();wa.RecognizerApi=MS;var xa={},xt=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(xa,"__esModule",{value:!0});xa.RecognizerEngine=void 0;var Ms=xt(Ct),oi=xt(me),si=xt(zt),ws=xt(Oa),wS=xt(ro),xS=xt(St),Xn=xt(ct),qn=xt(Wt),xs=xt(_n),Ds=xt(en),tt=Ca,zr=Ge,Fs=Dr,bn=Ne,Us=rt,DS=Eo,Gs=vn,Zn=gn,FS=function(){function e(){}return e.prototype.initRecognizerEngine=function(t,n){if(this.className=this.constructor.name,this.shortRuleNameToFull={},this.fullRuleNameToShort={},this.ruleShortNameIdx=256,this.tokenMatcher=Zn.tokenStructuredMatcherNoCategories,this.subruleIdx=0,this.definedRulesNames=[],this.tokensMap={},this.isBackTrackingStack=[],this.RULE_STACK=[],this.RULE_OCCURRENCE_STACK=[],this.gastProductionsCache={},(0,Xn.default)(n,"serializedGrammar"))throw Error(`The Parser's configuration can no longer contain a <serializedGrammar> property.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_6-0-0
	For Further details.`);if((0,oi.default)(t)){if((0,Ms.default)(t))throw Error(`A Token Vocabulary cannot be empty.
	Note that the first argument for the parser constructor
	is no longer a Token vector (since v4.0).`);if(typeof t[0].startOffset=="number")throw Error(`The Parser constructor no longer accepts a token vector as the first argument.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_4-0-0
	For Further details.`)}if((0,oi.default)(t))this.tokensMap=(0,xs.default)(t,function(u,s){return u[s.name]=s,u},{});else if((0,Xn.default)(t,"modes")&&(0,ws.default)((0,si.default)((0,qn.default)(t.modes)),Zn.isTokenType)){var r=(0,si.default)((0,qn.default)(t.modes)),a=(0,wS.default)(r);this.tokensMap=(0,xs.default)(a,function(u,s){return u[s.name]=s,u},{})}else if((0,xS.default)(t))this.tokensMap=(0,Ds.default)(t);else throw new Error("<tokensDictionary> argument must be An Array of Token constructors, A dictionary of Token constructors or an IMultiModeLexerDefinition");this.tokensMap.EOF=Gs.EOF;var i=(0,Xn.default)(t,"modes")?(0,si.default)((0,qn.default)(t.modes)):(0,qn.default)(t),o=(0,ws.default)(i,function(u){return(0,Ms.default)(u.categoryMatches)});this.tokenMatcher=o?Zn.tokenStructuredMatcherNoCategories:Zn.tokenStructuredMatcher,(0,Zn.augmentTokenTypes)((0,qn.default)(this.tokensMap))},e.prototype.defineRule=function(t,n,r){if(this.selfAnalysisDone)throw Error("Grammar rule <".concat(t,`> may not be defined after the 'performSelfAnalysis' method has been called'
`)+"Make sure that all grammar rule definitions are done before 'performSelfAnalysis' is called.");var a=(0,Xn.default)(r,"resyncEnabled")?r.resyncEnabled:Us.DEFAULT_RULE_CONFIG.resyncEnabled,i=(0,Xn.default)(r,"recoveryValueFunc")?r.recoveryValueFunc:Us.DEFAULT_RULE_CONFIG.recoveryValueFunc,o=this.ruleShortNameIdx<<tt.BITS_FOR_METHOD_TYPE+tt.BITS_FOR_OCCURRENCE_IDX;this.ruleShortNameIdx++,this.shortRuleNameToFull[o]=t,this.fullRuleNameToShort[t]=o;var u;this.outputCst===!0?u=function(){for(var d=[],c=0;c<arguments.length;c++)d[c]=arguments[c];try{this.ruleInvocationStateUpdate(o,t,this.subruleIdx),n.apply(this,d);var p=this.CST_STACK[this.CST_STACK.length-1];return this.cstPostRule(p),p}catch(v){return this.invokeRuleCatch(v,a,i)}finally{this.ruleFinallyStateUpdate()}}:u=function(){for(var d=[],c=0;c<arguments.length;c++)d[c]=arguments[c];try{return this.ruleInvocationStateUpdate(o,t,this.subruleIdx),n.apply(this,d)}catch(p){return this.invokeRuleCatch(p,a,i)}finally{this.ruleFinallyStateUpdate()}};var s=Object.assign(u,{ruleName:t,originalGrammarAction:n});return s},e.prototype.invokeRuleCatch=function(t,n,r){var a=this.RULE_STACK.length===1,i=n&&!this.isBackTracking()&&this.recoveryEnabled;if((0,zr.isRecognitionException)(t)){var o=t;if(i){var u=this.findReSyncTokenType();if(this.isInCurrentRuleReSyncSet(u))if(o.resyncedTokens=this.reSyncTo(u),this.outputCst){var s=this.CST_STACK[this.CST_STACK.length-1];return s.recoveredNode=!0,s}else return r();else{if(this.outputCst){var s=this.CST_STACK[this.CST_STACK.length-1];s.recoveredNode=!0,o.partialCstResult=s}throw o}}else{if(a)return this.moveToTerminatedState(),r();throw o}}else throw t},e.prototype.optionInternal=function(t,n){var r=this.getKeyForAutomaticLookahead(tt.OPTION_IDX,n);return this.optionInternalLogic(t,n,r)},e.prototype.optionInternalLogic=function(t,n,r){var a=this,i=this.getLaFuncFromCache(r),o;if(typeof t!="function"){o=t.DEF;var u=t.GATE;if(u!==void 0){var s=i;i=function(){return u.call(a)&&s.call(a)}}}else o=t;if(i.call(this)===!0)return o.call(this)},e.prototype.atLeastOneInternal=function(t,n){var r=this.getKeyForAutomaticLookahead(tt.AT_LEAST_ONE_IDX,t);return this.atLeastOneInternalLogic(t,n,r)},e.prototype.atLeastOneInternalLogic=function(t,n,r){var a=this,i=this.getLaFuncFromCache(r),o;if(typeof n!="function"){o=n.DEF;var u=n.GATE;if(u!==void 0){var s=i;i=function(){return u.call(a)&&s.call(a)}}}else o=n;if(i.call(this)===!0)for(var l=this.doSingleRepetition(o);i.call(this)===!0&&l===!0;)l=this.doSingleRepetition(o);else throw this.raiseEarlyExitException(t,Fs.PROD_TYPE.REPETITION_MANDATORY,n.ERR_MSG);this.attemptInRepetitionRecovery(this.atLeastOneInternal,[t,n],i,tt.AT_LEAST_ONE_IDX,t,bn.NextTerminalAfterAtLeastOneWalker)},e.prototype.atLeastOneSepFirstInternal=function(t,n){var r=this.getKeyForAutomaticLookahead(tt.AT_LEAST_ONE_SEP_IDX,t);this.atLeastOneSepFirstInternalLogic(t,n,r)},e.prototype.atLeastOneSepFirstInternalLogic=function(t,n,r){var a=this,i=n.DEF,o=n.SEP,u=this.getLaFuncFromCache(r);if(u.call(this)===!0){i.call(this);for(var s=function(){return a.tokenMatcher(a.LA(1),o)};this.tokenMatcher(this.LA(1),o)===!0;)this.CONSUME(o),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[t,o,s,i,bn.NextTerminalAfterAtLeastOneSepWalker],s,tt.AT_LEAST_ONE_SEP_IDX,t,bn.NextTerminalAfterAtLeastOneSepWalker)}else throw this.raiseEarlyExitException(t,Fs.PROD_TYPE.REPETITION_MANDATORY_WITH_SEPARATOR,n.ERR_MSG)},e.prototype.manyInternal=function(t,n){var r=this.getKeyForAutomaticLookahead(tt.MANY_IDX,t);return this.manyInternalLogic(t,n,r)},e.prototype.manyInternalLogic=function(t,n,r){var a=this,i=this.getLaFuncFromCache(r),o;if(typeof n!="function"){o=n.DEF;var u=n.GATE;if(u!==void 0){var s=i;i=function(){return u.call(a)&&s.call(a)}}}else o=n;for(var l=!0;i.call(this)===!0&&l===!0;)l=this.doSingleRepetition(o);this.attemptInRepetitionRecovery(this.manyInternal,[t,n],i,tt.MANY_IDX,t,bn.NextTerminalAfterManyWalker,l)},e.prototype.manySepFirstInternal=function(t,n){var r=this.getKeyForAutomaticLookahead(tt.MANY_SEP_IDX,t);this.manySepFirstInternalLogic(t,n,r)},e.prototype.manySepFirstInternalLogic=function(t,n,r){var a=this,i=n.DEF,o=n.SEP,u=this.getLaFuncFromCache(r);if(u.call(this)===!0){i.call(this);for(var s=function(){return a.tokenMatcher(a.LA(1),o)};this.tokenMatcher(this.LA(1),o)===!0;)this.CONSUME(o),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[t,o,s,i,bn.NextTerminalAfterManySepWalker],s,tt.MANY_SEP_IDX,t,bn.NextTerminalAfterManySepWalker)}},e.prototype.repetitionSepSecondInternal=function(t,n,r,a,i){for(;r();)this.CONSUME(n),a.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[t,n,r,a,i],r,tt.AT_LEAST_ONE_SEP_IDX,t,i)},e.prototype.doSingleRepetition=function(t){var n=this.getLexerPosition();t.call(this);var r=this.getLexerPosition();return r>n},e.prototype.orInternal=function(t,n){var r=this.getKeyForAutomaticLookahead(tt.OR_IDX,n),a=(0,oi.default)(t)?t:t.DEF,i=this.getLaFuncFromCache(r),o=i.call(this,a);if(o!==void 0){var u=a[o];return u.ALT.call(this)}this.raiseNoAltException(n,t.ERR_MSG)},e.prototype.ruleFinallyStateUpdate=function(){if(this.RULE_STACK.pop(),this.RULE_OCCURRENCE_STACK.pop(),this.cstFinallyStateUpdate(),this.RULE_STACK.length===0&&this.isAtEndOfInput()===!1){var t=this.LA(1),n=this.errorMessageProvider.buildNotAllInputParsedMessage({firstRedundant:t,ruleName:this.getCurrRuleFullName()});this.SAVE_ERROR(new zr.NotAllInputParsedException(n,t))}},e.prototype.subruleInternal=function(t,n,r){var a;try{var i=r!==void 0?r.ARGS:void 0;return this.subruleIdx=n,a=t.apply(this,i),this.cstPostNonTerminal(a,r!==void 0&&r.LABEL!==void 0?r.LABEL:t.ruleName),a}catch(o){throw this.subruleInternalError(o,r,t.ruleName)}},e.prototype.subruleInternalError=function(t,n,r){throw(0,zr.isRecognitionException)(t)&&t.partialCstResult!==void 0&&(this.cstPostNonTerminal(t.partialCstResult,n!==void 0&&n.LABEL!==void 0?n.LABEL:r),delete t.partialCstResult),t},e.prototype.consumeInternal=function(t,n,r){var a;try{var i=this.LA(1);this.tokenMatcher(i,t)===!0?(this.consumeToken(),a=i):this.consumeInternalError(t,i,r)}catch(o){a=this.consumeInternalRecovery(t,n,o)}return this.cstPostTerminal(r!==void 0&&r.LABEL!==void 0?r.LABEL:t.name,a),a},e.prototype.consumeInternalError=function(t,n,r){var a,i=this.LA(0);throw r!==void 0&&r.ERR_MSG?a=r.ERR_MSG:a=this.errorMessageProvider.buildMismatchTokenMessage({expected:t,actual:n,previous:i,ruleName:this.getCurrRuleFullName()}),this.SAVE_ERROR(new zr.MismatchedTokenException(a,n,i))},e.prototype.consumeInternalRecovery=function(t,n,r){if(this.recoveryEnabled&&r.name==="MismatchedTokenException"&&!this.isBackTracking()){var a=this.getFollowsForInRuleRecovery(t,n);try{return this.tryInRuleRecovery(t,a)}catch(i){throw i.name===DS.IN_RULE_RECOVERY_EXCEPTION?r:i}}else throw r},e.prototype.saveRecogState=function(){var t=this.errors,n=(0,Ds.default)(this.RULE_STACK);return{errors:t,lexerState:this.exportLexerState(),RULE_STACK:n,CST_STACK:this.CST_STACK}},e.prototype.reloadRecogState=function(t){this.errors=t.errors,this.importLexerState(t.lexerState),this.RULE_STACK=t.RULE_STACK},e.prototype.ruleInvocationStateUpdate=function(t,n,r){this.RULE_OCCURRENCE_STACK.push(r),this.RULE_STACK.push(t),this.cstInvocationStateUpdate(n)},e.prototype.isBackTracking=function(){return this.isBackTrackingStack.length!==0},e.prototype.getCurrRuleFullName=function(){var t=this.getLastExplicitRuleShortName();return this.shortRuleNameToFull[t]},e.prototype.shortRuleNameToFullName=function(t){return this.shortRuleNameToFull[t]},e.prototype.isAtEndOfInput=function(){return this.tokenMatcher(this.LA(1),Gs.EOF)},e.prototype.reset=function(){this.resetLexerState(),this.subruleIdx=0,this.isBackTrackingStack=[],this.errors=[],this.RULE_STACK=[],this.CST_STACK=[],this.RULE_OCCURRENCE_STACK=[]},e}();xa.RecognizerEngine=FS;var Da={},Zl=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Da,"__esModule",{value:!0});Da.ErrorHandler=void 0;var ui=Ge,US=Zl(ct),js=Zl(en),Bs=Dr,GS=rt,jS=function(){function e(){}return e.prototype.initErrorHandler=function(t){this._errors=[],this.errorMessageProvider=(0,US.default)(t,"errorMessageProvider")?t.errorMessageProvider:GS.DEFAULT_PARSER_CONFIG.errorMessageProvider},e.prototype.SAVE_ERROR=function(t){if((0,ui.isRecognitionException)(t))return t.context={ruleStack:this.getHumanReadableRuleStack(),ruleOccurrenceStack:(0,js.default)(this.RULE_OCCURRENCE_STACK)},this._errors.push(t),t;throw Error("Trying to save an Error which is not a RecognitionException")},Object.defineProperty(e.prototype,"errors",{get:function(){return(0,js.default)(this._errors)},set:function(t){this._errors=t},enumerable:!1,configurable:!0}),e.prototype.raiseEarlyExitException=function(t,n,r){for(var a=this.getCurrRuleFullName(),i=this.getGAstProductions()[a],o=(0,Bs.getLookaheadPathsForOptionalProd)(t,i,n,this.maxLookahead),u=o[0],s=[],l=1;l<=this.maxLookahead;l++)s.push(this.LA(l));var d=this.errorMessageProvider.buildEarlyExitMessage({expectedIterationPaths:u,actual:s,previous:this.LA(0),customUserDescription:r,ruleName:a});throw this.SAVE_ERROR(new ui.EarlyExitException(d,this.LA(1),this.LA(0)))},e.prototype.raiseNoAltException=function(t,n){for(var r=this.getCurrRuleFullName(),a=this.getGAstProductions()[r],i=(0,Bs.getLookaheadPathsForOr)(t,a,this.maxLookahead),o=[],u=1;u<=this.maxLookahead;u++)o.push(this.LA(u));var s=this.LA(0),l=this.errorMessageProvider.buildNoViableAltMessage({expectedPathsPerAlt:i,actual:o,previous:s,customUserDescription:n,ruleName:this.getCurrRuleFullName()});throw this.SAVE_ERROR(new ui.NoViableAltException(l,this.LA(1),s))},e}();Da.ErrorHandler=jS;var Fa={},Jl=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Fa,"__esModule",{value:!0});Fa.ContentAssist=void 0;var Ws=Ne,BS=Jl(Mr),WS=Jl(Bn),VS=function(){function e(){}return e.prototype.initContentAssist=function(){},e.prototype.computeContentAssist=function(t,n){var r=this.gastProductionsCache[t];if((0,WS.default)(r))throw Error("Rule ->".concat(t,"<- does not exist in this grammar."));return(0,Ws.nextPossibleTokensAfter)([r],n,this.tokenMatcher,this.maxLookahead)},e.prototype.getNextPossibleTokenTypes=function(t){var n=(0,BS.default)(t.ruleStack),r=this.getGAstProductions(),a=r[n],i=new Ws.NextAfterTokenWalker(a,t).startWalking();return i},e}();Fa.ContentAssist=VS;var Ua={},Wn=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ua,"__esModule",{value:!0});Ua.GastRecorder=void 0;var aa=Wn(co),KS=Wn(me),zS=Wn(Ji),HS=Wn(Be),Ql=Wn(br),ar=Wn(ct),At=Le,YS=kr,ec=gn,tc=vn,XS=rt,qS=Ca,Ga={description:"This Object indicates the Parser is during Recording Phase"};Object.freeze(Ga);var Vs=!0,Ks=Math.pow(2,qS.BITS_FOR_OCCURRENCE_IDX)-1,nc=(0,tc.createToken)({name:"RECORDING_PHASE_TOKEN",pattern:YS.Lexer.NA});(0,ec.augmentTokenTypes)([nc]);var rc=(0,tc.createTokenInstance)(nc,`This IToken indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,-1,-1,-1,-1,-1,-1);Object.freeze(rc);var ZS={name:`This CSTNode indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,children:{}},JS=function(){function e(){}return e.prototype.initGastRecorder=function(t){this.recordingProdStack=[],this.RECORDING_PHASE=!1},e.prototype.enableRecording=function(){var t=this;this.RECORDING_PHASE=!0,this.TRACE_INIT("Enable Recording",function(){for(var n=function(a){var i=a>0?a:"";t["CONSUME".concat(i)]=function(o,u){return this.consumeInternalRecord(o,a,u)},t["SUBRULE".concat(i)]=function(o,u){return this.subruleInternalRecord(o,a,u)},t["OPTION".concat(i)]=function(o){return this.optionInternalRecord(o,a)},t["OR".concat(i)]=function(o){return this.orInternalRecord(o,a)},t["MANY".concat(i)]=function(o){this.manyInternalRecord(a,o)},t["MANY_SEP".concat(i)]=function(o){this.manySepFirstInternalRecord(a,o)},t["AT_LEAST_ONE".concat(i)]=function(o){this.atLeastOneInternalRecord(a,o)},t["AT_LEAST_ONE_SEP".concat(i)]=function(o){this.atLeastOneSepFirstInternalRecord(a,o)}},r=0;r<10;r++)n(r);t.consume=function(a,i,o){return this.consumeInternalRecord(i,a,o)},t.subrule=function(a,i,o){return this.subruleInternalRecord(i,a,o)},t.option=function(a,i){return this.optionInternalRecord(i,a)},t.or=function(a,i){return this.orInternalRecord(i,a)},t.many=function(a,i){this.manyInternalRecord(a,i)},t.atLeastOne=function(a,i){this.atLeastOneInternalRecord(a,i)},t.ACTION=t.ACTION_RECORD,t.BACKTRACK=t.BACKTRACK_RECORD,t.LA=t.LA_RECORD})},e.prototype.disableRecording=function(){var t=this;this.RECORDING_PHASE=!1,this.TRACE_INIT("Deleting Recording methods",function(){for(var n=t,r=0;r<10;r++){var a=r>0?r:"";delete n["CONSUME".concat(a)],delete n["SUBRULE".concat(a)],delete n["OPTION".concat(a)],delete n["OR".concat(a)],delete n["MANY".concat(a)],delete n["MANY_SEP".concat(a)],delete n["AT_LEAST_ONE".concat(a)],delete n["AT_LEAST_ONE_SEP".concat(a)]}delete n.consume,delete n.subrule,delete n.option,delete n.or,delete n.many,delete n.atLeastOne,delete n.ACTION,delete n.BACKTRACK,delete n.LA})},e.prototype.ACTION_RECORD=function(t){},e.prototype.BACKTRACK_RECORD=function(t,n){return function(){return!0}},e.prototype.LA_RECORD=function(t){return XS.END_OF_FILE},e.prototype.topLevelRuleRecord=function(t,n){try{var r=new At.Rule({definition:[],name:t});return r.name=t,this.recordingProdStack.push(r),n.call(this),this.recordingProdStack.pop(),r}catch(a){if(a.KNOWN_RECORDER_ERROR!==!0)try{a.message=a.message+`
	 This error was thrown during the "grammar recording phase" For more info see:
	https://chevrotain.io/docs/guide/internals.html#grammar-recording`}catch{throw a}throw a}},e.prototype.optionInternalRecord=function(t,n){return Jn.call(this,At.Option,t,n)},e.prototype.atLeastOneInternalRecord=function(t,n){Jn.call(this,At.RepetitionMandatory,n,t)},e.prototype.atLeastOneSepFirstInternalRecord=function(t,n){Jn.call(this,At.RepetitionMandatoryWithSeparator,n,t,Vs)},e.prototype.manyInternalRecord=function(t,n){Jn.call(this,At.Repetition,n,t)},e.prototype.manySepFirstInternalRecord=function(t,n){Jn.call(this,At.RepetitionWithSeparator,n,t,Vs)},e.prototype.orInternalRecord=function(t,n){return QS.call(this,t,n)},e.prototype.subruleInternalRecord=function(t,n,r){if(ia(n),!t||(0,ar.default)(t,"ruleName")===!1){var a=new Error("<SUBRULE".concat(zs(n),"> argument is invalid")+" expecting a Parser method reference but got: <".concat(JSON.stringify(t),">")+`
 inside top level rule: <`.concat(this.recordingProdStack[0].name,">"));throw a.KNOWN_RECORDER_ERROR=!0,a}var i=(0,aa.default)(this.recordingProdStack),o=t.ruleName,u=new At.NonTerminal({idx:n,nonTerminalName:o,label:r==null?void 0:r.LABEL,referencedRule:void 0});return i.definition.push(u),this.outputCst?ZS:Ga},e.prototype.consumeInternalRecord=function(t,n,r){if(ia(n),!(0,ec.hasShortKeyProperty)(t)){var a=new Error("<CONSUME".concat(zs(n),"> argument is invalid")+" expecting a TokenType reference but got: <".concat(JSON.stringify(t),">")+`
 inside top level rule: <`.concat(this.recordingProdStack[0].name,">"));throw a.KNOWN_RECORDER_ERROR=!0,a}var i=(0,aa.default)(this.recordingProdStack),o=new At.Terminal({idx:n,terminalType:t,label:r==null?void 0:r.LABEL});return i.definition.push(o),rc},e}();Ua.GastRecorder=JS;function Jn(e,t,n,r){r===void 0&&(r=!1),ia(n);var a=(0,aa.default)(this.recordingProdStack),i=(0,Ql.default)(t)?t:t.DEF,o=new e({definition:[],idx:n});return r&&(o.separator=t.SEP),(0,ar.default)(t,"MAX_LOOKAHEAD")&&(o.maxLookahead=t.MAX_LOOKAHEAD),this.recordingProdStack.push(o),i.call(this),a.definition.push(o),this.recordingProdStack.pop(),Ga}function QS(e,t){var n=this;ia(t);var r=(0,aa.default)(this.recordingProdStack),a=(0,KS.default)(e)===!1,i=a===!1?e:e.DEF,o=new At.Alternation({definition:[],idx:t,ignoreAmbiguities:a&&e.IGNORE_AMBIGUITIES===!0});(0,ar.default)(e,"MAX_LOOKAHEAD")&&(o.maxLookahead=e.MAX_LOOKAHEAD);var u=(0,zS.default)(i,function(s){return(0,Ql.default)(s.GATE)});return o.hasPredicates=u,r.definition.push(o),(0,HS.default)(i,function(s){var l=new At.Alternative({definition:[]});o.definition.push(l),(0,ar.default)(s,"IGNORE_AMBIGUITIES")?l.ignoreAmbiguities=s.IGNORE_AMBIGUITIES:(0,ar.default)(s,"GATE")&&(l.ignoreAmbiguities=!0),n.recordingProdStack.push(l),s.ALT.call(n),n.recordingProdStack.pop()}),Ga}function zs(e){return e===0?"":"".concat(e)}function ia(e){if(e<0||e>Ks){var t=new Error("Invalid DSL Method idx value: <".concat(e,`>
	`)+"Idx value must be a none negative value smaller than ".concat(Ks+1));throw t.KNOWN_RECORDER_ERROR=!0,t}}var ja={},eN=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ja,"__esModule",{value:!0});ja.PerformanceTracer=void 0;var tN=eN(ct),nN=Un,rN=rt,aN=function(){function e(){}return e.prototype.initPerformanceTracer=function(t){if((0,tN.default)(t,"traceInitPerf")){var n=t.traceInitPerf,r=typeof n=="number";this.traceInitMaxIdent=r?n:1/0,this.traceInitPerf=r?n>0:n}else this.traceInitMaxIdent=0,this.traceInitPerf=rN.DEFAULT_PARSER_CONFIG.traceInitPerf;this.traceInitIndent=-1},e.prototype.TRACE_INIT=function(t,n){if(this.traceInitPerf===!0){this.traceInitIndent++;var r=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log("".concat(r,"--> <").concat(t,">"));var a=(0,nN.timer)(n),i=a.time,o=a.value,u=i>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&u("".concat(r,"<-- <").concat(t,"> time: ").concat(i,"ms")),this.traceInitIndent--,o}else return n()},e}();ja.PerformanceTracer=aN;var Ba={};Object.defineProperty(Ba,"__esModule",{value:!0});Ba.applyMixins=void 0;function iN(e,t){t.forEach(function(n){var r=n.prototype;Object.getOwnPropertyNames(r).forEach(function(a){if(a!=="constructor"){var i=Object.getOwnPropertyDescriptor(r,a);i&&(i.get||i.set)?Object.defineProperty(e.prototype,a,i):e.prototype[a]=n.prototype[a]}})})}Ba.applyMixins=iN;(function(e){var t=k&&k.__extends||function(){var w=function(x,B){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,P){O.__proto__=P}||function(O,P){for(var N in P)Object.prototype.hasOwnProperty.call(P,N)&&(O[N]=P[N])},w(x,B)};return function(x,B){if(typeof B!="function"&&B!==null)throw new TypeError("Class extends value "+String(B)+" is not a constructor or null");w(x,B);function O(){this.constructor=x}x.prototype=B===null?Object.create(B):(O.prototype=B.prototype,new O)}}(),n=k&&k.__importDefault||function(w){return w&&w.__esModule?w:{default:w}};Object.defineProperty(e,"__esModule",{value:!0}),e.EmbeddedActionsParser=e.CstParser=e.Parser=e.EMPTY_ALT=e.ParserDefinitionErrorType=e.DEFAULT_RULE_CONFIG=e.DEFAULT_PARSER_CONFIG=e.END_OF_FILE=void 0;var r=n(Ct),a=n(et),i=n(Be),o=n(Wt),u=n(ct),s=n(en),l=Un,d=bt,c=vn,p=xr,v=Nn,_=Eo,f=$n,m=$a,E=Ma,b=wa,A=xa,S=Da,$=Fa,y=Ua,g=ja,T=Ba;e.END_OF_FILE=(0,c.createTokenInstance)(c.EOF,"",NaN,NaN,NaN,NaN,NaN,NaN),Object.freeze(e.END_OF_FILE),e.DEFAULT_PARSER_CONFIG=Object.freeze({recoveryEnabled:!1,maxLookahead:3,dynamicTokensEnabled:!1,outputCst:!0,errorMessageProvider:p.defaultParserErrorProvider,nodeLocationTracking:"none",traceInitPerf:!1,skipValidations:!1}),e.DEFAULT_RULE_CONFIG=Object.freeze({recoveryValueFunc:function(){},resyncEnabled:!0}),function(w){w[w.INVALID_RULE_NAME=0]="INVALID_RULE_NAME",w[w.DUPLICATE_RULE_NAME=1]="DUPLICATE_RULE_NAME",w[w.INVALID_RULE_OVERRIDE=2]="INVALID_RULE_OVERRIDE",w[w.DUPLICATE_PRODUCTIONS=3]="DUPLICATE_PRODUCTIONS",w[w.UNRESOLVED_SUBRULE_REF=4]="UNRESOLVED_SUBRULE_REF",w[w.LEFT_RECURSION=5]="LEFT_RECURSION",w[w.NONE_LAST_EMPTY_ALT=6]="NONE_LAST_EMPTY_ALT",w[w.AMBIGUOUS_ALTS=7]="AMBIGUOUS_ALTS",w[w.CONFLICT_TOKENS_RULES_NAMESPACE=8]="CONFLICT_TOKENS_RULES_NAMESPACE",w[w.INVALID_TOKEN_NAME=9]="INVALID_TOKEN_NAME",w[w.NO_NON_EMPTY_LOOKAHEAD=10]="NO_NON_EMPTY_LOOKAHEAD",w[w.AMBIGUOUS_PREFIX_ALTS=11]="AMBIGUOUS_PREFIX_ALTS",w[w.TOO_MANY_ALTS=12]="TOO_MANY_ALTS"}(e.ParserDefinitionErrorType||(e.ParserDefinitionErrorType={}));function h(w){return w===void 0&&(w=void 0),function(){return w}}e.EMPTY_ALT=h;var I=function(){function w(x,B){this.definitionErrors=[],this.selfAnalysisDone=!1;var O=this;if(O.initErrorHandler(B),O.initLexerAdapter(),O.initLooksAhead(B),O.initRecognizerEngine(x,B),O.initRecoverable(B),O.initTreeBuilder(B),O.initContentAssist(),O.initGastRecorder(B),O.initPerformanceTracer(B),(0,u.default)(B,"ignoredIssues"))throw new Error(`The <ignoredIssues> IParserConfig property has been deprecated.
	Please use the <IGNORE_AMBIGUITIES> flag on the relevant DSL method instead.
	See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#IGNORING_AMBIGUITIES
	For further details.`);this.skipValidations=(0,u.default)(B,"skipValidations")?B.skipValidations:e.DEFAULT_PARSER_CONFIG.skipValidations}return w.performSelfAnalysis=function(x){throw Error("The **static** `performSelfAnalysis` method has been deprecated.	\nUse the **instance** method with the same name instead.")},w.prototype.performSelfAnalysis=function(){var x=this;this.TRACE_INIT("performSelfAnalysis",function(){var B;x.selfAnalysisDone=!0;var O=x.className;x.TRACE_INIT("toFastProps",function(){(0,l.toFastProperties)(x)}),x.TRACE_INIT("Grammar Recording",function(){try{x.enableRecording(),(0,i.default)(x.definedRulesNames,function(N){var G=x[N],j=G.originalGrammarAction,W;x.TRACE_INIT("".concat(N," Rule"),function(){W=x.topLevelRuleRecord(N,j)}),x.gastProductionsCache[N]=W})}finally{x.disableRecording()}});var P=[];if(x.TRACE_INIT("Grammar Resolving",function(){P=(0,v.resolveGrammar)({rules:(0,o.default)(x.gastProductionsCache)}),x.definitionErrors=x.definitionErrors.concat(P)}),x.TRACE_INIT("Grammar Validations",function(){if((0,r.default)(P)&&x.skipValidations===!1){var N=(0,v.validateGrammar)({rules:(0,o.default)(x.gastProductionsCache),maxLookahead:x.maxLookahead,tokenTypes:(0,o.default)(x.tokensMap),errMsgProvider:p.defaultGrammarValidatorErrorProvider,grammarName:O});x.definitionErrors=x.definitionErrors.concat(N)}}),(0,r.default)(x.definitionErrors)&&(x.recoveryEnabled&&x.TRACE_INIT("computeAllProdsFollows",function(){var N=(0,d.computeAllProdsFollows)((0,o.default)(x.gastProductionsCache));x.resyncFollows=N}),x.TRACE_INIT("ComputeLookaheadFunctions",function(){x.preComputeLookaheadFunctions((0,o.default)(x.gastProductionsCache))})),!w.DEFER_DEFINITION_ERRORS_HANDLING&&!(0,r.default)(x.definitionErrors))throw B=(0,a.default)(x.definitionErrors,function(N){return N.message}),new Error(`Parser Definition Errors detected:
 `.concat(B.join(`
-------------------------------
`)))})},w.DEFER_DEFINITION_ERRORS_HANDLING=!1,w}();e.Parser=I,(0,T.applyMixins)(I,[_.Recoverable,f.LooksAhead,m.TreeBuilder,E.LexerAdapter,A.RecognizerEngine,b.RecognizerApi,S.ErrorHandler,$.ContentAssist,y.GastRecorder,g.PerformanceTracer]);var U=function(w){t(x,w);function x(B,O){O===void 0&&(O=e.DEFAULT_PARSER_CONFIG);var P=(0,s.default)(O);return P.outputCst=!0,w.call(this,B,P)||this}return x}(I);e.CstParser=U;var K=function(w){t(x,w);function x(B,O){O===void 0&&(O=e.DEFAULT_PARSER_CONFIG);var P=(0,s.default)(O);return P.outputCst=!1,w.call(this,B,P)||this}return x}(I);e.EmbeddedActionsParser=K})(rt);var Wa={},Va={},oN=k&&k.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(r[i]=a[i])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Vn=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Va,"__esModule",{value:!0});Va.buildModel=void 0;var ac=Le,er=Vn(et),sN=Vn(zt),uN=Vn(Wt),lN=Vn(Ji),cN=Vn(bl),fN=Vn(Aa);function dN(e){var t=new hN,n=(0,uN.default)(e);return(0,er.default)(n,function(r){return t.visitRule(r)})}Va.buildModel=dN;var hN=function(e){oN(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.visitRule=function(n){var r=this.visitEach(n.definition),a=(0,cN.default)(r,function(o){return o.propertyName}),i=(0,er.default)(a,function(o,u){var s=!(0,lN.default)(o,function(d){return!d.canBeNull}),l=o[0].type;return o.length>1&&(l=(0,er.default)(o,function(d){return d.type})),{name:u,type:l,optional:s}});return{name:n.name,properties:i}},t.prototype.visitAlternative=function(n){return this.visitEachAndOverrideWith(n.definition,{canBeNull:!0})},t.prototype.visitOption=function(n){return this.visitEachAndOverrideWith(n.definition,{canBeNull:!0})},t.prototype.visitRepetition=function(n){return this.visitEachAndOverrideWith(n.definition,{canBeNull:!0})},t.prototype.visitRepetitionMandatory=function(n){return this.visitEach(n.definition)},t.prototype.visitRepetitionMandatoryWithSeparator=function(n){return this.visitEach(n.definition).concat({propertyName:n.separator.name,canBeNull:!0,type:Hr(n.separator)})},t.prototype.visitRepetitionWithSeparator=function(n){return this.visitEachAndOverrideWith(n.definition,{canBeNull:!0}).concat({propertyName:n.separator.name,canBeNull:!0,type:Hr(n.separator)})},t.prototype.visitAlternation=function(n){return this.visitEachAndOverrideWith(n.definition,{canBeNull:!0})},t.prototype.visitTerminal=function(n){return[{propertyName:n.label||n.terminalType.name,canBeNull:!1,type:Hr(n)}]},t.prototype.visitNonTerminal=function(n){return[{propertyName:n.label||n.nonTerminalName,canBeNull:!1,type:Hr(n)}]},t.prototype.visitEachAndOverrideWith=function(n,r){return(0,er.default)(this.visitEach(n),function(a){return(0,fN.default)({},a,r)})},t.prototype.visitEach=function(n){var r=this;return(0,sN.default)((0,er.default)(n,function(a){return r.visit(a)}))},t}(ac.GAstVisitor);function Hr(e){return e instanceof ac.NonTerminal?{kind:"rule",name:e.referencedRule.name}:{kind:"token"}}var Ka={},pN=Xi;function vN(e,t,n){var r=e.length;return n=n===void 0?r:n,!t&&n>=r?e:pN(e,t,n)}var _N=vN,gN="\\ud800-\\udfff",mN="\\u0300-\\u036f",yN="\\ufe20-\\ufe2f",EN="\\u20d0-\\u20ff",TN=mN+yN+EN,AN="\\ufe0e\\ufe0f",bN="\\u200d",ON=RegExp("["+bN+gN+TN+AN+"]");function RN(e){return ON.test(e)}var ic=RN;function IN(e){return e.split("")}var SN=IN,oc="\\ud800-\\udfff",NN="\\u0300-\\u036f",PN="\\ufe20-\\ufe2f",CN="\\u20d0-\\u20ff",$N=NN+PN+CN,LN="\\ufe0e\\ufe0f",kN="["+oc+"]",bi="["+$N+"]",Oi="\\ud83c[\\udffb-\\udfff]",MN="(?:"+bi+"|"+Oi+")",sc="[^"+oc+"]",uc="(?:\\ud83c[\\udde6-\\uddff]){2}",lc="[\\ud800-\\udbff][\\udc00-\\udfff]",wN="\\u200d",cc=MN+"?",fc="["+LN+"]?",xN="(?:"+wN+"(?:"+[sc,uc,lc].join("|")+")"+fc+cc+")*",DN=fc+cc+xN,FN="(?:"+[sc+bi+"?",bi,uc,lc,kN].join("|")+")",UN=RegExp(Oi+"(?="+Oi+")|"+FN+DN,"g");function GN(e){return e.match(UN)||[]}var jN=GN,BN=SN,WN=ic,VN=jN;function KN(e){return WN(e)?VN(e):BN(e)}var zN=KN,HN=_N,YN=ic,XN=zN,qN=xu;function ZN(e){return function(t){t=qN(t);var n=YN(t)?XN(t):void 0,r=n?n[0]:t.charAt(0),a=n?HN(n,1).join(""):t.slice(1);return r[e]()+a}}var JN=ZN,QN=JN,eP=QN("toUpperCase"),tP=eP,Kn=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ka,"__esModule",{value:!0});Ka.genDts=void 0;var nP=Kn(zt),rP=Kn(me),za=Kn(et),aP=Kn(_n),iP=Kn(ro),dc=Kn(tP);function oP(e,t){var n=[];return n=n.concat('import type { CstNode, ICstVisitor, IToken } from "chevrotain";'),n=n.concat((0,nP.default)((0,za.default)(e,function(r){return sP(r)}))),t.includeVisitorInterface&&(n=n.concat(fP(t.visitorInterfaceName,e))),n.join(`

`)+`
`}Ka.genDts=oP;function sP(e){var t=uP(e),n=lP(e);return[t,n]}function uP(e){var t=hc(e.name),n=To(e.name);return"export interface ".concat(t,` extends CstNode {
  name: "`).concat(e.name,`";
  children: `).concat(n,`;
}`)}function lP(e){var t=To(e.name);return"export type ".concat(t,` = {
  `).concat((0,za.default)(e.properties,function(n){return cP(n)}).join(`
  `),`
};`)}function cP(e){var t=hP(e.type);return"".concat(e.name).concat(e.optional?"?":"",": ").concat(t,"[];")}function fP(e,t){return"export interface ".concat(e,`<IN, OUT> extends ICstVisitor<IN, OUT> {
  `).concat((0,za.default)(t,function(n){return dP(n)}).join(`
  `),`
}`)}function dP(e){var t=To(e.name);return"".concat(e.name,"(children: ").concat(t,", param?: IN): OUT;")}function hP(e){if((0,rP.default)(e)){var t=(0,iP.default)((0,za.default)(e,function(r){return Hs(r)})),n=(0,aP.default)(t,function(r,a){return r+" | "+a});return"("+n+")"}else return Hs(e)}function Hs(e){return e.kind==="token"?"IToken":hc(e.name)}function hc(e){return(0,dc.default)(e)+"CstNode"}function To(e){return(0,dc.default)(e)+"CstChildren"}var oa=k&&k.__assign||function(){return oa=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},oa.apply(this,arguments)};Object.defineProperty(Wa,"__esModule",{value:!0});Wa.generateCstDts=void 0;var pP=Va,vP=Ka,_P={includeVisitorInterface:!0,visitorInterfaceName:"ICstNodeVisitor"};function gP(e,t){var n=oa(oa({},_P),t),r=(0,pP.buildModel)(e);return(0,vP.genDts)(r,n)}Wa.generateCstDts=gP;var Ha={};Object.defineProperty(Ha,"__esModule",{value:!0});Ha.createSyntaxDiagramsCode=void 0;var Ys=Tr;function mP(e,t){var n=t===void 0?{}:t,r=n.resourceBase,a=r===void 0?"https://unpkg.com/chevrotain@".concat(Ys.VERSION,"/diagrams/"):r,i=n.css,o=i===void 0?"https://unpkg.com/chevrotain@".concat(Ys.VERSION,"/diagrams/diagrams.css"):i,u=`
<!-- This is a generated file -->
<!DOCTYPE html>
<meta charset="utf-8">
<style>
  body {
    background-color: hsl(30, 20%, 95%)
  }
</style>

`,s=`
<link rel='stylesheet' href='`.concat(o,`'>
`),l=`
<script src='`.concat(a,`vendor/railroad-diagrams.js'><\/script>
<script src='`).concat(a,`src/diagrams_builder.js'><\/script>
<script src='`).concat(a,`src/diagrams_behavior.js'><\/script>
<script src='`).concat(a,`src/main.js'><\/script>
`),d=`
<div id="diagrams" align="center"></div>    
`,c=`
<script>
    window.serializedGrammar = `.concat(JSON.stringify(e,null,"  "),`;
<\/script>
`),p=`
<script>
    var diagramsDiv = document.getElementById("diagrams");
    main.drawDiagramsFromSerializedGrammar(serializedGrammar, diagramsDiv);
<\/script>
`;return u+s+l+d+c+p}Ha.createSyntaxDiagramsCode=mP;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Parser=e.createSyntaxDiagramsCode=e.clearCache=e.generateCstDts=e.GAstVisitor=e.serializeProduction=e.serializeGrammar=e.Terminal=e.Rule=e.RepetitionWithSeparator=e.RepetitionMandatoryWithSeparator=e.RepetitionMandatory=e.Repetition=e.Option=e.NonTerminal=e.Alternative=e.Alternation=e.defaultLexerErrorProvider=e.NoViableAltException=e.NotAllInputParsedException=e.MismatchedTokenException=e.isRecognitionException=e.EarlyExitException=e.defaultParserErrorProvider=e.tokenName=e.tokenMatcher=e.tokenLabel=e.EOF=e.createTokenInstance=e.createToken=e.LexerDefinitionErrorType=e.Lexer=e.EMPTY_ALT=e.ParserDefinitionErrorType=e.EmbeddedActionsParser=e.CstParser=e.VERSION=void 0;var t=Tr;Object.defineProperty(e,"VERSION",{enumerable:!0,get:function(){return t.VERSION}});var n=rt;Object.defineProperty(e,"CstParser",{enumerable:!0,get:function(){return n.CstParser}}),Object.defineProperty(e,"EmbeddedActionsParser",{enumerable:!0,get:function(){return n.EmbeddedActionsParser}}),Object.defineProperty(e,"ParserDefinitionErrorType",{enumerable:!0,get:function(){return n.ParserDefinitionErrorType}}),Object.defineProperty(e,"EMPTY_ALT",{enumerable:!0,get:function(){return n.EMPTY_ALT}});var r=kr;Object.defineProperty(e,"Lexer",{enumerable:!0,get:function(){return r.Lexer}}),Object.defineProperty(e,"LexerDefinitionErrorType",{enumerable:!0,get:function(){return r.LexerDefinitionErrorType}});var a=vn;Object.defineProperty(e,"createToken",{enumerable:!0,get:function(){return a.createToken}}),Object.defineProperty(e,"createTokenInstance",{enumerable:!0,get:function(){return a.createTokenInstance}}),Object.defineProperty(e,"EOF",{enumerable:!0,get:function(){return a.EOF}}),Object.defineProperty(e,"tokenLabel",{enumerable:!0,get:function(){return a.tokenLabel}}),Object.defineProperty(e,"tokenMatcher",{enumerable:!0,get:function(){return a.tokenMatcher}}),Object.defineProperty(e,"tokenName",{enumerable:!0,get:function(){return a.tokenName}});var i=xr;Object.defineProperty(e,"defaultParserErrorProvider",{enumerable:!0,get:function(){return i.defaultParserErrorProvider}});var o=Ge;Object.defineProperty(e,"EarlyExitException",{enumerable:!0,get:function(){return o.EarlyExitException}}),Object.defineProperty(e,"isRecognitionException",{enumerable:!0,get:function(){return o.isRecognitionException}}),Object.defineProperty(e,"MismatchedTokenException",{enumerable:!0,get:function(){return o.MismatchedTokenException}}),Object.defineProperty(e,"NotAllInputParsedException",{enumerable:!0,get:function(){return o.NotAllInputParsedException}}),Object.defineProperty(e,"NoViableAltException",{enumerable:!0,get:function(){return o.NoViableAltException}});var u=wr;Object.defineProperty(e,"defaultLexerErrorProvider",{enumerable:!0,get:function(){return u.defaultLexerErrorProvider}});var s=Le;Object.defineProperty(e,"Alternation",{enumerable:!0,get:function(){return s.Alternation}}),Object.defineProperty(e,"Alternative",{enumerable:!0,get:function(){return s.Alternative}}),Object.defineProperty(e,"NonTerminal",{enumerable:!0,get:function(){return s.NonTerminal}}),Object.defineProperty(e,"Option",{enumerable:!0,get:function(){return s.Option}}),Object.defineProperty(e,"Repetition",{enumerable:!0,get:function(){return s.Repetition}}),Object.defineProperty(e,"RepetitionMandatory",{enumerable:!0,get:function(){return s.RepetitionMandatory}}),Object.defineProperty(e,"RepetitionMandatoryWithSeparator",{enumerable:!0,get:function(){return s.RepetitionMandatoryWithSeparator}}),Object.defineProperty(e,"RepetitionWithSeparator",{enumerable:!0,get:function(){return s.RepetitionWithSeparator}}),Object.defineProperty(e,"Rule",{enumerable:!0,get:function(){return s.Rule}}),Object.defineProperty(e,"Terminal",{enumerable:!0,get:function(){return s.Terminal}});var l=Le;Object.defineProperty(e,"serializeGrammar",{enumerable:!0,get:function(){return l.serializeGrammar}}),Object.defineProperty(e,"serializeProduction",{enumerable:!0,get:function(){return l.serializeProduction}}),Object.defineProperty(e,"GAstVisitor",{enumerable:!0,get:function(){return l.GAstVisitor}});var d=Wa;Object.defineProperty(e,"generateCstDts",{enumerable:!0,get:function(){return d.generateCstDts}});function c(){console.warn(`The clearCache function was 'soft' removed from the Chevrotain API.
	 It performs no action other than printing this message.
	 Please avoid using it as it will be completely removed in the future`)}e.clearCache=c;var p=Ha;Object.defineProperty(e,"createSyntaxDiagramsCode",{enumerable:!0,get:function(){return p.createSyntaxDiagramsCode}});var v=function(){function _(){throw new Error(`The Parser class has been deprecated, use CstParser or EmbeddedActionsParser instead.	
See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_7-0-0`)}return _}();e.Parser=v})(Li);(function(e){e.__esModule=!0,e.ArnaLexer=e.languageTokens=void 0;var t=Li,n=t.createToken,r=t.Lexer,a=n({name:"WhiteSpace",pattern:/\s+/,group:t.Lexer.SKIPPED}),i=n({name:"Identifier",pattern:/[a-zA-Z0-9#]\w*/}),o=n({name:"Graph",pattern:/GRAPH/i,longer_alt:i}),u=n({name:"Bundle",pattern:/BUNDLE/i,longer_alt:i}),s=n({name:"Color",pattern:/COLOR/i,longer_alt:i}),l=n({name:"Label",pattern:/LABEL/i,longer_alt:i}),d=n({name:"LineWidth",pattern:/LINE-WIDTH/i,longer_alt:i}),c=n({name:"FontSize",pattern:/FONT-SIZE/i,longer_alt:i}),p=n({name:"Font",pattern:/PLONT/i,longer_alt:i}),v=n({name:"EdgeUndirected",pattern:/--/}),_=n({name:"EdgeDirected",pattern:/->/}),f=n({name:"OpenBracket",pattern:/\[/}),m=n({name:"CloseBracket",pattern:/\]/}),E=n({name:"Equal",pattern:/=/}),b=n({name:"Comma",pattern:/,/}),A=n({name:"DoubleQuotedString",pattern:/".*?"/}),S=n({name:"OpenCurlyBrace",pattern:/{/}),$=n({name:"CloseCurlyBrace",pattern:/}/}),y=n({name:"Variable",pattern:/[a-zA-Z]+/}),g=n({name:"SingleLineComment",pattern:/\/\/.+/,group:"comments"});e.languageTokens={WhiteSpace:a,Color:s,Label:l,LineWidth:d,FontSize:c,Font:p,Bundle:u,Graph:o,Identifier:i,EdgeUndirected:v,EdgeDirected:_,Equal:E,Comma:b,DoubleQuotedString:A,OpenBracket:f,CloseBracket:m,OpenCurlyBrace:S,CloseCurlyBrace:$,SingleLineComment:g,Variable:y};var T=new r(Object.values(e.languageTokens));e.ArnaLexer={languageTokens:e.languageTokens,tokenize:function(h){var I=T.tokenize(h);return I.errors.length>0&&console.error("Lexing errors detected."),I}}})($i);var cn={},yP=k&&k.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(r[i]=a[i])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();cn.__esModule=!0;cn.ArnaParser=cn.ArnaCstParser=void 0;var EP=Li,ve=$i,pc=function(e){yP(t,e);function t(){var n=e.call(this,ve.languageTokens)||this;return n.bundleKeyValue=n.RULE("bundleKeyValue",function(){n.CONSUME(ve.languageTokens.Bundle)}),n.colorKeyValue=n.RULE("colorKeyValue",function(){n.CONSUME(ve.languageTokens.Color),n.CONSUME(ve.languageTokens.Equal),n.OR([{ALT:function(){return n.CONSUME(ve.languageTokens.DoubleQuotedString)}},{ALT:function(){return n.CONSUME(ve.languageTokens.Identifier)}}])}),n.labelKeyValue=n.RULE("labelKeyValue",function(){n.CONSUME(ve.languageTokens.Label),n.CONSUME(ve.languageTokens.Equal),n.CONSUME(ve.languageTokens.DoubleQuotedString)}),n.lineWidthKeyValue=n.RULE("lineWidthKeyValue",function(){n.CONSUME(ve.languageTokens.LineWidth),n.CONSUME(ve.languageTokens.Equal),n.CONSUME(ve.languageTokens.Identifier)}),n.fontKeyValue=n.RULE("fontKeyValue",function(){n.CONSUME(ve.languageTokens.Font),n.CONSUME(ve.languageTokens.Equal),n.CONSUME(ve.languageTokens.DoubleQuotedString)}),n.fontSizeKeyValue=n.RULE("fontSizeKeyValue",function(){n.CONSUME(ve.languageTokens.FontSize),n.CONSUME(ve.languageTokens.Equal),n.CONSUME(ve.languageTokens.DoubleQuotedString)}),n.keyValuePair=n.RULE("keyValuePair",function(){n.OR([{ALT:function(){return n.SUBRULE(n.bundleKeyValue)}},{ALT:function(){return n.SUBRULE(n.colorKeyValue)}},{ALT:function(){return n.SUBRULE(n.labelKeyValue)}},{ALT:function(){return n.SUBRULE(n.lineWidthKeyValue)}},{ALT:function(){return n.SUBRULE(n.fontKeyValue)}},{ALT:function(){return n.SUBRULE(n.fontSizeKeyValue)}}])}),n.attribute=n.RULE("attribute",function(){n.CONSUME(ve.languageTokens.OpenBracket),n.OPTION(function(){n.MANY_SEP({SEP:ve.languageTokens.Comma,DEF:function(){n.SUBRULE(n.keyValuePair)}})}),n.CONSUME(ve.languageTokens.CloseBracket)}),n.nodeDeclaration=n.RULE("nodeDeclaration",function(){n.CONSUME(ve.languageTokens.Identifier),n.OPTION2(function(){n.SUBRULE(n.attribute)})}),n.edgeDeclaration=n.RULE("edgeDeclaration",function(){n.CONSUME(ve.languageTokens.Identifier),n.OR([{ALT:function(){return n.CONSUME(ve.languageTokens.EdgeUndirected)}},{ALT:function(){return n.CONSUME2(ve.languageTokens.EdgeDirected)}}]),n.CONSUME2(ve.languageTokens.Identifier),n.OPTION2(function(){n.SUBRULE(n.attribute)})}),n.document=n.RULE("document",function(){n.CONSUME(ve.languageTokens.Graph),n.CONSUME(ve.languageTokens.Identifier),n.OPTION1(function(){n.SUBRULE(n.attribute)}),n.CONSUME(ve.languageTokens.OpenCurlyBrace),n.OPTION2(function(){n.MANY(function(){n.OR([{ALT:function(){return n.SUBRULE(n.edgeDeclaration)}},{ALT:function(){return n.SUBRULE(n.nodeDeclaration)}}])})}),n.CONSUME(ve.languageTokens.CloseCurlyBrace)}),n.performSelfAnalysis(),n}return t}(EP.CstParser);cn.ArnaCstParser=pc;cn.ArnaParser=new pc;var jt={},vc={},_c={},Ao={};(function(e){e.__esModule=!0;var t=function(){function n(){}return n.vectorDotProduct=function(r,a){return r.x*a.x+r.y+a.y},n.edgeToVector=function(r,a){return{x:a.x-r.x,y:a.y-r.y}},n.edgeLength=function(r,a,i){return Math.abs(r.x-a.x)<i&&Math.abs(r.y-a.y)<i?i:Math.sqrt(Math.pow(r.x-a.x,2)+Math.pow(r.y-a.y,2))},n.edgeMidpoint=function(r,a){return{x:(r.x+a.x)/2,y:(r.y+a.y)/2}},n.euclideanDistance=function(r,a){return Math.sqrt(Math.pow(r.x-a.x,2)+Math.pow(r.y-a.y,2))},n.dividedEdgeLength=function(r){return r.reduce(function(a,i,o){return o===0?0:a+n.euclideanDistance(r[o],r[o-1])},0)},n.projectPointOnLine=function(r,a,i){var o=Math.sqrt(Math.pow(i.x-a.x,2)+Math.pow(i.y-a.y,2)),u=((a.y-r.y)*(a.y-i.y)-(a.x-r.x)*(i.x-a.x))/Math.pow(o,2);return{x:a.x+u*(i.x-a.x),y:a.y+u*(i.y-a.y)}},n}();e.default=t})(Ao);var gc={};(function(e){e.__esModule=!0;var t=Ao,n=function(){function r(){}return r.applySpringForce=function(a,i,o){var u=a[i-1],s=a[i+1],l=a[i];return{x:o*(u.x-l.x+s.x-l.x),y:o*(u.y-l.y+s.y-l.y)}},r.applyElectrostaticForce=function(a,i,o,u,s){return i[o].reduce(function(l,d){var c={x:a[d][u].x-a[o][u].x,y:a[d][u].y-a[o][u].y};if(Math.abs(c.x)>s||Math.abs(c.y)>s){var p=a[d][u],v=a[o][u],_=1/t.default.edgeLength(p,v,-1/0);return{x:l.x+c.x*_,y:l.y+c.y*_}}return{x:l.x,y:l.y}},{x:0,y:0})},r.applyForcesOnEdgeSubdivisionPoints=function(a,i,o,u,s,l,d,c){for(var p=a[s],v=c.bundlingStiffness/(t.default.edgeLength(i[p.tail],i[p.head],c.error)*(l+1)),_=[{x:0,y:0}],f=1;f<l+1;f++){var m={x:0,y:0},E=r.applySpringForce(o[s],f,v),b=r.applyElectrostaticForce(o,u,s,f,d);m.x=d*(E.x+b.x),m.y=d*(E.y+b.y),_.push(m)}return _.push({x:0,y:0}),_},r}();e.default=n})(gc);(function(e){var t=k&&k.__assign||function(){return t=Object.assign||function(u){for(var s,l=1,d=arguments.length;l<d;l++){s=arguments[l];for(var c in s)Object.prototype.hasOwnProperty.call(s,c)&&(u[c]=s[c])}return u},t.apply(this,arguments)},n=k&&k.__spreadArray||function(u,s,l){if(l||arguments.length===2)for(var d=0,c=s.length,p;d<c;d++)(p||!(d in s))&&(p||(p=Array.prototype.slice.call(s,0,d)),p[d]=s[d]);return u.concat(p||Array.prototype.slice.call(s))};e.__esModule=!0;var r=Ao,a=gc,i={bundlingStiffness:.1,initialStepSize:.1,initialSubdivision:1,subdivisionRate:2,cycleCount:6,initialIterationCount:90,iterationDecreaseRate:2/3,compatabilityThreshold:.6,error:1e-6},o=function(){function u(s,l,d){this.edgeSubdivisionPoints=[],this.edgeCompatabilityList=[],this.nodeData=s,this.edgeData=l,this.parameters=i,d!==void 0&&(this.parameters=t(t({},i),d)),this.filterInvalidEdges()}return u.prototype.initEdgeSubdivisionPoints=function(){var s=this;this.edgeData.forEach(function(l,d){s.parameters.initialSubdivision===1?s.edgeSubdivisionPoints[d]=[]:(s.edgeSubdivisionPoints[d]=[],s.edgeSubdivisionPoints[d].push(s.nodeData[l.tail]),s.edgeSubdivisionPoints[d].push(s.nodeData[l.head]))})},u.prototype.initEdgeCompatabilityList=function(){var s=this;this.edgeData.forEach(function(l,d){s.edgeCompatabilityList[d]=[]})},u.prototype.filterInvalidEdges=function(){var s=this;return this.edgeData.filter(function(l){return s.nodeData[l.tail].x!==s.nodeData[l.head].x||s.nodeData[l.tail].y!==s.nodeData[l.head].y})},u.prototype.updateEdgeSubdivisions=function(s){var l=this;this.edgeData.forEach(function(d,c){if(s===1)l.edgeSubdivisionPoints[c].push(l.nodeData[d.tail]),l.edgeSubdivisionPoints[c].push(r.default.edgeMidpoint(l.nodeData[d.tail],l.nodeData[d.head])),l.edgeSubdivisionPoints[c].push(l.nodeData[d.head]);else{for(var p=r.default.dividedEdgeLength(l.edgeSubdivisionPoints[c]),v=p/(s+1),_=[l.nodeData[d.tail]],f=v,m=l.edgeSubdivisionPoints[c],E=1;E<m.length;E++){for(var b=m[E],A=r.default.euclideanDistance(b,l.edgeSubdivisionPoints[c][E-1]);A>f;){var S=f/A,$=l.edgeSubdivisionPoints[c][E-1],y={x:$.x+S*(b.x-$.x),y:$.y+S*(b.y-$.y)};_.push(y),A-=f,f=v}f-=A}_.push(l.nodeData[l.edgeData[c].head]),l.edgeSubdivisionPoints[c]=_}})},u.prototype.angleCompatibility=function(s,l){var d=this.nodeData[s.tail],c=this.nodeData[s.head],p=this.nodeData[l.tail],v=this.nodeData[l.head],_=this.parameters.error,f=r.default.edgeLength(d,c,_)*r.default.edgeLength(p,v,_),m=r.default.vectorDotProduct(r.default.edgeToVector(d,c),r.default.edgeToVector(p,v));return Math.abs(m/f)},u.prototype.scaleCompatability=function(s,l){var d=this.nodeData[s.tail],c=this.nodeData[s.head],p=this.nodeData[l.tail],v=this.nodeData[l.head],_=this.parameters.error,f=r.default.edgeLength(d,c,_),m=r.default.edgeLength(p,v,_),E=(f+m)/2;return 2/(E/Math.min(f,m)+Math.max(f,m)/E)},u.prototype.positionCompatibility=function(s,l){var d=this.nodeData[s.tail],c=this.nodeData[s.head],p=this.nodeData[l.tail],v=this.nodeData[l.head],_=this.parameters.error,f=r.default.edgeLength(d,c,_),m=r.default.edgeLength(p,v,_),E=(f+m)/2,b=r.default.edgeMidpoint(d,c),A=r.default.edgeMidpoint(p,v),S=r.default.euclideanDistance(b,A);return E/(E+S)},u.prototype.edgeVisibility=function(s,l){var d=this.nodeData[s.tail],c=this.nodeData[s.head],p=this.nodeData[l.tail],v=this.nodeData[l.head],_=r.default.projectPointOnLine(p,d,c),f=r.default.projectPointOnLine(v,d,c),m=r.default.edgeMidpoint(_,f),E=r.default.edgeMidpoint(d,c),b=r.default.euclideanDistance(E,m),A=r.default.euclideanDistance(_,f);return Math.max(0,1-2*b/A)},u.prototype.visibilityCompatibility=function(s,l){return Math.min(this.edgeVisibility(s,l),this.edgeVisibility(l,s))},u.prototype.compatibilityScore=function(s,l){return this.angleCompatibility(s,l)*this.scaleCompatability(s,l)*this.positionCompatibility(s,l)*this.visibilityCompatibility(s,l)},u.prototype.isCompatible=function(s,l){return this.compatibilityScore(s,l)>=this.parameters.compatabilityThreshold},u.prototype.updateCompatibilityList=function(){for(var s=0;s<this.edgeData.length-1;s++)for(var l=s+1;l<this.edgeData.length;l++)this.isCompatible(this.edgeData[s],this.edgeData[l])&&(this.edgeCompatabilityList[s].push(l),this.edgeCompatabilityList[l].push(s))},u.prototype.bundle=function(){var s=this,l=this.parameters.initialStepSize,d=this.parameters.initialIterationCount,c=this.parameters.initialSubdivision;return this.initEdgeSubdivisionPoints(),this.initEdgeCompatabilityList(),this.updateEdgeSubdivisions(c),this.updateCompatibilityList(),n([],Array(this.parameters.cycleCount),!0).forEach(function(){n([],Array(Math.round(d)),!0).forEach(function(){var p=s.edgeData.map(function(v,_){return a.default.applyForcesOnEdgeSubdivisionPoints(s.edgeData,s.nodeData,s.edgeSubdivisionPoints,s.edgeCompatabilityList,_,c,l,s.parameters)});s.edgeData.forEach(function(v,_){n([],Array(c+1),!0).forEach(function(f,m){var E=p[_][m].x,b=p[_][m].y;s.edgeSubdivisionPoints[_][m].x+=E,s.edgeSubdivisionPoints[_][m].y+=b})})}),l/=2,c*=s.parameters.subdivisionRate,d*=s.parameters.iterationDecreaseRate,s.updateEdgeSubdivisions(c)}),this.edgeSubdivisionPoints},u}();e.default=o})(_c);(function(e){e.__esModule=!0;var t=_c;e.default=t.default})(vc);var fn={},sa=k&&k.__assign||function(){return sa=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},sa.apply(this,arguments)};fn.__esModule=!0;fn.ConcreteSyntaxTree=fn.Graph=void 0;var TP=500,AP=6,bP=2,OP=.01,RP=.5,Xs={bundle:!1,maxTicks:TP,maxRepulsiveDistance:AP,optimalDistance:bP,c:OP,maxVertexDisplacement:RP},IP=function(){function e(t,n,r){this.nodes=t,this.edges=n,this.parameters=Xs,r!==void 0&&(this.parameters=e.buildParameters(r))}return e.buildParameters=function(t){return sa(sa({},Xs),t)},e}();fn.Graph=IP;var SP=function(){function e(t){this.rootNode=t}return e}();fn.ConcreteSyntaxTree=SP;var NP=k&&k.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(r[i]=a[i])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();jt.__esModule=!0;jt.ArnaGraph=jt.ArnaEdge=jt.ArnaNode=void 0;var PP=vc,CP=fn,$P=function(){function e(t,n,r,a){this.identifier=t,this.positionX=e.getRandomFloatBounded(-1*n,r),this.positionY=e.getRandomFloatBounded(-1*n,r),this.forceX=0,this.forceY=0,this.options=a}return e.getRandomFloatBounded=function(t,n){return Math.random()*(t-n)+n},e}();jt.ArnaNode=$P;var LP=function(){function e(t,n,r){this.tail=t,this.head=n,this.attraction=1,this.options=r}return e}();jt.ArnaEdge=LP;var kP=function(e){NP(t,e);function t(n,r,a){var i=e.call(this,n,r,a)||this;return i.xLayoutMin=1/0,i.xLayoutMax=-1/0,i.yLayoutMin=1/0,i.yLayoutMax=-1/0,i}return t.prototype.setEdgeSubdivisions=function(n){this.edgeSubdivisions=n},t.prototype.calculateRepulsion=function(){var n=this,r=[];this.nodes.forEach(function(a){r.forEach(function(i){if(!(!a||!i)){var o=i.positionX-a.positionX,u=i.positionY-a.positionY,s=Math.pow(o,2)+Math.pow(u,2);s<.01&&(o=.1*Math.random()+.1,u=.1*Math.random()+.1,s=Math.pow(o,2)+Math.pow(u,2));var l=Math.sqrt(s);if(l<n.parameters.maxRepulsiveDistance){var d=Math.pow(n.parameters.optimalDistance,2)/l;i.forceX+=d*o/l,i.forceY+=d*u/l,a.forceX-=d*o/l,a.forceY-=d*u/l}}}),r.push(a)})},t.prototype.calculateAttraction=function(){var n=this;this.edges.forEach(function(r){var a=r.tail,i=r.head,o=i.positionX-a.positionX,u=i.positionY-a.positionY,s=Math.pow(o,2)+Math.pow(u,2);s<.01&&(o=.1*Math.random()+.1,u=.1*Math.random()+.1,s=Math.pow(o,2)+Math.pow(u,2));var l=Math.sqrt(s);l>n.parameters.maxRepulsiveDistance&&(l=n.parameters.maxRepulsiveDistance,s=Math.pow(l,2));var d=(s-Math.pow(n.parameters.optimalDistance,2))/n.parameters.optimalDistance;r.attraction||(r.attraction=1),d*=Math.log(r.attraction)*.5+1,i.forceX-=d*o/l,i.forceY-=d*u/l,a.forceX+=d*o/l,a.forceY+=d*u/l})},t.prototype.bundleEdges=function(n){var r={};this.nodes.forEach(function(u){r[u.identifier]={x:u.positionX,y:u.positionY}});var a=this.edges.map(function(u){return{tail:u.tail.identifier,head:u.head.identifier}}),i=new PP.default(r,a,n),o=i.bundle();this.setEdgeSubdivisions(o)},t.prototype.nodeMappings=function(){var n=this,r={};return this.edges.forEach(function(a,i){var o=a.tail,u=a.head,s=n.edgeSubdivisions&&n.parameters.bundle?n.edgeSubdivisions[i]:[];s.length<0&&s.push({x:o.positionX,y:o.positionY},{x:u.positionX,y:u.positionY});var l={tail:a.tail,head:a.head,edge:s,edgeOptions:a.options};o.identifier in r?r[o.identifier].push(l):r[o.identifier]=[l],u.identifier in r?r[u.identifier].push({tail:a.head,head:a.tail,edge:s,edgeOptions:a.options}):r[u.identifier]=[{tail:a.head,head:a.tail,edge:s,edgeOptions:a.options}]}),r},t.prototype.commitChanges=function(){var n=this,r=this.parameters.c,a=this.parameters.maxVertexDisplacement;this.nodes.forEach(function(i){var o=r*i.forceX,u=r*i.forceY;o>a&&(o=a),o<-1*a&&(o=-1*a),u>a&&(u=a),u<-1*a&&(u=-1*a),i.positionX+=o,i.positionY+=u,n.xLayoutMin=i.positionX<n.xLayoutMin?i.positionX:n.xLayoutMin,n.xLayoutMax=i.positionX>n.xLayoutMax?i.positionX:n.xLayoutMax,n.yLayoutMin=i.positionY<n.yLayoutMin?i.positionY:n.yLayoutMin,n.yLayoutMax=i.positionY>n.yLayoutMax?i.positionY:n.yLayoutMax,i.forceX=0,i.forceY=0})},t.prototype.tick=function(){this.calculateRepulsion(),this.calculateAttraction(),this.commitChanges()},t.prototype.computeLayout=function(){for(var n=0;n<this.parameters.maxTicks;n++)this.tick()},t}(CP.Graph);jt.ArnaGraph=kP;var Ya={},MP=k&&k.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(r[i]=a[i])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();Ya.__esModule=!0;Ya.ArnaAstVisitor=void 0;var wP=cn,xP=wP.ArnaParser.getBaseCstVisitorConstructor(),DP=function(e){MP(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.bundleKeyValue=function(n,r){return{bundle:!0}},t.prototype.colorKeyValue=function(n,r){if(n.DoubleQuotedString!==void 0)return{color:n.DoubleQuotedString[0].image.slice(1,-1)};if(n.Identifier!==void 0)return{color:n.Identifier[0].image}},t.prototype.labelKeyValue=function(n,r){return{label:n.DoubleQuotedString[0].image.slice(1,-1)}},t.prototype.lineWidthKeyValue=function(n,r){return{lineWidth:n.Identifier[0].image}},t.prototype.fontKeyValue=function(n,r){return{font:n.DoubleQuotedString[0].image.slice(1,-1)}},t.prototype.fontSizeKeyValue=function(n,r){return{fontSize:n.DoubleQuotedString[0].image.slice(1,-1)}},t.prototype.keyValuePair=function(n,r){var a=this;return{type:"KEY_VALUE_PAIR",children:Object.values(n).map(function(i){return a.visit(i)})}},t.prototype.attribute=function(n,r){var a=this,i=n!=null&&n.keyValuePair?n.keyValuePair.map(function(u){return a.visit(u)}):[],o=i.map(function(u){return u.children[0]}).reduce(function(u,s){return Object.assign(u,s)},{});return{type:"ATTRIBUTES",keyValuePairs:o}},t.prototype.nodeDeclaration=function(n,r){var a=n!=null&&n.attribute?this.visit(n.attribute[0]):void 0;return{type:"NODE_DECLARATION",identifier:n.Identifier[0].image,attributes:a}},t.prototype.edgeDeclaration=function(n,r){var a=n!=null&&n.attribute?this.visit(n.attribute[0]):void 0;return{type:"EDGE_DECLARATION",directed:!!(n!=null&&n.EdgeDirected),tail:n.Identifier[0].image,head:n.Identifier[1].image,attributes:a}},t.prototype.document=function(n,r){var a=this,i=n!=null&&n.nodeDeclaration?n.nodeDeclaration.map(function(l){return a.visit(l)}):[],o=n!=null&&n.edgeDeclaration?n.edgeDeclaration.map(function(l){return a.visit(l)}):[],u=n!=null&&n.attribute?this.visit(n.attribute):!1,s=u!=null&&u.keyValuePairs?{keyValuePairs:u.keyValuePairs}:{keyValuePairs:{}};return{type:"DOCUMENT",graphType:n.Graph[0].image,graphName:n.Identifier[0].image,graphAttributes:s,nodeDeclarations:i,edgeDeclarations:o}},t}(xP);Ya.ArnaAstVisitor=new DP;var Xa={};Xa.__esModule=!0;Xa.GraphSemanticAnalyzer=void 0;var li=jt,FP=fn,UP=function(){function e(t){this.graphParameters=FP.Graph.buildParameters(t)}return e.prototype.buildNode=function(t){var n,r=((n=t.attributes)===null||n===void 0?void 0:n.keyValuePairs)||{};return new li.ArnaNode(t.identifier,this.graphParameters.maxRepulsiveDistance,this.graphParameters.maxVertexDisplacement,r)},e.prototype.buildEdge=function(t,n,r){var a,i=((a=r.attributes)===null||a===void 0?void 0:a.keyValuePairs)||{};return new li.ArnaEdge(t,n,i)},e.prototype.buildGraph=function(t,n){var r=this,a=new Map;t.forEach(function(l){var d;if(!a.has(l.identifier)){var c=r.buildNode(l);c.options.label=((d=l.attributes)===null||d===void 0?void 0:d.keyValuePairs.label)||void 0,a.set(l.identifier,c)}});var i=Array.from(a.values()),o=new Set,u=n.filter(function(l){var d="".concat(l.tail,"--").concat(l.head);return d in o?!1:(o.add(d),!0)}),s=u.map(function(l){var d=a.get(l.tail),c=a.get(l.head);if(d===void 0)throw new Error("Invalid edge declaration. No node with identifier ".concat(l.tail," found."));if(c===void 0)throw new Error("Invalid edge declaration. No node with identifier ".concat(l.head," found."));return r.buildEdge(d,c,l)});return new li.ArnaGraph(i,s,this.graphParameters)},e.prototype.analyze=function(t){var n;this.graphParameters.bundle=((n=t.graphAttributes.keyValuePairs)===null||n===void 0?void 0:n.bundle)||!1;var r=this.buildGraph(t.nodeDeclarations,t.edgeDeclarations);return r.computeLayout(),r},e}();Xa.GraphSemanticAnalyzer=UP;(function(e){var t=k&&k.__createBinding||(Object.create?function(u,s,l,d){d===void 0&&(d=l);var c=Object.getOwnPropertyDescriptor(s,l);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[l]}}),Object.defineProperty(u,d,c)}:function(u,s,l,d){d===void 0&&(d=l),u[d]=s[l]});e.__esModule=!0,e.ArnaAstSemanticAnalyzer=e.ArnaAstVisitor=e.ArnaGraph=e.ArnaParser=e.ArnaLexer=void 0;var n=$i;t(e,n,"ArnaLexer");var r=cn;t(e,r,"ArnaParser");var a=jt;t(e,a,"ArnaGraph");var i=Ya;t(e,i,"ArnaAstVisitor");var o=Xa;t(e,o,"GraphSemanticAnalyzer","ArnaAstSemanticAnalyzer")})(Zt);var mc={},qa={},jr={};jr.__esModule=!0;jr.ArnaPreRenderer=void 0;var GP=function(){function e(t,n,r){this.RADIUS=12,this.graph=t,this.width=n,this.height=r,this.xScale=(this.width-2*this.RADIUS)/(this.graph.xLayoutMax-this.graph.xLayoutMin),this.yScale=(this.height-2*this.RADIUS)/(this.graph.yLayoutMax-this.graph.yLayoutMin)}return e.prototype.translate=function(t,n){return{x:Math.round((t-this.graph.xLayoutMin)*this.xScale+this.RADIUS),y:Math.round((n-this.graph.yLayoutMin)*this.yScale+this.RADIUS)}},e.prototype.centerGraph=function(){var t=1/0,n=-1/0,r=1/0,a=-1/0,i=Math.round(this.width/2)-Math.round((this.graph.xLayoutMin+this.graph.xLayoutMax)/2),o=Math.round(this.height/2)-Math.round((this.graph.yLayoutMin+this.graph.yLayoutMax)/2);this.graph.nodes.forEach(function(u){u.positionX+=i,u.positionY+=o,t=u.positionX<t?u.positionX:t,n=u.positionX>n?u.positionX:n,r=u.positionY<r?u.positionY:r,a=u.positionY>a?u.positionY:a}),this.graph.xLayoutMin=t,this.graph.xLayoutMax=n,this.graph.yLayoutMin=r,this.graph.yLayoutMax=a},e.prototype.translateNodePositions=function(){var t=this,n=1/0,r=-1/0,a=1/0,i=-1/0;this.graph.nodes.forEach(function(o){var u=t.translate(o.positionX,o.positionY);o.positionX=u.x,o.positionY=u.y,n=o.positionX<n?o.positionX:n,r=o.positionX>r?o.positionX:r,a=o.positionY<a?o.positionY:a,i=o.positionY>i?o.positionY:i}),this.graph.xLayoutMin=n,this.graph.xLayoutMax=r,this.graph.yLayoutMin=a,this.graph.yLayoutMax=i},e.prototype.runCalculations=function(t){return this.translateNodePositions(),this.centerGraph(),this.graph.parameters.bundle&&this.graph.bundleEdges(t||{}),{radius:this.RADIUS}},e}();jr.ArnaPreRenderer=GP;qa.__esModule=!0;qa.ArnaRenderer=void 0;var jP=jr,BP=function(){function e(t){this.canvas=t}return e.prototype.prerender=function(t){var n=new jP.ArnaPreRenderer(t,this.canvas.getCanvasWidth(),this.canvas.getCanvasHeight());return n.runCalculations()},e.prototype.drawBundledEdges=function(t){var n=this,r=t.edgeSubdivisions||[];r.forEach(function(a,i){var o=t.edges[i].options;n.canvas.drawLineGroup(a,o)})},e.prototype.drawNodes=function(t,n){var r=this;t.nodes.forEach(function(a){r.canvas.drawCircle(a.positionX,a.positionY,n.radius,a.options)})},e.prototype.draw=function(t){var n=this,r,a=this.prerender(t),i=new Set,o=new Set,u=t.parameters.bundle&&t.edgeSubdivisions?t.edgeSubdivisions:[];u.forEach(function(s,l){var d=s.map(function(c){return{x:Math.round(c.x),y:Math.round(c.y)}});n.canvas.drawLineGroup(d,t.edges[l].options)}),t.parameters.bundle&&(this.drawBundledEdges(t),this.drawNodes(t,a)),t.parameters.bundle||t.edges.forEach(function(s){var l=s.tail,d=s.head;i.has(l.identifier)||(n.canvas.drawCircle(l.positionX,l.positionY,a.radius,l.options),i.add(l.identifier)),i.has(d.identifier)||(n.canvas.drawCircle(d.positionX,d.positionY,a.radius,d.options),i.add(d.identifier));var c="".concat(l.identifier,"-").concat(d.identifier);if(!t.parameters.bundle&&!o.has(c)){var p=qs(d.positionX,d.positionY,l.positionX,l.positionY,a.radius),v=qs(l.positionX,l.positionY,d.positionX,d.positionY,a.radius);n.canvas.drawLine(v.x,v.y,p.x,p.y,s.options),o.add(c)}}),!((r=this.canvas)===null||r===void 0)&&r.finalize&&this.canvas.finalize()},e}();qa.ArnaRenderer=BP;function qs(e,t,n,r,a){var i=a/Math.sqrt(Math.pow(n-e,2)+Math.pow(r-t,2)),o=e+i*(n-e),u=t+i*(r-t);return{x:Math.round(o),y:Math.round(u)}}(function(e){var t=k&&k.__createBinding||(Object.create?function(a,i,o,u){u===void 0&&(u=o);var s=Object.getOwnPropertyDescriptor(i,o);(!s||("get"in s?!i.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return i[o]}}),Object.defineProperty(a,u,s)}:function(a,i,o,u){u===void 0&&(u=o),a[u]=i[o]});e.__esModule=!0,e.ArnaPreRenderer=e.ArnaRenderer=void 0;var n=qa;t(e,n,"ArnaRenderer");var r=jr;t(e,r,"ArnaPreRenderer")})(mc);class ir{constructor(t,n,r,a){Ke(this,"graph");Ke(this,"stage");Ke(this,"mainLayer");Ke(this,"staticGroup");Ke(this,"labels");Ke(this,"transformer");Ke(this,"stageConfig");Ke(this,"stageParent");Ke(this,"prerenderer");Ke(this,"bundlerParameters");Ke(this,"graphLayoutParameters");Ke(this,"renderParameters");Ke(this,"nodeMappings");Ke(this,"virtualWidth");this.graph=t,this.stageConfig=n,this.virtualWidth=n.width,this.stageParent=document.getElementById("stage-parent"),this.stage=new Je.Stage(this.stageConfig),this.mainLayer=new Je.Layer,this.staticGroup=new Je.Group,this.transformer=new Je.Transformer,this.labels=new Map,this.graphLayoutParameters=a,this.bundlerParameters=r,this.prerenderer=new mc.ArnaPreRenderer(this.graph,this.getCanvasWidth(),this.getCanvasHeight()),this.renderParameters=this.prerenderer.runCalculations(this.bundlerParameters),this.nodeMappings=this.graph.nodeMappings()}getCanvasWidth(){return this.stage.width()}getCanvasHeight(){return this.stage.height()}getResponsiveFontSize(){return this.stageParent.offsetWidth<600?40:24}static circle(t,n,r,a){const i=new Je.Group,o=new Je.Circle({x:t,y:n,radius:r,fill:a==null?void 0:a.color,hitStrokeWidth:r+10}),u=new Je.Circle({x:t,y:n,radius:r,fill:sn.theme.extend.colors.override.bg,hitStrokeWidth:r+10});return i.add(u),i.add(o),i}static lineGroup(t,n){const r=new Je.Group;for(let a=0;a<t.length-1;a++){const i=t[a],o=t[a+1],u=n!=null&&n.lineWidth?+n.lineWidth:2,s=new Je.Line({points:[i.x,i.y,o.x,o.y],stroke:(n==null?void 0:n.color)||sn.theme.extend.colors.override.fg,strokeWidth:u});r.add(s)}return r}positionLabel(t,n,r){r.fontSize(this.getResponsiveFontSize());const a=this.stage.scaleX(),i=r.textWidth*this.stage.scaleX();let o=t*a;o+i>this.stageParent.offsetWidth&&(o-=i+22*this.stage.scaleX()),r.x(o/a),r.y(n)}label(t,n,r){const{radius:a}=this.renderParameters,i=r-a-20,o=new Je.Text({y:r-a-20,text:t,fontSize:this.getResponsiveFontSize(),fontStyle:"bold",fontFamily:"'Source Code Pro', monospace",fill:sn.theme.extend.colors.override.fg,align:"center"}),{textWidth:u}=o;let s=n-u/2;s+u>this.getCanvasWidth()&&(s-=s+u+12-this.getCanvasWidth()),s<0&&(s=0);let l=i;return i<0&&(l=r+a+20),o.x(s),o.y(l),o}registerHighlightEvent(t,n,r){const a=this.labels.get(t),i=n.children[1];n.addEventListener("mouseenter touchstart",()=>{const o=this.staticGroup.getRelativePointerPosition(),u=a;this.positionLabel(o.x,o.y,u),a.visible(!0),i.setAttr("previousFill",i.fill()),i.fill(an(i.fill()).alpha(1).hex("rgba")),r.forEach(s=>{s.children.forEach(l=>{if(l instanceof Je.Line){const d=l.stroke();l.setAttr("previousStroke",d),l.stroke(an(d).alpha(1).hex("rgba"))}if(l instanceof Je.Circle){const d=l.fill();l.setAttr("previousFill",d),l.fill(an(d).alpha(1).hex("rgba"))}})})}),n.addEventListener("mouseleave touchend",()=>{a.visible(!1),i.fill(i.getAttr("previousFill")),r.forEach(o=>{o.children.forEach(u=>{if(u instanceof Je.Line){const s=u.getAttr("previousStroke");u.stroke(s)}if(u instanceof Je.Circle){const s=u.getAttr("previousFill");u.fill(s)}})})})}registerScalingHandler(){const t=()=>{const r=this.stageParent.offsetWidth,a=r/this.virtualWidth;this.stage.width(this.virtualWidth*a),this.stage.height(this.virtualWidth*a),this.stage.scale({x:a,y:a});let i=24;r<600&&(i=40),r<400&&(i=52),[...Array.from(this.labels.values())].forEach(o=>{o.fontSize(i)})};new ResizeObserver(t).observe(this.stageParent)}draw(){const t=new Map,n=new Map;Object.keys(this.nodeMappings).forEach(r=>{var l;const a=this.nodeMappings[r],{tail:i}=a[0];let o;n.has(i.identifier)?o=n.get(i.identifier):(o=ir.circle(i.positionX,i.positionY,this.renderParameters.radius,i.options),n.set(i.identifier,o));const u=this.label(((l=i.options)==null?void 0:l.label)||"",i.positionX,i.positionY);u.visible(!1),u.listening(!1),this.labels.set(i.identifier,u);let s=[];a.forEach(d=>{const{head:c}=d,p=`${i.identifier}--${c.identifier}`,v=`${c.identifier}--${i.identifier}`;let _;t.has(p)?_=t.get(p):t.has(v)?_=t.get(v):(_=ir.lineGroup(d.edge,d.edgeOptions),t.set(p,_),t.set(v,_));let f;n.has(c.identifier)?f=n.get(c.identifier):(f=ir.circle(c.positionX,c.positionY,this.renderParameters.radius,c.options),n.set(c.identifier,f)),s=[f,...s],s=[...s,_]}),this.registerHighlightEvent(i.identifier,o,s)}),this.staticGroup.add(...Array.from(t.values())),this.staticGroup.add(...Array.from(n.values())),this.staticGroup.add(...Array.from(this.labels.values())),this.mainLayer.add(this.transformer),this.transformer.add(this.staticGroup),this.mainLayer.add(this.staticGroup),this.stage.add(this.mainLayer),this.registerScalingHandler()}}function WP(e){let t;return{c(){t=Z("div"),V(t,"id","stage-parent"),V(t,"class","outline-thin w-full mx-auto mb-4 flex items-center space-x-4 bg-override-neutral-900/30")},m(n,r){ae(n,t,r),e[1](t)},p:Oe,i:Oe,o:Oe,d(n){n&&te(t),e[1](null)}}}function VP(e,t,n){let r,a,i,o,u,s,l,d,c,p,v;ye(e,fr,A=>n(4,r=A)),ye(e,cr,A=>n(5,a=A)),ye(e,On,A=>n(6,i=A)),ye(e,lr,A=>n(7,o=A)),ye(e,rn,A=>n(8,u=A)),ye(e,gr,A=>n(9,s=A)),ye(e,_r,A=>n(10,l=A)),ye(e,vr,A=>n(11,d=A)),ye(e,pr,A=>n(12,c=A)),ye(e,dr,A=>n(13,p=A)),ye(e,hr,A=>n(14,v=A));let _,f;const m=()=>{const A=hr.choices[v],S=dr.choices[p],$=pr.choices[c],y=vr.choices[d],g=_r.choices[l],T=gr.choices[s];return{compatabilityThreshold:A,initialStepSize:S,bundlingStiffness:$,subdivisionRate:y,initialIterationCount:g,iterationDecreaseRate:T}},E=()=>{if(!u)return;const A=Zt.ArnaLexer.tokenize(u);Zt.ArnaParser.input=A.tokens;const S=Zt.ArnaParser.document();Zt.ArnaParser.errors.length>0&&(console.error("Encountered errors during parsing"),Zt.ArnaParser.errors.forEach(x=>{console.error(x)}));const $=Zt.ArnaAstVisitor.visit(S),y={maxTicks:lr.choices[o],maxRepulsiveDistance:On.choices[i],optimalDistance:cr.choices[a],c:fr.choices[r],bundle:$.graphAttributes.keyValuePairs.bundle},T=new Zt.ArnaAstSemanticAnalyzer(y).analyze($),U={container:_,height:1400,width:1400},K=m();new ir(T,U,K,y).draw()};yr(()=>{f=rn.subscribe(()=>{E()})}),Sc(()=>f());function b(A){Bt[A?"unshift":"push"](()=>{_=A,n(0,_)})}return[_,b]}class KP extends qe{constructor(t){super();Xe(this,t,VP,WP,je,{})}}function zP(e){let t,n;const r=e[1].default,a=Ii(r,e,e[0],null);return{c(){t=Z("span"),a&&a.c(),V(t,"class","bg-gray-200 text-black px-1 pb-1 mx-1 font-thin font-mono")},m(i,o){ae(i,t,o),a&&a.m(t,null),n=!0},p(i,[o]){a&&a.p&&(!n||o&1)&&Ni(a,r,i,i[0],n?Si(r,i[0],o,null):Pi(i[0]),null)},i(i){n||(Y(a,i),n=!0)},o(i){X(a,i),n=!1},d(i){i&&te(t),a&&a.d(i)}}}function HP(e,t,n){let{$$slots:r={},$$scope:a}=t;return e.$$set=i=>{"$$scope"in i&&n(0,a=i.$$scope)},[a,r]}class He extends qe{constructor(t){super();Xe(this,t,HP,zP,je,{})}}function YP(e){let t;return{c(){t=ie("graph")},m(n,r){ae(n,t,r)},d(n){n&&te(t)}}}function XP(e){let t;return{c(){t=ie("[bundle]")},m(n,r){ae(n,t,r)},d(n){n&&te(t)}}}function qP(e){let t;return{c(){t=ie("N0")},m(n,r){ae(n,t,r)},d(n){n&&te(t)}}}function ZP(e){let t;return{c(){t=ie("color")},m(n,r){ae(n,t,r)},d(n){n&&te(t)}}}function JP(e){let t;return{c(){t=ie("label")},m(n,r){ae(n,t,r)},d(n){n&&te(t)}}}function QP(e){let t;return{c(){t=ie("N0--N5")},m(n,r){ae(n,t,r)},d(n){n&&te(t)}}}function eC(e){let t;return{c(){t=ie("N0")},m(n,r){ae(n,t,r)},d(n){n&&te(t)}}}function tC(e){let t;return{c(){t=ie("N5")},m(n,r){ae(n,t,r)},d(n){n&&te(t)}}}function nC(e){let t;return{c(){t=ie("N0")},m(n,r){ae(n,t,r)},d(n){n&&te(t)}}}function rC(e){let t;return{c(){t=ie("N5")},m(n,r){ae(n,t,r)},d(n){n&&te(t)}}}function aC(e){let t;return{c(){t=ie("line-width")},m(n,r){ae(n,t,r)},d(n){n&&te(t)}}}function iC(e){let t;return{c(){t=ie("color")},m(n,r){ae(n,t,r)},d(n){n&&te(t)}}}function oC(e){let t;return{c(){t=ie("line-width")},m(n,r){ae(n,t,r)},d(n){n&&te(t)}}}function sC(e){let t;return{c(){t=ie("color")},m(n,r){ae(n,t,r)},d(n){n&&te(t)}}}function uC(e){let t;return{c(){t=ie("}")},m(n,r){ae(n,t,r)},d(n){n&&te(t)}}}function lC(e){let t,n,r,a,i,o,u,s,l,d,c,p,v,_,f,m,E,b,A,S,$,y,g,T,h,I,U,K,w,x,B,O,P,N,G,j,W,ue,de,ne,J,le,q,he,Pe,Ee,xe,Ie,Me,Se,at,Ue,ft,ke,Ze,We,Ht,dt,Yt,Dt,ht,Ft,Ce,L,M,F;return o=new He({props:{$$slots:{default:[YP]},$$scope:{ctx:e}}}),s=new He({props:{$$slots:{default:[XP]},$$scope:{ctx:e}}}),E=new He({props:{$$slots:{default:[qP]},$$scope:{ctx:e}}}),T=new He({props:{$$slots:{default:[ZP]},$$scope:{ctx:e}}}),I=new He({props:{$$slots:{default:[JP]},$$scope:{ctx:e}}}),G=new He({props:{$$slots:{default:[QP]},$$scope:{ctx:e}}}),W=new He({props:{$$slots:{default:[eC]},$$scope:{ctx:e}}}),de=new He({props:{$$slots:{default:[tC]},$$scope:{ctx:e}}}),J=new He({props:{$$slots:{default:[nC]},$$scope:{ctx:e}}}),q=new He({props:{$$slots:{default:[rC]},$$scope:{ctx:e}}}),Se=new He({props:{$$slots:{default:[aC]},$$scope:{ctx:e}}}),Ue=new He({props:{$$slots:{default:[iC]},$$scope:{ctx:e}}}),ke=new He({props:{$$slots:{default:[oC]},$$scope:{ctx:e}}}),We=new He({props:{$$slots:{default:[sC]},$$scope:{ctx:e}}}),Ce=new He({props:{$$slots:{default:[uC]},$$scope:{ctx:e}}}),{c(){t=Z("div"),n=Z("textarea"),r=se(),a=Z("span"),i=ie("To begin defining a graph, use the "),re(o.$$.fragment),u=ie(` keyword followed by the name
    of the graph. Following the name of the graph, you may choose to include the
    `),re(s.$$.fragment),l=ie(" attribute. Including this will enable edge bundling."),d=se(),c=Z("br"),p=se(),v=Z("textarea"),_=se(),f=Z("span"),m=ie(`After defining the graph name, node and edge declarations are required. In
    this example, `),re(E.$$.fragment),b=ie(` is the node identifier. Within the square brackets, attributes
    of the node can be defined.`),A=se(),S=Z("br"),$=se(),y=Z("span"),g=ie("The "),re(T.$$.fragment),h=ie(` attribute specifies the color of the graph vertex when drawn.
    You may use RGB, RGBA, Hex, or other color formats supported by CSS3. The `),re(I.$$.fragment),U=ie(` attribute defines a string that will be displayed when the vertex is hovered
    over.`),K=se(),w=Z("br"),x=se(),B=Z("textarea"),O=se(),P=Z("span"),N=ie(`Edge declarations define an edge between two defined nodes. The nodes must
    be defined somewhere in the program or a compiler error will be thrown. In
    this example, `),re(G.$$.fragment),j=ie(` defines an edge between the nodes with the identifiers
    `),re(W.$$.fragment),ue=ie(" and "),re(de.$$.fragment),ne=ie(". Even though this is an undirected edge, "),re(J.$$.fragment),le=ie(` is
    treated as the tail of the edge. While `),re(q.$$.fragment),he=ie(" is treated as the head."),Pe=se(),Ee=Z("br"),xe=se(),Ie=Z("span"),Me=ie("The current supported attributes for edge declarations include "),re(Se.$$.fragment),at=ie(" and "),re(Ue.$$.fragment),ft=ie(". "),re(ke.$$.fragment),Ze=ie(` defines the width of the rendered edge
    on the canvas. The `),re(We.$$.fragment),Ht=ie(` attribute defines the color of the rendered edge
    on the canvas. The same color formats accepted for node declarations are supported
    for edge declarations.`),dt=se(),Yt=Z("br"),Dt=se(),ht=Z("span"),Ft=ie("Finally, don't forget to end the graph declaration with a "),re(Ce.$$.fragment),V(a,"class","mt-2"),V(f,"class","mt-2"),V(P,"class","mt-2"),V(t,"class","rounded flex flex-col w-full p-4 mb-2 bg-override-neutral-800/30 outline-thin")},m(R,C){ae(R,t,C),D(t,n),D(t,r),D(t,a),D(a,i),Q(o,a,null),D(a,u),Q(s,a,null),D(a,l),D(t,d),D(t,c),D(t,p),D(t,v),D(t,_),D(t,f),D(f,m),Q(E,f,null),D(f,b),D(t,A),D(t,S),D(t,$),D(t,y),D(y,g),Q(T,y,null),D(y,h),Q(I,y,null),D(y,U),D(t,K),D(t,w),D(t,x),D(t,B),D(t,O),D(t,P),D(P,N),Q(G,P,null),D(P,j),Q(W,P,null),D(P,ue),Q(de,P,null),D(P,ne),Q(J,P,null),D(P,le),Q(q,P,null),D(P,he),D(t,Pe),D(t,Ee),D(t,xe),D(t,Ie),D(Ie,Me),Q(Se,Ie,null),D(Ie,at),Q(Ue,Ie,null),D(Ie,ft),Q(ke,Ie,null),D(Ie,Ze),Q(We,Ie,null),D(Ie,Ht),D(t,dt),D(t,Yt),D(t,Dt),D(t,ht),D(ht,Ft),Q(Ce,ht,null),e[2](t),L=!0,M||(F=[Ja(e[1].call(null,n,"graph Name [bundle] {")),Ja(e[1].call(null,v,'N0 [color="rgba(164,6,6,0.6)",label="A message to show."]')),Ja(e[1].call(null,B,'N0--N5  [line-width=3,color="rgba(164,6,6,0.2)"]'))],M=!0)},p(R,[C]){const H={};C&16&&(H.$$scope={dirty:C,ctx:R}),o.$set(H);const oe={};C&16&&(oe.$$scope={dirty:C,ctx:R}),s.$set(oe);const pe={};C&16&&(pe.$$scope={dirty:C,ctx:R}),E.$set(pe);const Te={};C&16&&(Te.$$scope={dirty:C,ctx:R}),T.$set(Te);const Ve={};C&16&&(Ve.$$scope={dirty:C,ctx:R}),I.$set(Ve);const pt={};C&16&&(pt.$$scope={dirty:C,ctx:R}),G.$set(pt);const it={};C&16&&(it.$$scope={dirty:C,ctx:R}),W.$set(it);const Xt={};C&16&&(Xt.$$scope={dirty:C,ctx:R}),de.$set(Xt);const qt={};C&16&&(qt.$$scope={dirty:C,ctx:R}),J.$set(qt);const vt={};C&16&&(vt.$$scope={dirty:C,ctx:R}),q.$set(vt);const ot={};C&16&&(ot.$$scope={dirty:C,ctx:R}),Se.$set(ot);const $e={};C&16&&($e.$$scope={dirty:C,ctx:R}),Ue.$set($e);const _t={};C&16&&(_t.$$scope={dirty:C,ctx:R}),ke.$set(_t);const fe={};C&16&&(fe.$$scope={dirty:C,ctx:R}),We.$set(fe);const z={};C&16&&(z.$$scope={dirty:C,ctx:R}),Ce.$set(z)},i(R){L||(Y(o.$$.fragment,R),Y(s.$$.fragment,R),Y(E.$$.fragment,R),Y(T.$$.fragment,R),Y(I.$$.fragment,R),Y(G.$$.fragment,R),Y(W.$$.fragment,R),Y(de.$$.fragment,R),Y(J.$$.fragment,R),Y(q.$$.fragment,R),Y(Se.$$.fragment,R),Y(Ue.$$.fragment,R),Y(ke.$$.fragment,R),Y(We.$$.fragment,R),Y(Ce.$$.fragment,R),L=!0)},o(R){X(o.$$.fragment,R),X(s.$$.fragment,R),X(E.$$.fragment,R),X(T.$$.fragment,R),X(I.$$.fragment,R),X(G.$$.fragment,R),X(W.$$.fragment,R),X(de.$$.fragment,R),X(J.$$.fragment,R),X(q.$$.fragment,R),X(Se.$$.fragment,R),X(Ue.$$.fragment,R),X(ke.$$.fragment,R),X(We.$$.fragment,R),X(Ce.$$.fragment,R),L=!1},d(R){R&&te(t),ee(o),ee(s),ee(E),ee(T),ee(I),ee(G),ee(W),ee(de),ee(J),ee(q),ee(Se),ee(Ue),ee(ke),ee(We),ee(Ce),e[2](null),M=!1,Ln(F)}}}function cC(e,t,n){let r;const a=()=>{const u=r.getElementsByClassName("CodeMirror");[...Array(u.length)].forEach((s,l)=>{console.log(l);const d=u.item(l);d.classList.add("!font-mono"),d.classList.add("!h-auto")})},i=(u,s)=>{try{Qr.fromTextArea(u,{readOnly:!0,mode:"arna",theme:"midnight",cursorHeight:0}).setValue(s)}catch{console.error("Expected node to be of type HTMLTextAreaElement")}};yr(()=>{cu(),a()});function o(u){Bt[u?"unshift":"push"](()=>{r=u,n(0,r)})}return[r,i,o]}class fC extends qe{constructor(t){super();Xe(this,t,cC,lC,je,{})}}function dC(e){let t,n,r,a;return{c(){t=Z("div"),n=Z("div"),r=Z("span"),a=ie(e[0]),V(r,"class","text-lg font-center font-mono font-semibold"),V(n,"class","min-w-full cursor-pointer rounded shadow-[0_0_2pt_1px] shadow-override-bg/30 px-2 bg-override-neutral-500/50"),V(t,"class","flex items-center min-w-full text-center")},m(i,o){ae(i,t,o),D(t,n),D(n,r),D(r,a),e[4](n)},p(i,[o]){o&1&&or(a,i[0])},i:Oe,o:Oe,d(i){i&&te(t),e[4](null)}}}function hC(e,t,n){let{label:r}=t,{onSelect:a}=t,{isChecked:i=!1}=t,o;const u=["!bg-override-yellow","text-override-neutral-900"],s=()=>{u.forEach(c=>{o.classList.add(c)})},l=()=>{u.forEach(c=>{o.classList.remove(c)})};yr(()=>{i&&s(),o.addEventListener("click",()=>{a(),s()})});function d(c){Bt[c?"unshift":"push"](()=>{o=c,n(1,o)})}return e.$$set=c=>{"label"in c&&n(0,r=c.label),"onSelect"in c&&n(2,a=c.onSelect),"isChecked"in c&&n(3,i=c.isChecked)},e.$$.update=()=>{e.$$.dirty&10&&(i||o&&l())},[r,o,a,i,d]}class pC extends qe{constructor(t){super();Xe(this,t,hC,dC,je,{label:0,onSelect:2,isChecked:3})}}function Zs(e,t,n){const r=e.slice();return r[7]=t[n],r[9]=n,r}function Js(e,t){let n,r,a;return r=new pC({props:{label:t[7]+"",onSelect:t[3](t[9]),isChecked:t[2]===t[9]}}),{key:e,first:null,c(){n=Oc(),re(r.$$.fragment),this.first=n},m(i,o){ae(i,n,o),Q(r,i,o),a=!0},p(i,o){t=i;const u={};o&2&&(u.label=t[7]+""),o&2&&(u.onSelect=t[3](t[9])),o&6&&(u.isChecked=t[2]===t[9]),r.$set(u)},i(i){a||(Y(r.$$.fragment,i),a=!0)},o(i){X(r.$$.fragment,i),a=!1},d(i){i&&te(n),ee(r,i)}}}function vC(e){let t,n,r,a,i,o=[],u=new Map,s,l,d=e[1];const c=p=>p[9];for(let p=0;p<d.length;p+=1){let v=Zs(e,d,p),_=c(v);u.set(_,o[p]=Js(_,v))}return{c(){t=Z("div"),n=Z("span"),r=ie(e[0]),a=se(),i=Z("div");for(let p=0;p<o.length;p+=1)o[p].c();V(n,"class","mb-4 text-center italic text-override-yellow"),V(i,"class","grid grid-cols-custom gap-y-6 gap-x-4 px-1 justify-items-center"),V(t,"class",s=`flex flex-col ${e[4].class}`)},m(p,v){ae(p,t,v),D(t,n),D(n,r),D(t,a),D(t,i);for(let _=0;_<o.length;_+=1)o[_].m(i,null);l=!0},p(p,[v]){(!l||v&1)&&or(r,p[0]),v&14&&(d=p[1],ea(),o=kc(o,v,c,1,p,d,u,i,Lc,Js,null,Zs),ta()),(!l||v&16&&s!==(s=`flex flex-col ${p[4].class}`))&&V(t,"class",s)},i(p){if(!l){for(let v=0;v<d.length;v+=1)Y(o[v]);l=!0}},o(p){for(let v=0;v<o.length;v+=1)X(o[v]);l=!1},d(p){p&&te(t);for(let v=0;v<o.length;v+=1)o[v].d()}}}function _C(e,t,n){let{label:r}=t,{values:a}=t,{onIndexChange:i}=t,{defaultIndex:o}=t,u=o;function s(l){return()=>{n(2,u=l),i(l)}}return e.$$set=l=>{n(4,t=nt(nt({},t),ut(l))),"label"in l&&n(0,r=l.label),"values"in l&&n(1,a=l.values),"onIndexChange"in l&&n(5,i=l.onIndexChange),"defaultIndex"in l&&n(6,o=l.defaultIndex)},t=ut(t),[r,a,u,s,t,i,o]}class mt extends qe{constructor(t){super();Xe(this,t,_C,vC,je,{label:0,values:1,onIndexChange:5,defaultIndex:6})}}function gC(e){let t,n,r,a;return{c(){t=Jt("svg"),n=Jt("path"),r=Jt("path"),V(n,"d","M0 0h24v24H0z"),V(n,"fill","none"),V(r,"d","M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"),V(t,"xmlns","http://www.w3.org/2000/svg"),V(t,"height","24px"),V(t,"viewBox","0 0 24 24"),V(t,"width","24px"),V(t,"class",a=e[1].class)},m(i,o){ae(i,t,o),D(t,n),D(t,r),e[2](t)},p(i,[o]){o&2&&a!==(a=i[1].class)&&V(t,"class",a)},i:Oe,o:Oe,d(i){i&&te(t),e[2](null)}}}function mC(e,t,n){let{svgElement:r=null}=t;function a(i){Bt[i?"unshift":"push"](()=>{r=i,n(0,r)})}return e.$$set=i=>{n(1,t=nt(nt({},t),ut(i))),"svgElement"in i&&n(0,r=i.svgElement)},t=ut(t),[r,t,a]}class yC extends qe{constructor(t){super();Xe(this,t,mC,gC,je,{svgElement:0})}}const EC=e=>({}),Qs=e=>({}),TC=e=>({}),eu=e=>({});function tu(e){let t,n;const r=e[4].content,a=Ii(r,e,e[3],Qs);return{c(){t=Z("div"),a&&a.c(),V(t,"class","py-4 px-2")},m(i,o){ae(i,t,o),a&&a.m(t,null),n=!0},p(i,o){a&&a.p&&(!n||o&8)&&Ni(a,r,i,i[3],n?Si(r,i[3],o,EC):Pi(i[3]),Qs)},i(i){n||(Y(a,i),n=!0)},o(i){X(a,i),n=!1},d(i){i&&te(t),a&&a.d(i)}}}function AC(e){let t,n,r,a,i,o,u,s,l;const d=e[4].label,c=Ii(d,e,e[3],eu);function p(f){e[5](f)}let v={class:"fill-override-neutral-50 justify-self-end transition"};e[2]!==void 0&&(v.svgElement=e[2]),i=new yC({props:v}),Bt.push(()=>Mc(i,"svgElement",p));let _=e[0]&&tu(e);return{c(){t=Z("div"),n=Z("div"),r=Z("div"),c&&c.c(),a=se(),re(i.$$.fragment),s=se(),_&&_.c(),V(r,"class","flex justify-between px-2"),V(n,"class",u=`py-3 cursor-pointer ${e[0]?nu:""}`),V(t,"class",`${bC}`)},m(f,m){ae(f,t,m),D(t,n),D(n,r),c&&c.m(r,null),D(r,a),Q(i,r,null),e[6](n),D(t,s),_&&_.m(t,null),l=!0},p(f,[m]){c&&c.p&&(!l||m&8)&&Ni(c,d,f,f[3],l?Si(d,f[3],m,TC):Pi(f[3]),eu);const E={};!o&&m&4&&(o=!0,E.svgElement=f[2],Cc(()=>o=!1)),i.$set(E),(!l||m&1&&u!==(u=`py-3 cursor-pointer ${f[0]?nu:""}`))&&V(n,"class",u),f[0]?_?(_.p(f,m),m&1&&Y(_,1)):(_=tu(f),_.c(),Y(_,1),_.m(t,null)):_&&(ea(),X(_,1,1,()=>{_=null}),ta())},i(f){l||(Y(c,f),Y(i.$$.fragment,f),Y(_),l=!0)},o(f){X(c,f),X(i.$$.fragment,f),X(_),l=!1},d(f){f&&te(t),c&&c.d(f),ee(i),e[6](null),_&&_.d()}}}const nu="border-b-[1px] border-override-blue",bC="border-b-[1px] last:border-b-0 border-override-neutral-50/25";function OC(e,t,n){let{$$slots:r={},$$scope:a}=t,i=!1,o,u;const s=()=>{n(0,i=!i),i?u.classList.add("-rotate-90"):u.classList.remove("-rotate-90")};yr(()=>{o.addEventListener("click",()=>{s()}),o.addEventListener("mouseover",()=>{u.classList.add("!fill-override-blue"),o.classList.add("!text-override-blue")}),o.addEventListener("mouseleave",()=>{u.classList.remove("!fill-override-blue"),o.classList.remove("!text-override-blue")})});function l(c){u=c,n(2,u)}function d(c){Bt[c?"unshift":"push"](()=>{o=c,n(1,o)})}return e.$$set=c=>{"$$scope"in c&&n(3,a=c.$$scope)},[i,o,u,a,r,l,d]}class ci extends qe{constructor(t){super();Xe(this,t,OC,AC,je,{})}}function RC(e){let t;return{c(){t=Z("span"),t.textContent="Graph Layout Algorithm",V(t,"slot","label")},m(n,r){ae(n,t,r)},d(n){n&&te(t)}}}function IC(e){let t,n,r,a,i,o,u,s;return t=new mt({props:{label:"Iterations",values:lr.choices,defaultIndex:e[0],onIndexChange:e[11],class:"mb-4"}}),r=new mt({props:{label:"Force Coefficient",values:fr.choices,defaultIndex:e[1],onIndexChange:e[12],class:"mb-4"}}),i=new mt({props:{label:"Max Repulsive Force Distance",values:On.choices,defaultIndex:e[2],onIndexChange:e[13],class:"mb-4"}}),u=new mt({props:{label:"Optimal Node Distance",values:cr.choices,defaultIndex:e[3],onIndexChange:e[14]}}),{c(){re(t.$$.fragment),n=se(),re(r.$$.fragment),a=se(),re(i.$$.fragment),o=se(),re(u.$$.fragment)},m(l,d){Q(t,l,d),ae(l,n,d),Q(r,l,d),ae(l,a,d),Q(i,l,d),ae(l,o,d),Q(u,l,d),s=!0},p(l,d){const c={};d&1&&(c.defaultIndex=l[0]),d&1&&(c.onIndexChange=l[11]),t.$set(c);const p={};d&2&&(p.defaultIndex=l[1]),d&2&&(p.onIndexChange=l[12]),r.$set(p);const v={};d&4&&(v.defaultIndex=l[2]),d&4&&(v.onIndexChange=l[13]),i.$set(v);const _={};d&8&&(_.defaultIndex=l[3]),d&8&&(_.onIndexChange=l[14]),u.$set(_)},i(l){s||(Y(t.$$.fragment,l),Y(r.$$.fragment,l),Y(i.$$.fragment,l),Y(u.$$.fragment,l),s=!0)},o(l){X(t.$$.fragment,l),X(r.$$.fragment,l),X(i.$$.fragment,l),X(u.$$.fragment,l),s=!1},d(l){ee(t,l),l&&te(n),ee(r,l),l&&te(a),ee(i,l),l&&te(o),ee(u,l)}}}function SC(e){let t;return{c(){t=Z("span"),t.textContent="Edge Bundling",V(t,"slot","label")},m(n,r){ae(n,t,r)},d(n){n&&te(t)}}}function NC(e){let t,n,r,a,i,o,u,s,l,d,c,p;return t=new mt({props:{label:"Compatability Threshold",values:hr.choices,defaultIndex:e[4],onIndexChange:e[15],class:"mb-4"}}),r=new mt({props:{label:"Initial Step Size",values:dr.choices,defaultIndex:e[5],onIndexChange:e[16],class:"mb-4"}}),i=new mt({props:{label:"Bundling Stiffness Coefficient",values:pr.choices,defaultIndex:e[6],onIndexChange:e[17],class:"mb-4"}}),u=new mt({props:{label:"Initial Subdivision Rate",values:vr.choices,defaultIndex:e[7],onIndexChange:e[18],class:"mb-4"}}),l=new mt({props:{label:"Initial Bundling Iterations",values:_r.choices,defaultIndex:e[8],onIndexChange:e[19],class:"mb-4"}}),c=new mt({props:{label:"Bundling Iteration Depreciation Rate",values:gr.choices,defaultIndex:e[9],onIndexChange:e[20]}}),{c(){re(t.$$.fragment),n=se(),re(r.$$.fragment),a=se(),re(i.$$.fragment),o=se(),re(u.$$.fragment),s=se(),re(l.$$.fragment),d=se(),re(c.$$.fragment)},m(v,_){Q(t,v,_),ae(v,n,_),Q(r,v,_),ae(v,a,_),Q(i,v,_),ae(v,o,_),Q(u,v,_),ae(v,s,_),Q(l,v,_),ae(v,d,_),Q(c,v,_),p=!0},p(v,_){const f={};_&16&&(f.defaultIndex=v[4]),_&16&&(f.onIndexChange=v[15]),t.$set(f);const m={};_&32&&(m.defaultIndex=v[5]),_&32&&(m.onIndexChange=v[16]),r.$set(m);const E={};_&64&&(E.defaultIndex=v[6]),_&64&&(E.onIndexChange=v[17]),i.$set(E);const b={};_&128&&(b.defaultIndex=v[7]),_&128&&(b.onIndexChange=v[18]),u.$set(b);const A={};_&256&&(A.defaultIndex=v[8]),_&256&&(A.onIndexChange=v[19]),l.$set(A);const S={};_&512&&(S.defaultIndex=v[9]),_&512&&(S.onIndexChange=v[20]),c.$set(S)},i(v){p||(Y(t.$$.fragment,v),Y(r.$$.fragment,v),Y(i.$$.fragment,v),Y(u.$$.fragment,v),Y(l.$$.fragment,v),Y(c.$$.fragment,v),p=!0)},o(v){X(t.$$.fragment,v),X(r.$$.fragment,v),X(i.$$.fragment,v),X(u.$$.fragment,v),X(l.$$.fragment,v),X(c.$$.fragment,v),p=!1},d(v){ee(t,v),v&&te(n),ee(r,v),v&&te(a),ee(i,v),v&&te(o),ee(u,v),v&&te(s),ee(l,v),v&&te(d),ee(c,v)}}}function PC(e){let t;return{c(){t=Z("span"),t.textContent="Randomization",V(t,"slot","label")},m(n,r){ae(n,t,r)},d(n){n&&te(t)}}}function CC(e){let t,n;return t=new mt({props:{label:"Edge Count (random graphs only)",values:ur.choices,defaultIndex:e[10],onIndexChange:e[21]}}),{c(){re(t.$$.fragment)},m(r,a){Q(t,r,a),n=!0},p(r,a){const i={};a&1024&&(i.defaultIndex=r[10]),a&1024&&(i.onIndexChange=r[21]),t.$set(i)},i(r){n||(Y(t.$$.fragment,r),n=!0)},o(r){X(t.$$.fragment,r),n=!1},d(r){ee(t,r)}}}function $C(e){let t,n,r,a,i,o,u;return n=new ci({props:{$$slots:{content:[IC],label:[RC]},$$scope:{ctx:e}}}),a=new ci({props:{$$slots:{content:[NC],label:[SC]},$$scope:{ctx:e}}}),o=new ci({props:{$$slots:{content:[CC],label:[PC]},$$scope:{ctx:e}}}),{c(){t=Z("div"),re(n.$$.fragment),r=se(),re(a.$$.fragment),i=se(),re(o.$$.fragment),V(t,"class","mb-2 rounded flex flex-col w-full text-neutral-200 font-mono bg-override-neutral-900/30 outline-thin")},m(s,l){ae(s,t,l),Q(n,t,null),D(t,r),Q(a,t,null),D(t,i),Q(o,t,null),u=!0},p(s,[l]){const d={};l&4194319&&(d.$$scope={dirty:l,ctx:s}),n.$set(d);const c={};l&4195312&&(c.$$scope={dirty:l,ctx:s}),a.$set(c);const p={};l&4195328&&(p.$$scope={dirty:l,ctx:s}),o.$set(p)},i(s){u||(Y(n.$$.fragment,s),Y(a.$$.fragment,s),Y(o.$$.fragment,s),u=!0)},o(s){X(n.$$.fragment,s),X(a.$$.fragment,s),X(o.$$.fragment,s),u=!1},d(s){s&&te(t),ee(n),ee(a),ee(o)}}}function LC(e,t,n){let r,a,i,o,u,s,l,d,c,p,v;return ye(e,lr,h=>n(0,r=h)),ye(e,fr,h=>n(1,a=h)),ye(e,On,h=>n(2,i=h)),ye(e,cr,h=>n(3,o=h)),ye(e,hr,h=>n(4,u=h)),ye(e,dr,h=>n(5,s=h)),ye(e,pr,h=>n(6,l=h)),ye(e,vr,h=>n(7,d=h)),ye(e,_r,h=>n(8,c=h)),ye(e,gr,h=>n(9,p=h)),ye(e,ur,h=>n(10,v=h)),[r,a,i,o,u,s,l,d,c,p,v,h=>{Fe(lr,r=h,r)},h=>{Fe(fr,a=h,a)},h=>{Fe(On,i=h,i)},h=>{Fe(cr,o=h,o)},h=>{Fe(hr,u=h,u)},h=>{Fe(dr,s=h,s)},h=>{Fe(pr,l=h,l)},h=>{Fe(vr,d=h,d)},h=>{Fe(_r,c=h,c)},h=>{Fe(gr,p=h,p)},h=>{Fe(ur,v=h,v)}]}class kC extends qe{constructor(t){super();Xe(this,t,LC,$C,je,{})}}function MC(e){let t,n,r,a;return{c(){t=Jt("svg"),n=Jt("path"),r=Jt("path"),V(n,"d","M0 0h24v24H0z"),V(n,"fill","none"),V(r,"d","M6.76 4.84l-1.8-1.79-1.41 1.41 1.79 1.79 1.42-1.41zM4 10.5H1v2h3v-2zm9-9.95h-2V3.5h2V.55zm7.45 3.91l-1.41-1.41-1.79 1.79 1.41 1.41 1.79-1.79zm-3.21 13.7l1.79 1.8 1.41-1.41-1.8-1.79-1.4 1.4zM20 10.5v2h3v-2h-3zm-8-5c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6-2.69-6-6-6zm-1 16.95h2V19.5h-2v2.95zm-7.45-3.91l1.41 1.41 1.79-1.8-1.41-1.41-1.79 1.8z"),V(t,"class",a=e[0].class),V(t,"xmlns","http://www.w3.org/2000/svg"),V(t,"height","24px"),V(t,"viewBox","0 0 24 24"),V(t,"width","24px"),V(t,"fill","#000000")},m(i,o){ae(i,t,o),D(t,n),D(t,r)},p(i,[o]){o&1&&a!==(a=i[0].class)&&V(t,"class",a)},i:Oe,o:Oe,d(i){i&&te(t)}}}function wC(e,t,n){return e.$$set=r=>{n(0,t=nt(nt({},t),ut(r)))},t=ut(t),[t]}class xC extends qe{constructor(t){super();Xe(this,t,wC,MC,je,{})}}function DC(e){let t,n,r;return{c(){t=Jt("svg"),n=Jt("path"),V(n,"d","M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"),V(t,"xmlns","http://www.w3.org/2000/svg"),V(t,"width","24"),V(t,"height","24"),V(t,"viewBox","0 0 24 24"),V(t,"class",r=e[0].class)},m(a,i){ae(a,t,i),D(t,n)},p(a,[i]){i&1&&r!==(r=a[0].class)&&V(t,"class",r)},i:Oe,o:Oe,d(a){a&&te(t)}}}function FC(e,t,n){return e.$$set=r=>{n(0,t=nt(nt({},t),ut(r)))},t=ut(t),[t]}class UC extends qe{constructor(t){super();Xe(this,t,FC,DC,je,{})}}function GC(e){let t,n,r,a,i,o,u,s;return u=new UC({props:{class:"!fill-override-bg/80 hover:!fill-override-blue w-auto h-7"}}),{c(){t=Z("div"),n=Z("div"),r=Z("div"),r.innerHTML='<span class="font-semibold">\u043A\u04AF\u043D\u0456\u043C - Jack Henry</span>',a=se(),i=Z("div"),o=Z("a"),re(u.$$.fragment),V(r,"class","flex-grow"),V(o,"href","https://github.com/jackhenry/arna"),V(i,"class",""),V(n,"class","w-full flex"),V(t,"class","text-override-bg overflow-hidden bg-override-yellow relative p-1")},m(l,d){ae(l,t,d),D(t,n),D(n,r),D(n,a),D(n,i),D(i,o),Q(u,o,null),s=!0},p:Oe,i(l){s||(Y(u.$$.fragment,l),s=!0)},o(l){X(u.$$.fragment,l),s=!1},d(l){l&&te(t),ee(u)}}}class jC extends qe{constructor(t){super();Xe(this,t,null,GC,je,{})}}function ru(e){let t,n;return t=new kC({}),{c(){re(t.$$.fragment)},m(r,a){Q(t,r,a),n=!0},i(r){n||(Y(t.$$.fragment,r),n=!0)},o(r){X(t.$$.fragment,r),n=!1},d(r){ee(t,r)}}}function au(e){let t,n;return t=new fC({}),{c(){re(t.$$.fragment)},m(r,a){Q(t,r,a),n=!0},i(r){n||(Y(t.$$.fragment,r),n=!0)},o(r){X(t.$$.fragment,r),n=!1},d(r){ee(t,r)}}}function BC(e){let t,n,r,a,i,o,u,s,l,d,c,p,v,_,f;n=new jC({}),o=new xC({props:{class:"!fill-override-yellow mr-2 animate-spin-slow"}}),d=new Hc({});let m=e[0]&&ru(),E=e[1]&&au();return _=new KP({}),{c(){t=Z("main"),re(n.$$.fragment),r=se(),a=Z("div"),i=Z("div"),re(o.$$.fragment),u=se(),s=Z("span"),s.innerHTML=`<span class="font-serif text-3xl text-override-blue font-semibold">\u0410\u0440\u043D\u0430</span> 
        <span class="text-3xl text-override-yellow font-semibold">Graph DSL</span>`,l=se(),re(d.$$.fragment),c=se(),m&&m.c(),p=se(),E&&E.c(),v=se(),re(_.$$.fragment),V(s,"class","font-sans"),V(i,"class","flex items-center mb-4"),V(a,"class","flex flex-col max-w-4xl items-center mx-auto pt-4 px-4")},m(b,A){ae(b,t,A),Q(n,t,null),D(t,r),D(t,a),D(a,i),Q(o,i,null),D(i,u),D(i,s),D(a,l),Q(d,a,null),D(a,c),m&&m.m(a,null),D(a,p),E&&E.m(a,null),D(a,v),Q(_,a,null),f=!0},p(b,[A]){b[0]?m?A&1&&Y(m,1):(m=ru(),m.c(),Y(m,1),m.m(a,p)):m&&(ea(),X(m,1,1,()=>{m=null}),ta()),b[1]?E?A&2&&Y(E,1):(E=au(),E.c(),Y(E,1),E.m(a,v)):E&&(ea(),X(E,1,1,()=>{E=null}),ta())},i(b){f||(Y(n.$$.fragment,b),Y(o.$$.fragment,b),Y(d.$$.fragment,b),Y(m),Y(E),Y(_.$$.fragment,b),f=!0)},o(b){X(n.$$.fragment,b),X(o.$$.fragment,b),X(d.$$.fragment,b),X(m),X(E),X(_.$$.fragment,b),f=!1},d(b){b&&te(t),ee(n),ee(o),ee(d),m&&m.d(),E&&E.d(),ee(_)}}}function WC(e,t,n){let r,a;return ye(e,pu,i=>n(0,r=i)),ye(e,hu,i=>n(1,a=i)),[r,a]}class VC extends qe{constructor(t){super();Xe(this,t,WC,BC,je,{})}}new VC({target:document.getElementById("root")});
